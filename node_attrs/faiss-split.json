{
 "PRed": [
  {
   "PR": {
    "__lazy_json__": "pr_json/416899054.json"
   },
   "data": {
    "bot_rerun": 1603216859.5193415,
    "migrator_name": "MigrationYaml",
    "migrator_object_version": 1,
    "migrator_version": 0,
    "name": "pypy"
   },
   "keys": [
    "bot_rerun",
    "migrator_name",
    "migrator_object_version",
    "migrator_version",
    "name"
   ]
  },
  {
   "PR": {
    "__lazy_json__": "pr_json/416901248.json"
   },
   "data": {
    "bot_rerun": false,
    "migrator_name": "MigrationYaml",
    "migrator_object_version": 1,
    "migrator_version": 0,
    "name": "python38"
   },
   "keys": [
    "bot_rerun",
    "migrator_name",
    "migrator_object_version",
    "migrator_version",
    "name"
   ]
  },
  {
   "PR": {
    "__lazy_json__": "pr_json/499553742.json"
   },
   "data": {
    "bot_rerun": false,
    "migrator_name": "MigrationYaml",
    "migrator_object_version": 1,
    "migrator_version": 0,
    "name": "cuda110"
   },
   "keys": [
    "bot_rerun",
    "migrator_name",
    "migrator_object_version",
    "migrator_version",
    "name"
   ]
  },
  {
   "PR": {
    "__lazy_json__": "pr_json/507242973.json"
   },
   "data": {
    "bot_rerun": 1607781209.9384518,
    "migrator_name": "MigrationYaml",
    "migrator_object_version": 1,
    "migrator_version": 0,
    "name": "pypy"
   },
   "keys": [
    "bot_rerun",
    "migrator_name",
    "migrator_object_version",
    "migrator_version",
    "name"
   ]
  },
  {
   "PR": {
    "__lazy_json__": "pr_json/519102519.json"
   },
   "data": {
    "bot_rerun": false,
    "migrator_name": "MigrationYaml",
    "migrator_object_version": 2,
    "migrator_version": 0,
    "name": "python39"
   },
   "keys": [
    "bot_rerun",
    "migrator_name",
    "migrator_object_version",
    "migrator_version",
    "name"
   ]
  },
  {
   "PR": {
    "__lazy_json__": "pr_json/525916989.json"
   },
   "data": {
    "bot_rerun": false,
    "migrator_name": "MigrationYaml",
    "migrator_object_version": 1,
    "migrator_version": 0,
    "name": "windows_cuda"
   },
   "keys": [
    "bot_rerun",
    "migrator_name",
    "migrator_object_version",
    "migrator_version",
    "name"
   ]
  },
  {
   "PR": {
    "__lazy_json__": "pr_json/553135505.json"
   },
   "data": {
    "bot_rerun": 1613557352.6851385,
    "migrator_name": "MigrationYaml",
    "migrator_object_version": 1,
    "migrator_version": 0,
    "name": "pypy"
   },
   "keys": [
    "bot_rerun",
    "migrator_name",
    "migrator_object_version",
    "migrator_version",
    "name"
   ]
  },
  {
   "PR": {
    "__lazy_json__": "pr_json/574670722.json"
   },
   "data": {
    "bot_rerun": false,
    "migrator_name": "MigrationYaml",
    "migrator_object_version": 1,
    "migrator_version": 0,
    "name": "cuda111_112"
   },
   "keys": [
    "bot_rerun",
    "migrator_name",
    "migrator_object_version",
    "migrator_version",
    "name"
   ]
  },
  {
   "PR": {
    "__lazy_json__": "pr_json/574847014.json"
   },
   "data": {
    "bot_rerun": false,
    "migrator_name": "MigrationYaml",
    "migrator_object_version": 1,
    "migrator_version": 0,
    "name": "pypy"
   },
   "keys": [
    "bot_rerun",
    "migrator_name",
    "migrator_object_version",
    "migrator_version",
    "name"
   ]
  }
 ],
 "archived": false,
 "bad": false,
 "branch": "master",
 "conda-forge.yml": {},
 "feedstock_name": "faiss-split",
 "hash_type": "sha256",
 "linux_64_meta_yaml": {
  "about": {
   "description": "Faiss is a library for efficient similarity search and clustering of dense vectors.\nIt contains algorithms that search in sets of vectors of any size, up to ones that\npossibly do not fit in RAM. It also contains supporting code for evaluation and\nparameter tuning. Faiss is written in C++ with complete wrappers for Python/numpy.\nSome of the most useful algorithms are implemented on the GPU. It is developed by\n[Facebook AI Research](https://research.fb.com/category/facebook-ai-research-fair/).\n\nFor best performance, the maintainers of the package\n[recommend](https://github.com/conda-forge/staged-recipes/pull/11337#issuecomment-623718460)\nusing the MKL implementation of blas/lapack. You can ensure that this is installed\nby adding \"libblas =*=*mkl\" to your dependencies.\n",
   "dev_url": "https://github.com/facebookresearch/faiss",
   "doc_url": "https://rawgit.com/facebookresearch/faiss/master/docs/html/annotated.html",
   "home": "https://github.com/facebookresearch/faiss",
   "license": "MIT",
   "license_family": "MIT",
   "license_file": "LICENSE",
   "summary": "A library for efficient similarity search and clustering of dense vectors."
  },
  "build": {
   "number": "3"
  },
  "extra": {
   "recipe-maintainers": [
    "h-vetinari",
    "h-vetinari",
    "h-vetinari",
    "h-vetinari",
    "h-vetinari"
   ]
  },
  "outputs": [
   {
    "build": {
     "string": "cuda"
    },
    "name": "faiss-proc",
    "test": {
     "commands": [
      "exit 0"
     ]
    },
    "version": "1.0.0"
   },
   {
    "build": {
     "run_exports": [
      "libfaiss{{ libext }}",
      "libfaiss_avx2 =*=*_cuda"
     ],
     "string": "cuda110h1234567_3_cuda"
    },
    "name": "libfaiss-avx2",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "cuda_compiler_stub",
      "cmake",
      "libgomp"
     ],
     "host": [
      "libblas",
      "liblapack"
     ],
     "run_constrained": [
      "faiss-proc * cuda"
     ]
    },
    "script": "build-lib-avx2.sh",
    "test": {
     "commands": [
      "test -f $PREFIX/lib/libfaiss_avx2.so",
      "test ! -f $PREFIX/lib/libfaiss_avx2.a",
      "test -f $PREFIX/include/faiss_avx2/AutoTune.h || (echo \"AutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/Clustering.h || (echo \"Clustering.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IVFlib.h || (echo \"IVFlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/Index.h || (echo \"Index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/Index2Layer.h || (echo \"Index2Layer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinary.h || (echo \"IndexBinary.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryFlat.h || (echo \"IndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryFromFloat.h || (echo \"IndexBinaryFromFloat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryHNSW.h || (echo \"IndexBinaryHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryHash.h || (echo \"IndexBinaryHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryIVF.h || (echo \"IndexBinaryIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexFlat.h || (echo \"IndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexHNSW.h || (echo \"IndexHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVF.h || (echo \"IndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFFlat.h || (echo \"IndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFPQ.h || (echo \"IndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFPQFastScan.h || (echo \"IndexIVFPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFPQR.h || (echo \"IndexIVFPQR.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFSpectralHash.h || (echo \"IndexIVFSpectralHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexLSH.h || (echo \"IndexLSH.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexLattice.h || (echo \"IndexLattice.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexPQ.h || (echo \"IndexPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexPQFastScan.h || (echo \"IndexPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexPreTransform.h || (echo \"IndexPreTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexRefine.h || (echo \"IndexRefine.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexReplicas.h || (echo \"IndexReplicas.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexScalarQuantizer.h || (echo \"IndexScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexShards.h || (echo \"IndexShards.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/MatrixStats.h || (echo \"MatrixStats.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/MetaIndexes.h || (echo \"MetaIndexes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/MetricType.h || (echo \"MetricType.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/VectorTransform.h || (echo \"VectorTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/clone_index.h || (echo \"clone_index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/index_factory.h || (echo \"index_factory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/index_io.h || (echo \"index_io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/AuxIndexStructures.h || (echo \"impl/AuxIndexStructures.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/FaissAssert.h || (echo \"impl/FaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/FaissException.h || (echo \"impl/FaissException.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/HNSW.h || (echo \"impl/HNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/PolysemousTraining.h || (echo \"impl/PolysemousTraining.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ProductQuantizer-inl.h || (echo \"impl/ProductQuantizer-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ProductQuantizer.h || (echo \"impl/ProductQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ResultHandler.h || (echo \"impl/ResultHandler.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ScalarQuantizer.h || (echo \"impl/ScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ThreadedIndex-inl.h || (echo \"impl/ThreadedIndex-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ThreadedIndex.h || (echo \"impl/ThreadedIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/io.h || (echo \"impl/io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/io_macros.h || (echo \"impl/io_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/lattice_Zn.h || (echo \"impl/lattice_Zn.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/platform_macros.h || (echo \"impl/platform_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/pq4_fast_scan.h || (echo \"impl/pq4_fast_scan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/simd_result_handlers.h || (echo \"impl/simd_result_handlers.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/BlockInvertedLists.h || (echo \"invlists/BlockInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/DirectMap.h || (echo \"invlists/DirectMap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/InvertedLists.h || (echo \"invlists/InvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/InvertedListsIOHook.h || (echo \"invlists/InvertedListsIOHook.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/AlignedTable.h || (echo \"utils/AlignedTable.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/Heap.h || (echo \"utils/Heap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/WorkerThread.h || (echo \"utils/WorkerThread.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/distances.h || (echo \"utils/distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/extra_distances.h || (echo \"utils/extra_distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/hamming-inl.h || (echo \"utils/hamming-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/hamming.h || (echo \"utils/hamming.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/ordered_key_value.h || (echo \"utils/ordered_key_value.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/partitioning.h || (echo \"utils/partitioning.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/quantize_lut.h || (echo \"utils/quantize_lut.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/random.h || (echo \"utils/random.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/simdlib.h || (echo \"utils/simdlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/simdlib_avx2.h || (echo \"utils/simdlib_avx2.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/simdlib_emulated.h || (echo \"utils/simdlib_emulated.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/utils.h || (echo \"utils/utils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/OnDiskInvertedLists.h || (echo \"invlists/OnDiskInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuAutoTune.h || (echo \"gpu/GpuAutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuCloner.h || (echo \"gpu/GpuCloner.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuClonerOptions.h || (echo \"gpu/GpuClonerOptions.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuDistance.h || (echo \"gpu/GpuDistance.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuFaissAssert.h || (echo \"gpu/GpuFaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndex.h || (echo \"gpu/GpuIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexBinaryFlat.h || (echo \"gpu/GpuIndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexFlat.h || (echo \"gpu/GpuIndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexIVF.h || (echo \"gpu/GpuIndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexIVFFlat.h || (echo \"gpu/GpuIndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexIVFPQ.h || (echo \"gpu/GpuIndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexIVFScalarQuantizer.h || (echo \"gpu/GpuIndexIVFScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndicesOptions.h || (echo \"gpu/GpuIndicesOptions.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuResources.h || (echo \"gpu/GpuResources.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/StandardGpuResources.h || (echo \"gpu/StandardGpuResources.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/BinaryDistance.cuh || (echo \"gpu/impl/BinaryDistance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/BinaryFlatIndex.cuh || (echo \"gpu/impl/BinaryFlatIndex.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/BroadcastSum.cuh || (echo \"gpu/impl/BroadcastSum.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/Distance.cuh || (echo \"gpu/impl/Distance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/DistanceUtils.cuh || (echo \"gpu/impl/DistanceUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/FlatIndex.cuh || (echo \"gpu/impl/FlatIndex.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/GeneralDistance.cuh || (echo \"gpu/impl/GeneralDistance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/GpuScalarQuantizer.cuh || (echo \"gpu/impl/GpuScalarQuantizer.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFAppend.cuh || (echo \"gpu/impl/IVFAppend.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFBase.cuh || (echo \"gpu/impl/IVFBase.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFFlat.cuh || (echo \"gpu/impl/IVFFlat.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFFlatScan.cuh || (echo \"gpu/impl/IVFFlatScan.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFInterleaved.cuh || (echo \"gpu/impl/IVFInterleaved.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFPQ.cuh || (echo \"gpu/impl/IVFPQ.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFUtils.cuh || (echo \"gpu/impl/IVFUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/InterleavedCodes.h || (echo \"gpu/impl/InterleavedCodes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/L2Norm.cuh || (echo \"gpu/impl/L2Norm.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/L2Select.cuh || (echo \"gpu/impl/L2Select.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQCodeDistances-inl.cuh || (echo \"gpu/impl/PQCodeDistances-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQCodeDistances.cuh || (echo \"gpu/impl/PQCodeDistances.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQCodeLoad.cuh || (echo \"gpu/impl/PQCodeLoad.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQScanMultiPassNoPrecomputed-inl.cuh || (echo \"gpu/impl/PQScanMultiPassNoPrecomputed-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQScanMultiPassNoPrecomputed.cuh || (echo \"gpu/impl/PQScanMultiPassNoPrecomputed.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQScanMultiPassPrecomputed.cuh || (echo \"gpu/impl/PQScanMultiPassPrecomputed.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/RemapIndices.h || (echo \"gpu/impl/RemapIndices.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/VectorResidual.cuh || (echo \"gpu/impl/VectorResidual.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/BlockSelectKernel.cuh || (echo \"gpu/utils/BlockSelectKernel.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Comparators.cuh || (echo \"gpu/utils/Comparators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/ConversionOperators.cuh || (echo \"gpu/utils/ConversionOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/CopyUtils.cuh || (echo \"gpu/utils/CopyUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceDefs.cuh || (echo \"gpu/utils/DeviceDefs.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceTensor-inl.cuh || (echo \"gpu/utils/DeviceTensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceTensor.cuh || (echo \"gpu/utils/DeviceTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceUtils.h || (echo \"gpu/utils/DeviceUtils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceVector.cuh || (echo \"gpu/utils/DeviceVector.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Float16.cuh || (echo \"gpu/utils/Float16.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/HostTensor-inl.cuh || (echo \"gpu/utils/HostTensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/HostTensor.cuh || (echo \"gpu/utils/HostTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Limits.cuh || (echo \"gpu/utils/Limits.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/LoadStoreOperators.cuh || (echo \"gpu/utils/LoadStoreOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MathOperators.cuh || (echo \"gpu/utils/MathOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MatrixMult-inl.cuh || (echo \"gpu/utils/MatrixMult-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MatrixMult.cuh || (echo \"gpu/utils/MatrixMult.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MergeNetworkBlock.cuh || (echo \"gpu/utils/MergeNetworkBlock.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MergeNetworkUtils.cuh || (echo \"gpu/utils/MergeNetworkUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MergeNetworkWarp.cuh || (echo \"gpu/utils/MergeNetworkWarp.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/NoTypeTensor.cuh || (echo \"gpu/utils/NoTypeTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Pair.cuh || (echo \"gpu/utils/Pair.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/PtxUtils.cuh || (echo \"gpu/utils/PtxUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/ReductionOperators.cuh || (echo \"gpu/utils/ReductionOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Reductions.cuh || (echo \"gpu/utils/Reductions.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Select.cuh || (echo \"gpu/utils/Select.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/StackDeviceMemory.h || (echo \"gpu/utils/StackDeviceMemory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/StaticUtils.h || (echo \"gpu/utils/StaticUtils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Tensor-inl.cuh || (echo \"gpu/utils/Tensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Tensor.cuh || (echo \"gpu/utils/Tensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/ThrustAllocator.cuh || (echo \"gpu/utils/ThrustAllocator.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Timer.h || (echo \"gpu/utils/Timer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Transpose.cuh || (echo \"gpu/utils/Transpose.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/WarpPackedBits.cuh || (echo \"gpu/utils/WarpPackedBits.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/WarpSelectKernel.cuh || (echo \"gpu/utils/WarpSelectKernel.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/WarpShuffles.cuh || (echo \"gpu/utils/WarpShuffles.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/blockselect/BlockSelectImpl.cuh || (echo \"gpu/utils/blockselect/BlockSelectImpl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/warpselect/WarpSelectImpl.cuh || (echo \"gpu/utils/warpselect/WarpSelectImpl.cuh not found\" && exit 1)"
     ]
    }
   },
   {
    "build": {
     "run_exports": [
      "libfaiss{{ libext }}",
      "libfaiss =*=*_cuda"
     ],
     "string": "cuda110h1234567_3_cuda"
    },
    "name": "libfaiss",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "cuda_compiler_stub",
      "cmake",
      "libgomp"
     ],
     "host": [
      "libblas",
      "liblapack"
     ],
     "run_constrained": [
      "faiss-proc * cuda"
     ]
    },
    "script": "build-lib-generic.sh",
    "test": {
     "commands": [
      "test -f $PREFIX/lib/libfaiss.so",
      "test ! -f $PREFIX/lib/libfaiss.a",
      "test -f $PREFIX/include/faiss/AutoTune.h || (echo \"AutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/Clustering.h || (echo \"Clustering.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IVFlib.h || (echo \"IVFlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/Index.h || (echo \"Index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/Index2Layer.h || (echo \"Index2Layer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinary.h || (echo \"IndexBinary.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryFlat.h || (echo \"IndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryFromFloat.h || (echo \"IndexBinaryFromFloat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryHNSW.h || (echo \"IndexBinaryHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryHash.h || (echo \"IndexBinaryHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryIVF.h || (echo \"IndexBinaryIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexFlat.h || (echo \"IndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexHNSW.h || (echo \"IndexHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVF.h || (echo \"IndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFFlat.h || (echo \"IndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFPQ.h || (echo \"IndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFPQFastScan.h || (echo \"IndexIVFPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFPQR.h || (echo \"IndexIVFPQR.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFSpectralHash.h || (echo \"IndexIVFSpectralHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexLSH.h || (echo \"IndexLSH.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexLattice.h || (echo \"IndexLattice.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexPQ.h || (echo \"IndexPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexPQFastScan.h || (echo \"IndexPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexPreTransform.h || (echo \"IndexPreTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexRefine.h || (echo \"IndexRefine.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexReplicas.h || (echo \"IndexReplicas.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexScalarQuantizer.h || (echo \"IndexScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexShards.h || (echo \"IndexShards.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/MatrixStats.h || (echo \"MatrixStats.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/MetaIndexes.h || (echo \"MetaIndexes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/MetricType.h || (echo \"MetricType.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/VectorTransform.h || (echo \"VectorTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/clone_index.h || (echo \"clone_index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/index_factory.h || (echo \"index_factory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/index_io.h || (echo \"index_io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/AuxIndexStructures.h || (echo \"impl/AuxIndexStructures.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/FaissAssert.h || (echo \"impl/FaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/FaissException.h || (echo \"impl/FaissException.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/HNSW.h || (echo \"impl/HNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/PolysemousTraining.h || (echo \"impl/PolysemousTraining.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ProductQuantizer-inl.h || (echo \"impl/ProductQuantizer-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ProductQuantizer.h || (echo \"impl/ProductQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ResultHandler.h || (echo \"impl/ResultHandler.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ScalarQuantizer.h || (echo \"impl/ScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ThreadedIndex-inl.h || (echo \"impl/ThreadedIndex-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ThreadedIndex.h || (echo \"impl/ThreadedIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/io.h || (echo \"impl/io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/io_macros.h || (echo \"impl/io_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/lattice_Zn.h || (echo \"impl/lattice_Zn.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/platform_macros.h || (echo \"impl/platform_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/pq4_fast_scan.h || (echo \"impl/pq4_fast_scan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/simd_result_handlers.h || (echo \"impl/simd_result_handlers.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/BlockInvertedLists.h || (echo \"invlists/BlockInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/DirectMap.h || (echo \"invlists/DirectMap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/InvertedLists.h || (echo \"invlists/InvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/InvertedListsIOHook.h || (echo \"invlists/InvertedListsIOHook.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/AlignedTable.h || (echo \"utils/AlignedTable.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/Heap.h || (echo \"utils/Heap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/WorkerThread.h || (echo \"utils/WorkerThread.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/distances.h || (echo \"utils/distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/extra_distances.h || (echo \"utils/extra_distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/hamming-inl.h || (echo \"utils/hamming-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/hamming.h || (echo \"utils/hamming.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/ordered_key_value.h || (echo \"utils/ordered_key_value.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/partitioning.h || (echo \"utils/partitioning.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/quantize_lut.h || (echo \"utils/quantize_lut.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/random.h || (echo \"utils/random.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/simdlib.h || (echo \"utils/simdlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/simdlib_avx2.h || (echo \"utils/simdlib_avx2.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/simdlib_emulated.h || (echo \"utils/simdlib_emulated.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/utils.h || (echo \"utils/utils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/OnDiskInvertedLists.h || (echo \"invlists/OnDiskInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuAutoTune.h || (echo \"gpu/GpuAutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuCloner.h || (echo \"gpu/GpuCloner.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuClonerOptions.h || (echo \"gpu/GpuClonerOptions.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuDistance.h || (echo \"gpu/GpuDistance.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuFaissAssert.h || (echo \"gpu/GpuFaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndex.h || (echo \"gpu/GpuIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexBinaryFlat.h || (echo \"gpu/GpuIndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexFlat.h || (echo \"gpu/GpuIndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexIVF.h || (echo \"gpu/GpuIndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexIVFFlat.h || (echo \"gpu/GpuIndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexIVFPQ.h || (echo \"gpu/GpuIndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexIVFScalarQuantizer.h || (echo \"gpu/GpuIndexIVFScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndicesOptions.h || (echo \"gpu/GpuIndicesOptions.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuResources.h || (echo \"gpu/GpuResources.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/StandardGpuResources.h || (echo \"gpu/StandardGpuResources.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/BinaryDistance.cuh || (echo \"gpu/impl/BinaryDistance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/BinaryFlatIndex.cuh || (echo \"gpu/impl/BinaryFlatIndex.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/BroadcastSum.cuh || (echo \"gpu/impl/BroadcastSum.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/Distance.cuh || (echo \"gpu/impl/Distance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/DistanceUtils.cuh || (echo \"gpu/impl/DistanceUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/FlatIndex.cuh || (echo \"gpu/impl/FlatIndex.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/GeneralDistance.cuh || (echo \"gpu/impl/GeneralDistance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/GpuScalarQuantizer.cuh || (echo \"gpu/impl/GpuScalarQuantizer.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFAppend.cuh || (echo \"gpu/impl/IVFAppend.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFBase.cuh || (echo \"gpu/impl/IVFBase.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFFlat.cuh || (echo \"gpu/impl/IVFFlat.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFFlatScan.cuh || (echo \"gpu/impl/IVFFlatScan.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFInterleaved.cuh || (echo \"gpu/impl/IVFInterleaved.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFPQ.cuh || (echo \"gpu/impl/IVFPQ.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFUtils.cuh || (echo \"gpu/impl/IVFUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/InterleavedCodes.h || (echo \"gpu/impl/InterleavedCodes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/L2Norm.cuh || (echo \"gpu/impl/L2Norm.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/L2Select.cuh || (echo \"gpu/impl/L2Select.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQCodeDistances-inl.cuh || (echo \"gpu/impl/PQCodeDistances-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQCodeDistances.cuh || (echo \"gpu/impl/PQCodeDistances.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQCodeLoad.cuh || (echo \"gpu/impl/PQCodeLoad.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQScanMultiPassNoPrecomputed-inl.cuh || (echo \"gpu/impl/PQScanMultiPassNoPrecomputed-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQScanMultiPassNoPrecomputed.cuh || (echo \"gpu/impl/PQScanMultiPassNoPrecomputed.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQScanMultiPassPrecomputed.cuh || (echo \"gpu/impl/PQScanMultiPassPrecomputed.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/RemapIndices.h || (echo \"gpu/impl/RemapIndices.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/VectorResidual.cuh || (echo \"gpu/impl/VectorResidual.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/BlockSelectKernel.cuh || (echo \"gpu/utils/BlockSelectKernel.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Comparators.cuh || (echo \"gpu/utils/Comparators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/ConversionOperators.cuh || (echo \"gpu/utils/ConversionOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/CopyUtils.cuh || (echo \"gpu/utils/CopyUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceDefs.cuh || (echo \"gpu/utils/DeviceDefs.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceTensor-inl.cuh || (echo \"gpu/utils/DeviceTensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceTensor.cuh || (echo \"gpu/utils/DeviceTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceUtils.h || (echo \"gpu/utils/DeviceUtils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceVector.cuh || (echo \"gpu/utils/DeviceVector.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Float16.cuh || (echo \"gpu/utils/Float16.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/HostTensor-inl.cuh || (echo \"gpu/utils/HostTensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/HostTensor.cuh || (echo \"gpu/utils/HostTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Limits.cuh || (echo \"gpu/utils/Limits.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/LoadStoreOperators.cuh || (echo \"gpu/utils/LoadStoreOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MathOperators.cuh || (echo \"gpu/utils/MathOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MatrixMult-inl.cuh || (echo \"gpu/utils/MatrixMult-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MatrixMult.cuh || (echo \"gpu/utils/MatrixMult.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MergeNetworkBlock.cuh || (echo \"gpu/utils/MergeNetworkBlock.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MergeNetworkUtils.cuh || (echo \"gpu/utils/MergeNetworkUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MergeNetworkWarp.cuh || (echo \"gpu/utils/MergeNetworkWarp.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/NoTypeTensor.cuh || (echo \"gpu/utils/NoTypeTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Pair.cuh || (echo \"gpu/utils/Pair.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/PtxUtils.cuh || (echo \"gpu/utils/PtxUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/ReductionOperators.cuh || (echo \"gpu/utils/ReductionOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Reductions.cuh || (echo \"gpu/utils/Reductions.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Select.cuh || (echo \"gpu/utils/Select.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/StackDeviceMemory.h || (echo \"gpu/utils/StackDeviceMemory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/StaticUtils.h || (echo \"gpu/utils/StaticUtils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Tensor-inl.cuh || (echo \"gpu/utils/Tensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Tensor.cuh || (echo \"gpu/utils/Tensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/ThrustAllocator.cuh || (echo \"gpu/utils/ThrustAllocator.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Timer.h || (echo \"gpu/utils/Timer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Transpose.cuh || (echo \"gpu/utils/Transpose.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/WarpPackedBits.cuh || (echo \"gpu/utils/WarpPackedBits.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/WarpSelectKernel.cuh || (echo \"gpu/utils/WarpSelectKernel.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/WarpShuffles.cuh || (echo \"gpu/utils/WarpShuffles.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/blockselect/BlockSelectImpl.cuh || (echo \"gpu/utils/blockselect/BlockSelectImpl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/warpselect/WarpSelectImpl.cuh || (echo \"gpu/utils/warpselect/WarpSelectImpl.cuh not found\" && exit 1)"
     ]
    }
   },
   {
    "build": {
     "string": "py39cuda110h1234567_3_cuda"
    },
    "name": "faiss",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "cuda_compiler_stub",
      "swig",
      "cmake",
      "libgomp"
     ],
     "host": [
      "python",
      "pip",
      "numpy",
      "libfaiss =1.7.0=*_cuda",
      "libfaiss-avx2 =1.7.0=*_cuda",
      "libblas",
      "liblapack"
     ],
     "run": [
      "python",
      "libfaiss =1.7.0=*_cuda",
      "libfaiss-avx2 =1.7.0=*_cuda",
      "numpy"
     ],
     "run_constrained": [
      "faiss-proc * cuda"
     ]
    },
    "script": "build-pkg.sh",
    "test": {
     "commands": [
      "python -c \"from numpy.core._multiarray_umath import __cpu_features__; print(f'Testing version with AVX2-support - ' + str(__cpu_features__['AVX2']))\"",
      "pytest tests --log-file-level=INFO --log-file=log.txt",
      "cat log.txt && sleep 2",
      "python -c \"q = open('log.txt').readlines(); import sys; sys.exit(0 if 'Successfully loaded faiss with AVX2 support.' in [x[35:-1] for x in q] else 1)\"",
      "export NPY_DISABLE_CPU_FEATURES=AVX2",
      "python -c \"from numpy.core._multiarray_umath import __cpu_features__; print(f'Testing version with AVX2-support - ' + str(__cpu_features__['AVX2']))\"",
      "pytest tests --log-file-level=INFO --log-file=log.txt",
      "cat log.txt && sleep 2",
      "python -c \"q = open('log.txt').readlines(); import sys; sys.exit(0 if 'Successfully loaded faiss.' in [x[35:-1] for x in q] else 1)\""
     ],
     "imports": [
      "faiss"
     ],
     "requires": [
      "blas =*=mkl",
      "scipy",
      "pytest"
     ],
     "source_files": [
      "tests/"
     ]
    }
   },
   {
    "build": {
     "skip": true
    },
    "name": "faiss-cpu",
    "requirements": {
     "run": [
      "faiss =1.7.0=*_cpu"
     ]
    },
    "test": {
     "imports": [
      "faiss"
     ]
    }
   },
   {
    "build": null,
    "name": "faiss-gpu",
    "requirements": {
     "run": [
      "faiss =1.7.0=*_cuda"
     ]
    },
    "test": {
     "imports": [
      "faiss"
     ]
    }
   },
   {
    "build": {
     "string": "cpu"
    },
    "name": "faiss-proc",
    "test": {
     "commands": [
      "exit 0"
     ]
    },
    "version": "1.0.0"
   },
   {
    "build": {
     "run_exports": [
      "libfaiss{{ libext }}",
      "libfaiss_avx2 =*=*_cpu"
     ],
     "string": "h1234567_3_cpu"
    },
    "name": "libfaiss-avx2",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "cmake",
      "libgomp"
     ],
     "host": [
      "libblas",
      "liblapack"
     ],
     "run_constrained": [
      "faiss-proc * cpu"
     ]
    },
    "script": "build-lib-avx2.sh",
    "test": {
     "commands": [
      "test -f $PREFIX/lib/libfaiss_avx2.so",
      "test ! -f $PREFIX/lib/libfaiss_avx2.a",
      "test -f $PREFIX/include/faiss_avx2/AutoTune.h || (echo \"AutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/Clustering.h || (echo \"Clustering.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IVFlib.h || (echo \"IVFlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/Index.h || (echo \"Index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/Index2Layer.h || (echo \"Index2Layer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinary.h || (echo \"IndexBinary.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryFlat.h || (echo \"IndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryFromFloat.h || (echo \"IndexBinaryFromFloat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryHNSW.h || (echo \"IndexBinaryHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryHash.h || (echo \"IndexBinaryHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryIVF.h || (echo \"IndexBinaryIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexFlat.h || (echo \"IndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexHNSW.h || (echo \"IndexHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVF.h || (echo \"IndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFFlat.h || (echo \"IndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFPQ.h || (echo \"IndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFPQFastScan.h || (echo \"IndexIVFPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFPQR.h || (echo \"IndexIVFPQR.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFSpectralHash.h || (echo \"IndexIVFSpectralHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexLSH.h || (echo \"IndexLSH.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexLattice.h || (echo \"IndexLattice.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexPQ.h || (echo \"IndexPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexPQFastScan.h || (echo \"IndexPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexPreTransform.h || (echo \"IndexPreTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexRefine.h || (echo \"IndexRefine.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexReplicas.h || (echo \"IndexReplicas.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexScalarQuantizer.h || (echo \"IndexScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexShards.h || (echo \"IndexShards.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/MatrixStats.h || (echo \"MatrixStats.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/MetaIndexes.h || (echo \"MetaIndexes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/MetricType.h || (echo \"MetricType.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/VectorTransform.h || (echo \"VectorTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/clone_index.h || (echo \"clone_index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/index_factory.h || (echo \"index_factory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/index_io.h || (echo \"index_io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/AuxIndexStructures.h || (echo \"impl/AuxIndexStructures.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/FaissAssert.h || (echo \"impl/FaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/FaissException.h || (echo \"impl/FaissException.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/HNSW.h || (echo \"impl/HNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/PolysemousTraining.h || (echo \"impl/PolysemousTraining.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ProductQuantizer-inl.h || (echo \"impl/ProductQuantizer-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ProductQuantizer.h || (echo \"impl/ProductQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ResultHandler.h || (echo \"impl/ResultHandler.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ScalarQuantizer.h || (echo \"impl/ScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ThreadedIndex-inl.h || (echo \"impl/ThreadedIndex-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ThreadedIndex.h || (echo \"impl/ThreadedIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/io.h || (echo \"impl/io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/io_macros.h || (echo \"impl/io_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/lattice_Zn.h || (echo \"impl/lattice_Zn.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/platform_macros.h || (echo \"impl/platform_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/pq4_fast_scan.h || (echo \"impl/pq4_fast_scan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/simd_result_handlers.h || (echo \"impl/simd_result_handlers.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/BlockInvertedLists.h || (echo \"invlists/BlockInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/DirectMap.h || (echo \"invlists/DirectMap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/InvertedLists.h || (echo \"invlists/InvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/InvertedListsIOHook.h || (echo \"invlists/InvertedListsIOHook.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/AlignedTable.h || (echo \"utils/AlignedTable.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/Heap.h || (echo \"utils/Heap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/WorkerThread.h || (echo \"utils/WorkerThread.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/distances.h || (echo \"utils/distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/extra_distances.h || (echo \"utils/extra_distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/hamming-inl.h || (echo \"utils/hamming-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/hamming.h || (echo \"utils/hamming.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/ordered_key_value.h || (echo \"utils/ordered_key_value.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/partitioning.h || (echo \"utils/partitioning.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/quantize_lut.h || (echo \"utils/quantize_lut.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/random.h || (echo \"utils/random.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/simdlib.h || (echo \"utils/simdlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/simdlib_avx2.h || (echo \"utils/simdlib_avx2.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/simdlib_emulated.h || (echo \"utils/simdlib_emulated.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/utils.h || (echo \"utils/utils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/OnDiskInvertedLists.h || (echo \"invlists/OnDiskInvertedLists.h not found\" && exit 1)"
     ]
    }
   },
   {
    "build": {
     "run_exports": [
      "libfaiss{{ libext }}",
      "libfaiss =*=*_cpu"
     ],
     "string": "h1234567_3_cpu"
    },
    "name": "libfaiss",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "cmake",
      "libgomp"
     ],
     "host": [
      "libblas",
      "liblapack"
     ],
     "run_constrained": [
      "faiss-proc * cpu"
     ]
    },
    "script": "build-lib-generic.sh",
    "test": {
     "commands": [
      "test -f $PREFIX/lib/libfaiss.so",
      "test ! -f $PREFIX/lib/libfaiss.a",
      "test -f $PREFIX/include/faiss/AutoTune.h || (echo \"AutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/Clustering.h || (echo \"Clustering.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IVFlib.h || (echo \"IVFlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/Index.h || (echo \"Index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/Index2Layer.h || (echo \"Index2Layer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinary.h || (echo \"IndexBinary.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryFlat.h || (echo \"IndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryFromFloat.h || (echo \"IndexBinaryFromFloat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryHNSW.h || (echo \"IndexBinaryHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryHash.h || (echo \"IndexBinaryHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryIVF.h || (echo \"IndexBinaryIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexFlat.h || (echo \"IndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexHNSW.h || (echo \"IndexHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVF.h || (echo \"IndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFFlat.h || (echo \"IndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFPQ.h || (echo \"IndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFPQFastScan.h || (echo \"IndexIVFPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFPQR.h || (echo \"IndexIVFPQR.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFSpectralHash.h || (echo \"IndexIVFSpectralHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexLSH.h || (echo \"IndexLSH.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexLattice.h || (echo \"IndexLattice.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexPQ.h || (echo \"IndexPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexPQFastScan.h || (echo \"IndexPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexPreTransform.h || (echo \"IndexPreTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexRefine.h || (echo \"IndexRefine.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexReplicas.h || (echo \"IndexReplicas.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexScalarQuantizer.h || (echo \"IndexScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexShards.h || (echo \"IndexShards.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/MatrixStats.h || (echo \"MatrixStats.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/MetaIndexes.h || (echo \"MetaIndexes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/MetricType.h || (echo \"MetricType.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/VectorTransform.h || (echo \"VectorTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/clone_index.h || (echo \"clone_index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/index_factory.h || (echo \"index_factory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/index_io.h || (echo \"index_io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/AuxIndexStructures.h || (echo \"impl/AuxIndexStructures.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/FaissAssert.h || (echo \"impl/FaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/FaissException.h || (echo \"impl/FaissException.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/HNSW.h || (echo \"impl/HNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/PolysemousTraining.h || (echo \"impl/PolysemousTraining.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ProductQuantizer-inl.h || (echo \"impl/ProductQuantizer-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ProductQuantizer.h || (echo \"impl/ProductQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ResultHandler.h || (echo \"impl/ResultHandler.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ScalarQuantizer.h || (echo \"impl/ScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ThreadedIndex-inl.h || (echo \"impl/ThreadedIndex-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ThreadedIndex.h || (echo \"impl/ThreadedIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/io.h || (echo \"impl/io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/io_macros.h || (echo \"impl/io_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/lattice_Zn.h || (echo \"impl/lattice_Zn.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/platform_macros.h || (echo \"impl/platform_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/pq4_fast_scan.h || (echo \"impl/pq4_fast_scan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/simd_result_handlers.h || (echo \"impl/simd_result_handlers.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/BlockInvertedLists.h || (echo \"invlists/BlockInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/DirectMap.h || (echo \"invlists/DirectMap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/InvertedLists.h || (echo \"invlists/InvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/InvertedListsIOHook.h || (echo \"invlists/InvertedListsIOHook.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/AlignedTable.h || (echo \"utils/AlignedTable.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/Heap.h || (echo \"utils/Heap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/WorkerThread.h || (echo \"utils/WorkerThread.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/distances.h || (echo \"utils/distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/extra_distances.h || (echo \"utils/extra_distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/hamming-inl.h || (echo \"utils/hamming-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/hamming.h || (echo \"utils/hamming.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/ordered_key_value.h || (echo \"utils/ordered_key_value.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/partitioning.h || (echo \"utils/partitioning.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/quantize_lut.h || (echo \"utils/quantize_lut.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/random.h || (echo \"utils/random.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/simdlib.h || (echo \"utils/simdlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/simdlib_avx2.h || (echo \"utils/simdlib_avx2.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/simdlib_emulated.h || (echo \"utils/simdlib_emulated.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/utils.h || (echo \"utils/utils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/OnDiskInvertedLists.h || (echo \"invlists/OnDiskInvertedLists.h not found\" && exit 1)"
     ]
    }
   },
   {
    "build": {
     "string": "py39h1234567_3_cpu"
    },
    "name": "faiss",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "swig",
      "cmake",
      "libgomp"
     ],
     "host": [
      "python",
      "pip",
      "numpy",
      "libfaiss =1.7.0=*_cpu",
      "libfaiss-avx2 =1.7.0=*_cpu",
      "libblas",
      "liblapack"
     ],
     "run": [
      "python",
      "libfaiss =1.7.0=*_cpu",
      "libfaiss-avx2 =1.7.0=*_cpu",
      "numpy"
     ],
     "run_constrained": [
      "faiss-proc * cpu"
     ]
    },
    "script": "build-pkg.sh",
    "test": {
     "commands": [
      "python -c \"from numpy.core._multiarray_umath import __cpu_features__; print(f'Testing version with AVX2-support - ' + str(__cpu_features__['AVX2']))\"",
      "pytest tests --log-file-level=INFO --log-file=log.txt",
      "cat log.txt && sleep 2",
      "python -c \"q = open('log.txt').readlines(); import sys; sys.exit(0 if 'Successfully loaded faiss with AVX2 support.' in [x[35:-1] for x in q] else 1)\"",
      "export NPY_DISABLE_CPU_FEATURES=AVX2",
      "python -c \"from numpy.core._multiarray_umath import __cpu_features__; print(f'Testing version with AVX2-support - ' + str(__cpu_features__['AVX2']))\"",
      "pytest tests --log-file-level=INFO --log-file=log.txt",
      "cat log.txt && sleep 2",
      "python -c \"q = open('log.txt').readlines(); import sys; sys.exit(0 if 'Successfully loaded faiss.' in [x[35:-1] for x in q] else 1)\""
     ],
     "imports": [
      "faiss"
     ],
     "requires": [
      "blas =*=mkl",
      "scipy",
      "pytest"
     ],
     "source_files": [
      "tests/"
     ]
    }
   },
   {
    "build": null,
    "name": "faiss-cpu",
    "requirements": {
     "run": [
      "faiss =1.7.0=*_cpu"
     ]
    },
    "test": {
     "imports": [
      "faiss"
     ]
    }
   },
   {
    "build": {
     "skip": true
    },
    "name": "faiss-gpu",
    "requirements": {
     "run": [
      "faiss =1.7.0=*_cuda"
     ]
    },
    "test": {
     "imports": [
      "faiss"
     ]
    }
   },
   {
    "build": {
     "string": "cuda"
    },
    "name": "faiss-proc",
    "test": {
     "commands": [
      "exit 0"
     ]
    },
    "version": "1.0.0"
   },
   {
    "build": {
     "run_exports": [
      "libfaiss{{ libext }}",
      "libfaiss_avx2 =*=*_cuda"
     ],
     "string": "cuda102h1234567_3_cuda"
    },
    "name": "libfaiss-avx2",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "cuda_compiler_stub",
      "cmake",
      "libgomp"
     ],
     "host": [
      "libblas",
      "liblapack"
     ],
     "run_constrained": [
      "faiss-proc * cuda"
     ]
    },
    "script": "build-lib-avx2.sh",
    "test": {
     "commands": [
      "test -f $PREFIX/lib/libfaiss_avx2.so",
      "test ! -f $PREFIX/lib/libfaiss_avx2.a",
      "test -f $PREFIX/include/faiss_avx2/AutoTune.h || (echo \"AutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/Clustering.h || (echo \"Clustering.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IVFlib.h || (echo \"IVFlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/Index.h || (echo \"Index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/Index2Layer.h || (echo \"Index2Layer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinary.h || (echo \"IndexBinary.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryFlat.h || (echo \"IndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryFromFloat.h || (echo \"IndexBinaryFromFloat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryHNSW.h || (echo \"IndexBinaryHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryHash.h || (echo \"IndexBinaryHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryIVF.h || (echo \"IndexBinaryIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexFlat.h || (echo \"IndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexHNSW.h || (echo \"IndexHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVF.h || (echo \"IndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFFlat.h || (echo \"IndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFPQ.h || (echo \"IndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFPQFastScan.h || (echo \"IndexIVFPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFPQR.h || (echo \"IndexIVFPQR.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFSpectralHash.h || (echo \"IndexIVFSpectralHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexLSH.h || (echo \"IndexLSH.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexLattice.h || (echo \"IndexLattice.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexPQ.h || (echo \"IndexPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexPQFastScan.h || (echo \"IndexPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexPreTransform.h || (echo \"IndexPreTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexRefine.h || (echo \"IndexRefine.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexReplicas.h || (echo \"IndexReplicas.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexScalarQuantizer.h || (echo \"IndexScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexShards.h || (echo \"IndexShards.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/MatrixStats.h || (echo \"MatrixStats.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/MetaIndexes.h || (echo \"MetaIndexes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/MetricType.h || (echo \"MetricType.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/VectorTransform.h || (echo \"VectorTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/clone_index.h || (echo \"clone_index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/index_factory.h || (echo \"index_factory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/index_io.h || (echo \"index_io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/AuxIndexStructures.h || (echo \"impl/AuxIndexStructures.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/FaissAssert.h || (echo \"impl/FaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/FaissException.h || (echo \"impl/FaissException.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/HNSW.h || (echo \"impl/HNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/PolysemousTraining.h || (echo \"impl/PolysemousTraining.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ProductQuantizer-inl.h || (echo \"impl/ProductQuantizer-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ProductQuantizer.h || (echo \"impl/ProductQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ResultHandler.h || (echo \"impl/ResultHandler.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ScalarQuantizer.h || (echo \"impl/ScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ThreadedIndex-inl.h || (echo \"impl/ThreadedIndex-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ThreadedIndex.h || (echo \"impl/ThreadedIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/io.h || (echo \"impl/io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/io_macros.h || (echo \"impl/io_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/lattice_Zn.h || (echo \"impl/lattice_Zn.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/platform_macros.h || (echo \"impl/platform_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/pq4_fast_scan.h || (echo \"impl/pq4_fast_scan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/simd_result_handlers.h || (echo \"impl/simd_result_handlers.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/BlockInvertedLists.h || (echo \"invlists/BlockInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/DirectMap.h || (echo \"invlists/DirectMap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/InvertedLists.h || (echo \"invlists/InvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/InvertedListsIOHook.h || (echo \"invlists/InvertedListsIOHook.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/AlignedTable.h || (echo \"utils/AlignedTable.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/Heap.h || (echo \"utils/Heap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/WorkerThread.h || (echo \"utils/WorkerThread.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/distances.h || (echo \"utils/distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/extra_distances.h || (echo \"utils/extra_distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/hamming-inl.h || (echo \"utils/hamming-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/hamming.h || (echo \"utils/hamming.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/ordered_key_value.h || (echo \"utils/ordered_key_value.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/partitioning.h || (echo \"utils/partitioning.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/quantize_lut.h || (echo \"utils/quantize_lut.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/random.h || (echo \"utils/random.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/simdlib.h || (echo \"utils/simdlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/simdlib_avx2.h || (echo \"utils/simdlib_avx2.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/simdlib_emulated.h || (echo \"utils/simdlib_emulated.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/utils.h || (echo \"utils/utils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/OnDiskInvertedLists.h || (echo \"invlists/OnDiskInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuAutoTune.h || (echo \"gpu/GpuAutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuCloner.h || (echo \"gpu/GpuCloner.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuClonerOptions.h || (echo \"gpu/GpuClonerOptions.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuDistance.h || (echo \"gpu/GpuDistance.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuFaissAssert.h || (echo \"gpu/GpuFaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndex.h || (echo \"gpu/GpuIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexBinaryFlat.h || (echo \"gpu/GpuIndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexFlat.h || (echo \"gpu/GpuIndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexIVF.h || (echo \"gpu/GpuIndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexIVFFlat.h || (echo \"gpu/GpuIndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexIVFPQ.h || (echo \"gpu/GpuIndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexIVFScalarQuantizer.h || (echo \"gpu/GpuIndexIVFScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndicesOptions.h || (echo \"gpu/GpuIndicesOptions.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuResources.h || (echo \"gpu/GpuResources.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/StandardGpuResources.h || (echo \"gpu/StandardGpuResources.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/BinaryDistance.cuh || (echo \"gpu/impl/BinaryDistance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/BinaryFlatIndex.cuh || (echo \"gpu/impl/BinaryFlatIndex.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/BroadcastSum.cuh || (echo \"gpu/impl/BroadcastSum.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/Distance.cuh || (echo \"gpu/impl/Distance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/DistanceUtils.cuh || (echo \"gpu/impl/DistanceUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/FlatIndex.cuh || (echo \"gpu/impl/FlatIndex.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/GeneralDistance.cuh || (echo \"gpu/impl/GeneralDistance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/GpuScalarQuantizer.cuh || (echo \"gpu/impl/GpuScalarQuantizer.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFAppend.cuh || (echo \"gpu/impl/IVFAppend.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFBase.cuh || (echo \"gpu/impl/IVFBase.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFFlat.cuh || (echo \"gpu/impl/IVFFlat.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFFlatScan.cuh || (echo \"gpu/impl/IVFFlatScan.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFInterleaved.cuh || (echo \"gpu/impl/IVFInterleaved.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFPQ.cuh || (echo \"gpu/impl/IVFPQ.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFUtils.cuh || (echo \"gpu/impl/IVFUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/InterleavedCodes.h || (echo \"gpu/impl/InterleavedCodes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/L2Norm.cuh || (echo \"gpu/impl/L2Norm.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/L2Select.cuh || (echo \"gpu/impl/L2Select.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQCodeDistances-inl.cuh || (echo \"gpu/impl/PQCodeDistances-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQCodeDistances.cuh || (echo \"gpu/impl/PQCodeDistances.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQCodeLoad.cuh || (echo \"gpu/impl/PQCodeLoad.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQScanMultiPassNoPrecomputed-inl.cuh || (echo \"gpu/impl/PQScanMultiPassNoPrecomputed-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQScanMultiPassNoPrecomputed.cuh || (echo \"gpu/impl/PQScanMultiPassNoPrecomputed.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQScanMultiPassPrecomputed.cuh || (echo \"gpu/impl/PQScanMultiPassPrecomputed.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/RemapIndices.h || (echo \"gpu/impl/RemapIndices.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/VectorResidual.cuh || (echo \"gpu/impl/VectorResidual.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/BlockSelectKernel.cuh || (echo \"gpu/utils/BlockSelectKernel.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Comparators.cuh || (echo \"gpu/utils/Comparators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/ConversionOperators.cuh || (echo \"gpu/utils/ConversionOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/CopyUtils.cuh || (echo \"gpu/utils/CopyUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceDefs.cuh || (echo \"gpu/utils/DeviceDefs.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceTensor-inl.cuh || (echo \"gpu/utils/DeviceTensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceTensor.cuh || (echo \"gpu/utils/DeviceTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceUtils.h || (echo \"gpu/utils/DeviceUtils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceVector.cuh || (echo \"gpu/utils/DeviceVector.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Float16.cuh || (echo \"gpu/utils/Float16.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/HostTensor-inl.cuh || (echo \"gpu/utils/HostTensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/HostTensor.cuh || (echo \"gpu/utils/HostTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Limits.cuh || (echo \"gpu/utils/Limits.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/LoadStoreOperators.cuh || (echo \"gpu/utils/LoadStoreOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MathOperators.cuh || (echo \"gpu/utils/MathOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MatrixMult-inl.cuh || (echo \"gpu/utils/MatrixMult-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MatrixMult.cuh || (echo \"gpu/utils/MatrixMult.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MergeNetworkBlock.cuh || (echo \"gpu/utils/MergeNetworkBlock.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MergeNetworkUtils.cuh || (echo \"gpu/utils/MergeNetworkUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MergeNetworkWarp.cuh || (echo \"gpu/utils/MergeNetworkWarp.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/NoTypeTensor.cuh || (echo \"gpu/utils/NoTypeTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Pair.cuh || (echo \"gpu/utils/Pair.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/PtxUtils.cuh || (echo \"gpu/utils/PtxUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/ReductionOperators.cuh || (echo \"gpu/utils/ReductionOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Reductions.cuh || (echo \"gpu/utils/Reductions.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Select.cuh || (echo \"gpu/utils/Select.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/StackDeviceMemory.h || (echo \"gpu/utils/StackDeviceMemory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/StaticUtils.h || (echo \"gpu/utils/StaticUtils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Tensor-inl.cuh || (echo \"gpu/utils/Tensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Tensor.cuh || (echo \"gpu/utils/Tensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/ThrustAllocator.cuh || (echo \"gpu/utils/ThrustAllocator.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Timer.h || (echo \"gpu/utils/Timer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Transpose.cuh || (echo \"gpu/utils/Transpose.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/WarpPackedBits.cuh || (echo \"gpu/utils/WarpPackedBits.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/WarpSelectKernel.cuh || (echo \"gpu/utils/WarpSelectKernel.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/WarpShuffles.cuh || (echo \"gpu/utils/WarpShuffles.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/blockselect/BlockSelectImpl.cuh || (echo \"gpu/utils/blockselect/BlockSelectImpl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/warpselect/WarpSelectImpl.cuh || (echo \"gpu/utils/warpselect/WarpSelectImpl.cuh not found\" && exit 1)"
     ]
    }
   },
   {
    "build": {
     "run_exports": [
      "libfaiss{{ libext }}",
      "libfaiss =*=*_cuda"
     ],
     "string": "cuda102h1234567_3_cuda"
    },
    "name": "libfaiss",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "cuda_compiler_stub",
      "cmake",
      "libgomp"
     ],
     "host": [
      "libblas",
      "liblapack"
     ],
     "run_constrained": [
      "faiss-proc * cuda"
     ]
    },
    "script": "build-lib-generic.sh",
    "test": {
     "commands": [
      "test -f $PREFIX/lib/libfaiss.so",
      "test ! -f $PREFIX/lib/libfaiss.a",
      "test -f $PREFIX/include/faiss/AutoTune.h || (echo \"AutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/Clustering.h || (echo \"Clustering.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IVFlib.h || (echo \"IVFlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/Index.h || (echo \"Index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/Index2Layer.h || (echo \"Index2Layer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinary.h || (echo \"IndexBinary.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryFlat.h || (echo \"IndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryFromFloat.h || (echo \"IndexBinaryFromFloat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryHNSW.h || (echo \"IndexBinaryHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryHash.h || (echo \"IndexBinaryHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryIVF.h || (echo \"IndexBinaryIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexFlat.h || (echo \"IndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexHNSW.h || (echo \"IndexHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVF.h || (echo \"IndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFFlat.h || (echo \"IndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFPQ.h || (echo \"IndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFPQFastScan.h || (echo \"IndexIVFPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFPQR.h || (echo \"IndexIVFPQR.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFSpectralHash.h || (echo \"IndexIVFSpectralHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexLSH.h || (echo \"IndexLSH.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexLattice.h || (echo \"IndexLattice.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexPQ.h || (echo \"IndexPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexPQFastScan.h || (echo \"IndexPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexPreTransform.h || (echo \"IndexPreTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexRefine.h || (echo \"IndexRefine.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexReplicas.h || (echo \"IndexReplicas.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexScalarQuantizer.h || (echo \"IndexScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexShards.h || (echo \"IndexShards.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/MatrixStats.h || (echo \"MatrixStats.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/MetaIndexes.h || (echo \"MetaIndexes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/MetricType.h || (echo \"MetricType.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/VectorTransform.h || (echo \"VectorTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/clone_index.h || (echo \"clone_index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/index_factory.h || (echo \"index_factory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/index_io.h || (echo \"index_io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/AuxIndexStructures.h || (echo \"impl/AuxIndexStructures.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/FaissAssert.h || (echo \"impl/FaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/FaissException.h || (echo \"impl/FaissException.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/HNSW.h || (echo \"impl/HNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/PolysemousTraining.h || (echo \"impl/PolysemousTraining.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ProductQuantizer-inl.h || (echo \"impl/ProductQuantizer-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ProductQuantizer.h || (echo \"impl/ProductQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ResultHandler.h || (echo \"impl/ResultHandler.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ScalarQuantizer.h || (echo \"impl/ScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ThreadedIndex-inl.h || (echo \"impl/ThreadedIndex-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ThreadedIndex.h || (echo \"impl/ThreadedIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/io.h || (echo \"impl/io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/io_macros.h || (echo \"impl/io_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/lattice_Zn.h || (echo \"impl/lattice_Zn.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/platform_macros.h || (echo \"impl/platform_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/pq4_fast_scan.h || (echo \"impl/pq4_fast_scan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/simd_result_handlers.h || (echo \"impl/simd_result_handlers.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/BlockInvertedLists.h || (echo \"invlists/BlockInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/DirectMap.h || (echo \"invlists/DirectMap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/InvertedLists.h || (echo \"invlists/InvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/InvertedListsIOHook.h || (echo \"invlists/InvertedListsIOHook.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/AlignedTable.h || (echo \"utils/AlignedTable.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/Heap.h || (echo \"utils/Heap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/WorkerThread.h || (echo \"utils/WorkerThread.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/distances.h || (echo \"utils/distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/extra_distances.h || (echo \"utils/extra_distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/hamming-inl.h || (echo \"utils/hamming-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/hamming.h || (echo \"utils/hamming.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/ordered_key_value.h || (echo \"utils/ordered_key_value.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/partitioning.h || (echo \"utils/partitioning.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/quantize_lut.h || (echo \"utils/quantize_lut.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/random.h || (echo \"utils/random.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/simdlib.h || (echo \"utils/simdlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/simdlib_avx2.h || (echo \"utils/simdlib_avx2.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/simdlib_emulated.h || (echo \"utils/simdlib_emulated.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/utils.h || (echo \"utils/utils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/OnDiskInvertedLists.h || (echo \"invlists/OnDiskInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuAutoTune.h || (echo \"gpu/GpuAutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuCloner.h || (echo \"gpu/GpuCloner.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuClonerOptions.h || (echo \"gpu/GpuClonerOptions.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuDistance.h || (echo \"gpu/GpuDistance.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuFaissAssert.h || (echo \"gpu/GpuFaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndex.h || (echo \"gpu/GpuIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexBinaryFlat.h || (echo \"gpu/GpuIndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexFlat.h || (echo \"gpu/GpuIndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexIVF.h || (echo \"gpu/GpuIndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexIVFFlat.h || (echo \"gpu/GpuIndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexIVFPQ.h || (echo \"gpu/GpuIndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexIVFScalarQuantizer.h || (echo \"gpu/GpuIndexIVFScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndicesOptions.h || (echo \"gpu/GpuIndicesOptions.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuResources.h || (echo \"gpu/GpuResources.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/StandardGpuResources.h || (echo \"gpu/StandardGpuResources.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/BinaryDistance.cuh || (echo \"gpu/impl/BinaryDistance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/BinaryFlatIndex.cuh || (echo \"gpu/impl/BinaryFlatIndex.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/BroadcastSum.cuh || (echo \"gpu/impl/BroadcastSum.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/Distance.cuh || (echo \"gpu/impl/Distance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/DistanceUtils.cuh || (echo \"gpu/impl/DistanceUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/FlatIndex.cuh || (echo \"gpu/impl/FlatIndex.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/GeneralDistance.cuh || (echo \"gpu/impl/GeneralDistance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/GpuScalarQuantizer.cuh || (echo \"gpu/impl/GpuScalarQuantizer.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFAppend.cuh || (echo \"gpu/impl/IVFAppend.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFBase.cuh || (echo \"gpu/impl/IVFBase.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFFlat.cuh || (echo \"gpu/impl/IVFFlat.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFFlatScan.cuh || (echo \"gpu/impl/IVFFlatScan.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFInterleaved.cuh || (echo \"gpu/impl/IVFInterleaved.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFPQ.cuh || (echo \"gpu/impl/IVFPQ.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFUtils.cuh || (echo \"gpu/impl/IVFUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/InterleavedCodes.h || (echo \"gpu/impl/InterleavedCodes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/L2Norm.cuh || (echo \"gpu/impl/L2Norm.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/L2Select.cuh || (echo \"gpu/impl/L2Select.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQCodeDistances-inl.cuh || (echo \"gpu/impl/PQCodeDistances-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQCodeDistances.cuh || (echo \"gpu/impl/PQCodeDistances.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQCodeLoad.cuh || (echo \"gpu/impl/PQCodeLoad.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQScanMultiPassNoPrecomputed-inl.cuh || (echo \"gpu/impl/PQScanMultiPassNoPrecomputed-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQScanMultiPassNoPrecomputed.cuh || (echo \"gpu/impl/PQScanMultiPassNoPrecomputed.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQScanMultiPassPrecomputed.cuh || (echo \"gpu/impl/PQScanMultiPassPrecomputed.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/RemapIndices.h || (echo \"gpu/impl/RemapIndices.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/VectorResidual.cuh || (echo \"gpu/impl/VectorResidual.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/BlockSelectKernel.cuh || (echo \"gpu/utils/BlockSelectKernel.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Comparators.cuh || (echo \"gpu/utils/Comparators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/ConversionOperators.cuh || (echo \"gpu/utils/ConversionOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/CopyUtils.cuh || (echo \"gpu/utils/CopyUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceDefs.cuh || (echo \"gpu/utils/DeviceDefs.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceTensor-inl.cuh || (echo \"gpu/utils/DeviceTensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceTensor.cuh || (echo \"gpu/utils/DeviceTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceUtils.h || (echo \"gpu/utils/DeviceUtils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceVector.cuh || (echo \"gpu/utils/DeviceVector.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Float16.cuh || (echo \"gpu/utils/Float16.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/HostTensor-inl.cuh || (echo \"gpu/utils/HostTensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/HostTensor.cuh || (echo \"gpu/utils/HostTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Limits.cuh || (echo \"gpu/utils/Limits.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/LoadStoreOperators.cuh || (echo \"gpu/utils/LoadStoreOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MathOperators.cuh || (echo \"gpu/utils/MathOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MatrixMult-inl.cuh || (echo \"gpu/utils/MatrixMult-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MatrixMult.cuh || (echo \"gpu/utils/MatrixMult.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MergeNetworkBlock.cuh || (echo \"gpu/utils/MergeNetworkBlock.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MergeNetworkUtils.cuh || (echo \"gpu/utils/MergeNetworkUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MergeNetworkWarp.cuh || (echo \"gpu/utils/MergeNetworkWarp.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/NoTypeTensor.cuh || (echo \"gpu/utils/NoTypeTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Pair.cuh || (echo \"gpu/utils/Pair.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/PtxUtils.cuh || (echo \"gpu/utils/PtxUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/ReductionOperators.cuh || (echo \"gpu/utils/ReductionOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Reductions.cuh || (echo \"gpu/utils/Reductions.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Select.cuh || (echo \"gpu/utils/Select.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/StackDeviceMemory.h || (echo \"gpu/utils/StackDeviceMemory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/StaticUtils.h || (echo \"gpu/utils/StaticUtils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Tensor-inl.cuh || (echo \"gpu/utils/Tensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Tensor.cuh || (echo \"gpu/utils/Tensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/ThrustAllocator.cuh || (echo \"gpu/utils/ThrustAllocator.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Timer.h || (echo \"gpu/utils/Timer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Transpose.cuh || (echo \"gpu/utils/Transpose.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/WarpPackedBits.cuh || (echo \"gpu/utils/WarpPackedBits.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/WarpSelectKernel.cuh || (echo \"gpu/utils/WarpSelectKernel.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/WarpShuffles.cuh || (echo \"gpu/utils/WarpShuffles.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/blockselect/BlockSelectImpl.cuh || (echo \"gpu/utils/blockselect/BlockSelectImpl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/warpselect/WarpSelectImpl.cuh || (echo \"gpu/utils/warpselect/WarpSelectImpl.cuh not found\" && exit 1)"
     ]
    }
   },
   {
    "build": {
     "string": "py39cuda102h1234567_3_cuda"
    },
    "name": "faiss",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "cuda_compiler_stub",
      "swig",
      "cmake",
      "libgomp"
     ],
     "host": [
      "python",
      "pip",
      "numpy",
      "libfaiss =1.7.0=*_cuda",
      "libfaiss-avx2 =1.7.0=*_cuda",
      "libblas",
      "liblapack"
     ],
     "run": [
      "python",
      "libfaiss =1.7.0=*_cuda",
      "libfaiss-avx2 =1.7.0=*_cuda",
      "numpy"
     ],
     "run_constrained": [
      "faiss-proc * cuda"
     ]
    },
    "script": "build-pkg.sh",
    "test": {
     "commands": [
      "python -c \"from numpy.core._multiarray_umath import __cpu_features__; print(f'Testing version with AVX2-support - ' + str(__cpu_features__['AVX2']))\"",
      "pytest tests --log-file-level=INFO --log-file=log.txt",
      "cat log.txt && sleep 2",
      "python -c \"q = open('log.txt').readlines(); import sys; sys.exit(0 if 'Successfully loaded faiss with AVX2 support.' in [x[35:-1] for x in q] else 1)\"",
      "export NPY_DISABLE_CPU_FEATURES=AVX2",
      "python -c \"from numpy.core._multiarray_umath import __cpu_features__; print(f'Testing version with AVX2-support - ' + str(__cpu_features__['AVX2']))\"",
      "pytest tests --log-file-level=INFO --log-file=log.txt",
      "cat log.txt && sleep 2",
      "python -c \"q = open('log.txt').readlines(); import sys; sys.exit(0 if 'Successfully loaded faiss.' in [x[35:-1] for x in q] else 1)\""
     ],
     "imports": [
      "faiss"
     ],
     "requires": [
      "blas =*=mkl",
      "scipy",
      "pytest"
     ],
     "source_files": [
      "tests/"
     ]
    }
   },
   {
    "build": {
     "skip": true
    },
    "name": "faiss-cpu",
    "requirements": {
     "run": [
      "faiss =1.7.0=*_cpu"
     ]
    },
    "test": {
     "imports": [
      "faiss"
     ]
    }
   },
   {
    "build": null,
    "name": "faiss-gpu",
    "requirements": {
     "run": [
      "faiss =1.7.0=*_cuda"
     ]
    },
    "test": {
     "imports": [
      "faiss"
     ]
    }
   },
   {
    "build": {
     "string": "cuda"
    },
    "name": "faiss-proc",
    "test": {
     "commands": [
      "exit 0"
     ]
    },
    "version": "1.0.0"
   },
   {
    "build": {
     "run_exports": [
      "libfaiss{{ libext }}",
      "libfaiss_avx2 =*=*_cuda"
     ],
     "string": "cuda112h1234567_3_cuda"
    },
    "name": "libfaiss-avx2",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "cuda_compiler_stub",
      "cmake",
      "libgomp"
     ],
     "host": [
      "libblas",
      "liblapack"
     ],
     "run_constrained": [
      "faiss-proc * cuda"
     ]
    },
    "script": "build-lib-avx2.sh",
    "test": {
     "commands": [
      "test -f $PREFIX/lib/libfaiss_avx2.so",
      "test ! -f $PREFIX/lib/libfaiss_avx2.a",
      "test -f $PREFIX/include/faiss_avx2/AutoTune.h || (echo \"AutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/Clustering.h || (echo \"Clustering.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IVFlib.h || (echo \"IVFlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/Index.h || (echo \"Index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/Index2Layer.h || (echo \"Index2Layer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinary.h || (echo \"IndexBinary.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryFlat.h || (echo \"IndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryFromFloat.h || (echo \"IndexBinaryFromFloat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryHNSW.h || (echo \"IndexBinaryHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryHash.h || (echo \"IndexBinaryHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryIVF.h || (echo \"IndexBinaryIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexFlat.h || (echo \"IndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexHNSW.h || (echo \"IndexHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVF.h || (echo \"IndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFFlat.h || (echo \"IndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFPQ.h || (echo \"IndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFPQFastScan.h || (echo \"IndexIVFPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFPQR.h || (echo \"IndexIVFPQR.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFSpectralHash.h || (echo \"IndexIVFSpectralHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexLSH.h || (echo \"IndexLSH.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexLattice.h || (echo \"IndexLattice.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexPQ.h || (echo \"IndexPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexPQFastScan.h || (echo \"IndexPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexPreTransform.h || (echo \"IndexPreTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexRefine.h || (echo \"IndexRefine.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexReplicas.h || (echo \"IndexReplicas.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexScalarQuantizer.h || (echo \"IndexScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexShards.h || (echo \"IndexShards.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/MatrixStats.h || (echo \"MatrixStats.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/MetaIndexes.h || (echo \"MetaIndexes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/MetricType.h || (echo \"MetricType.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/VectorTransform.h || (echo \"VectorTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/clone_index.h || (echo \"clone_index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/index_factory.h || (echo \"index_factory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/index_io.h || (echo \"index_io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/AuxIndexStructures.h || (echo \"impl/AuxIndexStructures.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/FaissAssert.h || (echo \"impl/FaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/FaissException.h || (echo \"impl/FaissException.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/HNSW.h || (echo \"impl/HNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/PolysemousTraining.h || (echo \"impl/PolysemousTraining.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ProductQuantizer-inl.h || (echo \"impl/ProductQuantizer-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ProductQuantizer.h || (echo \"impl/ProductQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ResultHandler.h || (echo \"impl/ResultHandler.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ScalarQuantizer.h || (echo \"impl/ScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ThreadedIndex-inl.h || (echo \"impl/ThreadedIndex-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ThreadedIndex.h || (echo \"impl/ThreadedIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/io.h || (echo \"impl/io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/io_macros.h || (echo \"impl/io_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/lattice_Zn.h || (echo \"impl/lattice_Zn.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/platform_macros.h || (echo \"impl/platform_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/pq4_fast_scan.h || (echo \"impl/pq4_fast_scan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/simd_result_handlers.h || (echo \"impl/simd_result_handlers.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/BlockInvertedLists.h || (echo \"invlists/BlockInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/DirectMap.h || (echo \"invlists/DirectMap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/InvertedLists.h || (echo \"invlists/InvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/InvertedListsIOHook.h || (echo \"invlists/InvertedListsIOHook.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/AlignedTable.h || (echo \"utils/AlignedTable.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/Heap.h || (echo \"utils/Heap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/WorkerThread.h || (echo \"utils/WorkerThread.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/distances.h || (echo \"utils/distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/extra_distances.h || (echo \"utils/extra_distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/hamming-inl.h || (echo \"utils/hamming-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/hamming.h || (echo \"utils/hamming.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/ordered_key_value.h || (echo \"utils/ordered_key_value.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/partitioning.h || (echo \"utils/partitioning.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/quantize_lut.h || (echo \"utils/quantize_lut.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/random.h || (echo \"utils/random.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/simdlib.h || (echo \"utils/simdlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/simdlib_avx2.h || (echo \"utils/simdlib_avx2.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/simdlib_emulated.h || (echo \"utils/simdlib_emulated.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/utils.h || (echo \"utils/utils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/OnDiskInvertedLists.h || (echo \"invlists/OnDiskInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuAutoTune.h || (echo \"gpu/GpuAutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuCloner.h || (echo \"gpu/GpuCloner.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuClonerOptions.h || (echo \"gpu/GpuClonerOptions.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuDistance.h || (echo \"gpu/GpuDistance.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuFaissAssert.h || (echo \"gpu/GpuFaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndex.h || (echo \"gpu/GpuIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexBinaryFlat.h || (echo \"gpu/GpuIndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexFlat.h || (echo \"gpu/GpuIndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexIVF.h || (echo \"gpu/GpuIndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexIVFFlat.h || (echo \"gpu/GpuIndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexIVFPQ.h || (echo \"gpu/GpuIndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexIVFScalarQuantizer.h || (echo \"gpu/GpuIndexIVFScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndicesOptions.h || (echo \"gpu/GpuIndicesOptions.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuResources.h || (echo \"gpu/GpuResources.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/StandardGpuResources.h || (echo \"gpu/StandardGpuResources.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/BinaryDistance.cuh || (echo \"gpu/impl/BinaryDistance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/BinaryFlatIndex.cuh || (echo \"gpu/impl/BinaryFlatIndex.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/BroadcastSum.cuh || (echo \"gpu/impl/BroadcastSum.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/Distance.cuh || (echo \"gpu/impl/Distance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/DistanceUtils.cuh || (echo \"gpu/impl/DistanceUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/FlatIndex.cuh || (echo \"gpu/impl/FlatIndex.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/GeneralDistance.cuh || (echo \"gpu/impl/GeneralDistance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/GpuScalarQuantizer.cuh || (echo \"gpu/impl/GpuScalarQuantizer.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFAppend.cuh || (echo \"gpu/impl/IVFAppend.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFBase.cuh || (echo \"gpu/impl/IVFBase.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFFlat.cuh || (echo \"gpu/impl/IVFFlat.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFFlatScan.cuh || (echo \"gpu/impl/IVFFlatScan.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFInterleaved.cuh || (echo \"gpu/impl/IVFInterleaved.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFPQ.cuh || (echo \"gpu/impl/IVFPQ.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFUtils.cuh || (echo \"gpu/impl/IVFUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/InterleavedCodes.h || (echo \"gpu/impl/InterleavedCodes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/L2Norm.cuh || (echo \"gpu/impl/L2Norm.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/L2Select.cuh || (echo \"gpu/impl/L2Select.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQCodeDistances-inl.cuh || (echo \"gpu/impl/PQCodeDistances-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQCodeDistances.cuh || (echo \"gpu/impl/PQCodeDistances.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQCodeLoad.cuh || (echo \"gpu/impl/PQCodeLoad.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQScanMultiPassNoPrecomputed-inl.cuh || (echo \"gpu/impl/PQScanMultiPassNoPrecomputed-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQScanMultiPassNoPrecomputed.cuh || (echo \"gpu/impl/PQScanMultiPassNoPrecomputed.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQScanMultiPassPrecomputed.cuh || (echo \"gpu/impl/PQScanMultiPassPrecomputed.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/RemapIndices.h || (echo \"gpu/impl/RemapIndices.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/VectorResidual.cuh || (echo \"gpu/impl/VectorResidual.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/BlockSelectKernel.cuh || (echo \"gpu/utils/BlockSelectKernel.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Comparators.cuh || (echo \"gpu/utils/Comparators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/ConversionOperators.cuh || (echo \"gpu/utils/ConversionOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/CopyUtils.cuh || (echo \"gpu/utils/CopyUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceDefs.cuh || (echo \"gpu/utils/DeviceDefs.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceTensor-inl.cuh || (echo \"gpu/utils/DeviceTensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceTensor.cuh || (echo \"gpu/utils/DeviceTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceUtils.h || (echo \"gpu/utils/DeviceUtils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceVector.cuh || (echo \"gpu/utils/DeviceVector.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Float16.cuh || (echo \"gpu/utils/Float16.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/HostTensor-inl.cuh || (echo \"gpu/utils/HostTensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/HostTensor.cuh || (echo \"gpu/utils/HostTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Limits.cuh || (echo \"gpu/utils/Limits.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/LoadStoreOperators.cuh || (echo \"gpu/utils/LoadStoreOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MathOperators.cuh || (echo \"gpu/utils/MathOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MatrixMult-inl.cuh || (echo \"gpu/utils/MatrixMult-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MatrixMult.cuh || (echo \"gpu/utils/MatrixMult.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MergeNetworkBlock.cuh || (echo \"gpu/utils/MergeNetworkBlock.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MergeNetworkUtils.cuh || (echo \"gpu/utils/MergeNetworkUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MergeNetworkWarp.cuh || (echo \"gpu/utils/MergeNetworkWarp.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/NoTypeTensor.cuh || (echo \"gpu/utils/NoTypeTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Pair.cuh || (echo \"gpu/utils/Pair.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/PtxUtils.cuh || (echo \"gpu/utils/PtxUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/ReductionOperators.cuh || (echo \"gpu/utils/ReductionOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Reductions.cuh || (echo \"gpu/utils/Reductions.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Select.cuh || (echo \"gpu/utils/Select.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/StackDeviceMemory.h || (echo \"gpu/utils/StackDeviceMemory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/StaticUtils.h || (echo \"gpu/utils/StaticUtils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Tensor-inl.cuh || (echo \"gpu/utils/Tensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Tensor.cuh || (echo \"gpu/utils/Tensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/ThrustAllocator.cuh || (echo \"gpu/utils/ThrustAllocator.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Timer.h || (echo \"gpu/utils/Timer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Transpose.cuh || (echo \"gpu/utils/Transpose.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/WarpPackedBits.cuh || (echo \"gpu/utils/WarpPackedBits.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/WarpSelectKernel.cuh || (echo \"gpu/utils/WarpSelectKernel.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/WarpShuffles.cuh || (echo \"gpu/utils/WarpShuffles.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/blockselect/BlockSelectImpl.cuh || (echo \"gpu/utils/blockselect/BlockSelectImpl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/warpselect/WarpSelectImpl.cuh || (echo \"gpu/utils/warpselect/WarpSelectImpl.cuh not found\" && exit 1)"
     ]
    }
   },
   {
    "build": {
     "run_exports": [
      "libfaiss{{ libext }}",
      "libfaiss =*=*_cuda"
     ],
     "string": "cuda112h1234567_3_cuda"
    },
    "name": "libfaiss",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "cuda_compiler_stub",
      "cmake",
      "libgomp"
     ],
     "host": [
      "libblas",
      "liblapack"
     ],
     "run_constrained": [
      "faiss-proc * cuda"
     ]
    },
    "script": "build-lib-generic.sh",
    "test": {
     "commands": [
      "test -f $PREFIX/lib/libfaiss.so",
      "test ! -f $PREFIX/lib/libfaiss.a",
      "test -f $PREFIX/include/faiss/AutoTune.h || (echo \"AutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/Clustering.h || (echo \"Clustering.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IVFlib.h || (echo \"IVFlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/Index.h || (echo \"Index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/Index2Layer.h || (echo \"Index2Layer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinary.h || (echo \"IndexBinary.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryFlat.h || (echo \"IndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryFromFloat.h || (echo \"IndexBinaryFromFloat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryHNSW.h || (echo \"IndexBinaryHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryHash.h || (echo \"IndexBinaryHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryIVF.h || (echo \"IndexBinaryIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexFlat.h || (echo \"IndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexHNSW.h || (echo \"IndexHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVF.h || (echo \"IndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFFlat.h || (echo \"IndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFPQ.h || (echo \"IndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFPQFastScan.h || (echo \"IndexIVFPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFPQR.h || (echo \"IndexIVFPQR.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFSpectralHash.h || (echo \"IndexIVFSpectralHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexLSH.h || (echo \"IndexLSH.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexLattice.h || (echo \"IndexLattice.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexPQ.h || (echo \"IndexPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexPQFastScan.h || (echo \"IndexPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexPreTransform.h || (echo \"IndexPreTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexRefine.h || (echo \"IndexRefine.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexReplicas.h || (echo \"IndexReplicas.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexScalarQuantizer.h || (echo \"IndexScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexShards.h || (echo \"IndexShards.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/MatrixStats.h || (echo \"MatrixStats.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/MetaIndexes.h || (echo \"MetaIndexes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/MetricType.h || (echo \"MetricType.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/VectorTransform.h || (echo \"VectorTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/clone_index.h || (echo \"clone_index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/index_factory.h || (echo \"index_factory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/index_io.h || (echo \"index_io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/AuxIndexStructures.h || (echo \"impl/AuxIndexStructures.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/FaissAssert.h || (echo \"impl/FaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/FaissException.h || (echo \"impl/FaissException.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/HNSW.h || (echo \"impl/HNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/PolysemousTraining.h || (echo \"impl/PolysemousTraining.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ProductQuantizer-inl.h || (echo \"impl/ProductQuantizer-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ProductQuantizer.h || (echo \"impl/ProductQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ResultHandler.h || (echo \"impl/ResultHandler.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ScalarQuantizer.h || (echo \"impl/ScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ThreadedIndex-inl.h || (echo \"impl/ThreadedIndex-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ThreadedIndex.h || (echo \"impl/ThreadedIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/io.h || (echo \"impl/io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/io_macros.h || (echo \"impl/io_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/lattice_Zn.h || (echo \"impl/lattice_Zn.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/platform_macros.h || (echo \"impl/platform_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/pq4_fast_scan.h || (echo \"impl/pq4_fast_scan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/simd_result_handlers.h || (echo \"impl/simd_result_handlers.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/BlockInvertedLists.h || (echo \"invlists/BlockInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/DirectMap.h || (echo \"invlists/DirectMap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/InvertedLists.h || (echo \"invlists/InvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/InvertedListsIOHook.h || (echo \"invlists/InvertedListsIOHook.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/AlignedTable.h || (echo \"utils/AlignedTable.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/Heap.h || (echo \"utils/Heap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/WorkerThread.h || (echo \"utils/WorkerThread.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/distances.h || (echo \"utils/distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/extra_distances.h || (echo \"utils/extra_distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/hamming-inl.h || (echo \"utils/hamming-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/hamming.h || (echo \"utils/hamming.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/ordered_key_value.h || (echo \"utils/ordered_key_value.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/partitioning.h || (echo \"utils/partitioning.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/quantize_lut.h || (echo \"utils/quantize_lut.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/random.h || (echo \"utils/random.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/simdlib.h || (echo \"utils/simdlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/simdlib_avx2.h || (echo \"utils/simdlib_avx2.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/simdlib_emulated.h || (echo \"utils/simdlib_emulated.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/utils.h || (echo \"utils/utils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/OnDiskInvertedLists.h || (echo \"invlists/OnDiskInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuAutoTune.h || (echo \"gpu/GpuAutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuCloner.h || (echo \"gpu/GpuCloner.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuClonerOptions.h || (echo \"gpu/GpuClonerOptions.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuDistance.h || (echo \"gpu/GpuDistance.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuFaissAssert.h || (echo \"gpu/GpuFaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndex.h || (echo \"gpu/GpuIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexBinaryFlat.h || (echo \"gpu/GpuIndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexFlat.h || (echo \"gpu/GpuIndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexIVF.h || (echo \"gpu/GpuIndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexIVFFlat.h || (echo \"gpu/GpuIndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexIVFPQ.h || (echo \"gpu/GpuIndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexIVFScalarQuantizer.h || (echo \"gpu/GpuIndexIVFScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndicesOptions.h || (echo \"gpu/GpuIndicesOptions.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuResources.h || (echo \"gpu/GpuResources.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/StandardGpuResources.h || (echo \"gpu/StandardGpuResources.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/BinaryDistance.cuh || (echo \"gpu/impl/BinaryDistance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/BinaryFlatIndex.cuh || (echo \"gpu/impl/BinaryFlatIndex.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/BroadcastSum.cuh || (echo \"gpu/impl/BroadcastSum.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/Distance.cuh || (echo \"gpu/impl/Distance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/DistanceUtils.cuh || (echo \"gpu/impl/DistanceUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/FlatIndex.cuh || (echo \"gpu/impl/FlatIndex.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/GeneralDistance.cuh || (echo \"gpu/impl/GeneralDistance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/GpuScalarQuantizer.cuh || (echo \"gpu/impl/GpuScalarQuantizer.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFAppend.cuh || (echo \"gpu/impl/IVFAppend.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFBase.cuh || (echo \"gpu/impl/IVFBase.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFFlat.cuh || (echo \"gpu/impl/IVFFlat.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFFlatScan.cuh || (echo \"gpu/impl/IVFFlatScan.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFInterleaved.cuh || (echo \"gpu/impl/IVFInterleaved.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFPQ.cuh || (echo \"gpu/impl/IVFPQ.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFUtils.cuh || (echo \"gpu/impl/IVFUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/InterleavedCodes.h || (echo \"gpu/impl/InterleavedCodes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/L2Norm.cuh || (echo \"gpu/impl/L2Norm.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/L2Select.cuh || (echo \"gpu/impl/L2Select.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQCodeDistances-inl.cuh || (echo \"gpu/impl/PQCodeDistances-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQCodeDistances.cuh || (echo \"gpu/impl/PQCodeDistances.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQCodeLoad.cuh || (echo \"gpu/impl/PQCodeLoad.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQScanMultiPassNoPrecomputed-inl.cuh || (echo \"gpu/impl/PQScanMultiPassNoPrecomputed-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQScanMultiPassNoPrecomputed.cuh || (echo \"gpu/impl/PQScanMultiPassNoPrecomputed.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQScanMultiPassPrecomputed.cuh || (echo \"gpu/impl/PQScanMultiPassPrecomputed.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/RemapIndices.h || (echo \"gpu/impl/RemapIndices.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/VectorResidual.cuh || (echo \"gpu/impl/VectorResidual.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/BlockSelectKernel.cuh || (echo \"gpu/utils/BlockSelectKernel.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Comparators.cuh || (echo \"gpu/utils/Comparators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/ConversionOperators.cuh || (echo \"gpu/utils/ConversionOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/CopyUtils.cuh || (echo \"gpu/utils/CopyUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceDefs.cuh || (echo \"gpu/utils/DeviceDefs.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceTensor-inl.cuh || (echo \"gpu/utils/DeviceTensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceTensor.cuh || (echo \"gpu/utils/DeviceTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceUtils.h || (echo \"gpu/utils/DeviceUtils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceVector.cuh || (echo \"gpu/utils/DeviceVector.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Float16.cuh || (echo \"gpu/utils/Float16.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/HostTensor-inl.cuh || (echo \"gpu/utils/HostTensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/HostTensor.cuh || (echo \"gpu/utils/HostTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Limits.cuh || (echo \"gpu/utils/Limits.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/LoadStoreOperators.cuh || (echo \"gpu/utils/LoadStoreOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MathOperators.cuh || (echo \"gpu/utils/MathOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MatrixMult-inl.cuh || (echo \"gpu/utils/MatrixMult-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MatrixMult.cuh || (echo \"gpu/utils/MatrixMult.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MergeNetworkBlock.cuh || (echo \"gpu/utils/MergeNetworkBlock.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MergeNetworkUtils.cuh || (echo \"gpu/utils/MergeNetworkUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MergeNetworkWarp.cuh || (echo \"gpu/utils/MergeNetworkWarp.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/NoTypeTensor.cuh || (echo \"gpu/utils/NoTypeTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Pair.cuh || (echo \"gpu/utils/Pair.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/PtxUtils.cuh || (echo \"gpu/utils/PtxUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/ReductionOperators.cuh || (echo \"gpu/utils/ReductionOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Reductions.cuh || (echo \"gpu/utils/Reductions.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Select.cuh || (echo \"gpu/utils/Select.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/StackDeviceMemory.h || (echo \"gpu/utils/StackDeviceMemory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/StaticUtils.h || (echo \"gpu/utils/StaticUtils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Tensor-inl.cuh || (echo \"gpu/utils/Tensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Tensor.cuh || (echo \"gpu/utils/Tensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/ThrustAllocator.cuh || (echo \"gpu/utils/ThrustAllocator.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Timer.h || (echo \"gpu/utils/Timer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Transpose.cuh || (echo \"gpu/utils/Transpose.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/WarpPackedBits.cuh || (echo \"gpu/utils/WarpPackedBits.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/WarpSelectKernel.cuh || (echo \"gpu/utils/WarpSelectKernel.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/WarpShuffles.cuh || (echo \"gpu/utils/WarpShuffles.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/blockselect/BlockSelectImpl.cuh || (echo \"gpu/utils/blockselect/BlockSelectImpl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/warpselect/WarpSelectImpl.cuh || (echo \"gpu/utils/warpselect/WarpSelectImpl.cuh not found\" && exit 1)"
     ]
    }
   },
   {
    "build": {
     "string": "py39cuda112h1234567_3_cuda"
    },
    "name": "faiss",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "cuda_compiler_stub",
      "swig",
      "cmake",
      "libgomp"
     ],
     "host": [
      "python",
      "pip",
      "numpy",
      "libfaiss =1.7.0=*_cuda",
      "libfaiss-avx2 =1.7.0=*_cuda",
      "libblas",
      "liblapack"
     ],
     "run": [
      "python",
      "libfaiss =1.7.0=*_cuda",
      "libfaiss-avx2 =1.7.0=*_cuda",
      "numpy"
     ],
     "run_constrained": [
      "faiss-proc * cuda"
     ]
    },
    "script": "build-pkg.sh",
    "test": {
     "commands": [
      "python -c \"from numpy.core._multiarray_umath import __cpu_features__; print(f'Testing version with AVX2-support - ' + str(__cpu_features__['AVX2']))\"",
      "pytest tests --log-file-level=INFO --log-file=log.txt",
      "cat log.txt && sleep 2",
      "python -c \"q = open('log.txt').readlines(); import sys; sys.exit(0 if 'Successfully loaded faiss with AVX2 support.' in [x[35:-1] for x in q] else 1)\"",
      "export NPY_DISABLE_CPU_FEATURES=AVX2",
      "python -c \"from numpy.core._multiarray_umath import __cpu_features__; print(f'Testing version with AVX2-support - ' + str(__cpu_features__['AVX2']))\"",
      "pytest tests --log-file-level=INFO --log-file=log.txt",
      "cat log.txt && sleep 2",
      "python -c \"q = open('log.txt').readlines(); import sys; sys.exit(0 if 'Successfully loaded faiss.' in [x[35:-1] for x in q] else 1)\""
     ],
     "imports": [
      "faiss"
     ],
     "requires": [
      "blas =*=mkl",
      "scipy",
      "pytest"
     ],
     "source_files": [
      "tests/"
     ]
    }
   },
   {
    "build": {
     "skip": true
    },
    "name": "faiss-cpu",
    "requirements": {
     "run": [
      "faiss =1.7.0=*_cpu"
     ]
    },
    "test": {
     "imports": [
      "faiss"
     ]
    }
   },
   {
    "build": null,
    "name": "faiss-gpu",
    "requirements": {
     "run": [
      "faiss =1.7.0=*_cuda"
     ]
    },
    "test": {
     "imports": [
      "faiss"
     ]
    }
   },
   {
    "build": {
     "string": "cuda"
    },
    "name": "faiss-proc",
    "test": {
     "commands": [
      "exit 0"
     ]
    },
    "version": "1.0.0"
   },
   {
    "build": {
     "run_exports": [
      "libfaiss{{ libext }}",
      "libfaiss_avx2 =*=*_cuda"
     ],
     "string": "cuda111h1234567_3_cuda"
    },
    "name": "libfaiss-avx2",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "cuda_compiler_stub",
      "cmake",
      "libgomp"
     ],
     "host": [
      "libblas",
      "liblapack"
     ],
     "run_constrained": [
      "faiss-proc * cuda"
     ]
    },
    "script": "build-lib-avx2.sh",
    "test": {
     "commands": [
      "test -f $PREFIX/lib/libfaiss_avx2.so",
      "test ! -f $PREFIX/lib/libfaiss_avx2.a",
      "test -f $PREFIX/include/faiss_avx2/AutoTune.h || (echo \"AutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/Clustering.h || (echo \"Clustering.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IVFlib.h || (echo \"IVFlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/Index.h || (echo \"Index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/Index2Layer.h || (echo \"Index2Layer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinary.h || (echo \"IndexBinary.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryFlat.h || (echo \"IndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryFromFloat.h || (echo \"IndexBinaryFromFloat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryHNSW.h || (echo \"IndexBinaryHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryHash.h || (echo \"IndexBinaryHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryIVF.h || (echo \"IndexBinaryIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexFlat.h || (echo \"IndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexHNSW.h || (echo \"IndexHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVF.h || (echo \"IndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFFlat.h || (echo \"IndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFPQ.h || (echo \"IndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFPQFastScan.h || (echo \"IndexIVFPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFPQR.h || (echo \"IndexIVFPQR.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFSpectralHash.h || (echo \"IndexIVFSpectralHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexLSH.h || (echo \"IndexLSH.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexLattice.h || (echo \"IndexLattice.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexPQ.h || (echo \"IndexPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexPQFastScan.h || (echo \"IndexPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexPreTransform.h || (echo \"IndexPreTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexRefine.h || (echo \"IndexRefine.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexReplicas.h || (echo \"IndexReplicas.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexScalarQuantizer.h || (echo \"IndexScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexShards.h || (echo \"IndexShards.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/MatrixStats.h || (echo \"MatrixStats.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/MetaIndexes.h || (echo \"MetaIndexes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/MetricType.h || (echo \"MetricType.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/VectorTransform.h || (echo \"VectorTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/clone_index.h || (echo \"clone_index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/index_factory.h || (echo \"index_factory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/index_io.h || (echo \"index_io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/AuxIndexStructures.h || (echo \"impl/AuxIndexStructures.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/FaissAssert.h || (echo \"impl/FaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/FaissException.h || (echo \"impl/FaissException.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/HNSW.h || (echo \"impl/HNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/PolysemousTraining.h || (echo \"impl/PolysemousTraining.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ProductQuantizer-inl.h || (echo \"impl/ProductQuantizer-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ProductQuantizer.h || (echo \"impl/ProductQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ResultHandler.h || (echo \"impl/ResultHandler.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ScalarQuantizer.h || (echo \"impl/ScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ThreadedIndex-inl.h || (echo \"impl/ThreadedIndex-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ThreadedIndex.h || (echo \"impl/ThreadedIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/io.h || (echo \"impl/io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/io_macros.h || (echo \"impl/io_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/lattice_Zn.h || (echo \"impl/lattice_Zn.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/platform_macros.h || (echo \"impl/platform_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/pq4_fast_scan.h || (echo \"impl/pq4_fast_scan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/simd_result_handlers.h || (echo \"impl/simd_result_handlers.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/BlockInvertedLists.h || (echo \"invlists/BlockInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/DirectMap.h || (echo \"invlists/DirectMap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/InvertedLists.h || (echo \"invlists/InvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/InvertedListsIOHook.h || (echo \"invlists/InvertedListsIOHook.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/AlignedTable.h || (echo \"utils/AlignedTable.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/Heap.h || (echo \"utils/Heap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/WorkerThread.h || (echo \"utils/WorkerThread.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/distances.h || (echo \"utils/distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/extra_distances.h || (echo \"utils/extra_distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/hamming-inl.h || (echo \"utils/hamming-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/hamming.h || (echo \"utils/hamming.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/ordered_key_value.h || (echo \"utils/ordered_key_value.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/partitioning.h || (echo \"utils/partitioning.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/quantize_lut.h || (echo \"utils/quantize_lut.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/random.h || (echo \"utils/random.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/simdlib.h || (echo \"utils/simdlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/simdlib_avx2.h || (echo \"utils/simdlib_avx2.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/simdlib_emulated.h || (echo \"utils/simdlib_emulated.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/utils.h || (echo \"utils/utils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/OnDiskInvertedLists.h || (echo \"invlists/OnDiskInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuAutoTune.h || (echo \"gpu/GpuAutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuCloner.h || (echo \"gpu/GpuCloner.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuClonerOptions.h || (echo \"gpu/GpuClonerOptions.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuDistance.h || (echo \"gpu/GpuDistance.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuFaissAssert.h || (echo \"gpu/GpuFaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndex.h || (echo \"gpu/GpuIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexBinaryFlat.h || (echo \"gpu/GpuIndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexFlat.h || (echo \"gpu/GpuIndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexIVF.h || (echo \"gpu/GpuIndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexIVFFlat.h || (echo \"gpu/GpuIndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexIVFPQ.h || (echo \"gpu/GpuIndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexIVFScalarQuantizer.h || (echo \"gpu/GpuIndexIVFScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndicesOptions.h || (echo \"gpu/GpuIndicesOptions.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuResources.h || (echo \"gpu/GpuResources.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/StandardGpuResources.h || (echo \"gpu/StandardGpuResources.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/BinaryDistance.cuh || (echo \"gpu/impl/BinaryDistance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/BinaryFlatIndex.cuh || (echo \"gpu/impl/BinaryFlatIndex.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/BroadcastSum.cuh || (echo \"gpu/impl/BroadcastSum.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/Distance.cuh || (echo \"gpu/impl/Distance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/DistanceUtils.cuh || (echo \"gpu/impl/DistanceUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/FlatIndex.cuh || (echo \"gpu/impl/FlatIndex.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/GeneralDistance.cuh || (echo \"gpu/impl/GeneralDistance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/GpuScalarQuantizer.cuh || (echo \"gpu/impl/GpuScalarQuantizer.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFAppend.cuh || (echo \"gpu/impl/IVFAppend.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFBase.cuh || (echo \"gpu/impl/IVFBase.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFFlat.cuh || (echo \"gpu/impl/IVFFlat.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFFlatScan.cuh || (echo \"gpu/impl/IVFFlatScan.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFInterleaved.cuh || (echo \"gpu/impl/IVFInterleaved.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFPQ.cuh || (echo \"gpu/impl/IVFPQ.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFUtils.cuh || (echo \"gpu/impl/IVFUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/InterleavedCodes.h || (echo \"gpu/impl/InterleavedCodes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/L2Norm.cuh || (echo \"gpu/impl/L2Norm.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/L2Select.cuh || (echo \"gpu/impl/L2Select.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQCodeDistances-inl.cuh || (echo \"gpu/impl/PQCodeDistances-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQCodeDistances.cuh || (echo \"gpu/impl/PQCodeDistances.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQCodeLoad.cuh || (echo \"gpu/impl/PQCodeLoad.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQScanMultiPassNoPrecomputed-inl.cuh || (echo \"gpu/impl/PQScanMultiPassNoPrecomputed-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQScanMultiPassNoPrecomputed.cuh || (echo \"gpu/impl/PQScanMultiPassNoPrecomputed.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQScanMultiPassPrecomputed.cuh || (echo \"gpu/impl/PQScanMultiPassPrecomputed.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/RemapIndices.h || (echo \"gpu/impl/RemapIndices.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/VectorResidual.cuh || (echo \"gpu/impl/VectorResidual.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/BlockSelectKernel.cuh || (echo \"gpu/utils/BlockSelectKernel.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Comparators.cuh || (echo \"gpu/utils/Comparators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/ConversionOperators.cuh || (echo \"gpu/utils/ConversionOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/CopyUtils.cuh || (echo \"gpu/utils/CopyUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceDefs.cuh || (echo \"gpu/utils/DeviceDefs.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceTensor-inl.cuh || (echo \"gpu/utils/DeviceTensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceTensor.cuh || (echo \"gpu/utils/DeviceTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceUtils.h || (echo \"gpu/utils/DeviceUtils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceVector.cuh || (echo \"gpu/utils/DeviceVector.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Float16.cuh || (echo \"gpu/utils/Float16.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/HostTensor-inl.cuh || (echo \"gpu/utils/HostTensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/HostTensor.cuh || (echo \"gpu/utils/HostTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Limits.cuh || (echo \"gpu/utils/Limits.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/LoadStoreOperators.cuh || (echo \"gpu/utils/LoadStoreOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MathOperators.cuh || (echo \"gpu/utils/MathOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MatrixMult-inl.cuh || (echo \"gpu/utils/MatrixMult-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MatrixMult.cuh || (echo \"gpu/utils/MatrixMult.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MergeNetworkBlock.cuh || (echo \"gpu/utils/MergeNetworkBlock.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MergeNetworkUtils.cuh || (echo \"gpu/utils/MergeNetworkUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MergeNetworkWarp.cuh || (echo \"gpu/utils/MergeNetworkWarp.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/NoTypeTensor.cuh || (echo \"gpu/utils/NoTypeTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Pair.cuh || (echo \"gpu/utils/Pair.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/PtxUtils.cuh || (echo \"gpu/utils/PtxUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/ReductionOperators.cuh || (echo \"gpu/utils/ReductionOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Reductions.cuh || (echo \"gpu/utils/Reductions.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Select.cuh || (echo \"gpu/utils/Select.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/StackDeviceMemory.h || (echo \"gpu/utils/StackDeviceMemory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/StaticUtils.h || (echo \"gpu/utils/StaticUtils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Tensor-inl.cuh || (echo \"gpu/utils/Tensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Tensor.cuh || (echo \"gpu/utils/Tensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/ThrustAllocator.cuh || (echo \"gpu/utils/ThrustAllocator.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Timer.h || (echo \"gpu/utils/Timer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Transpose.cuh || (echo \"gpu/utils/Transpose.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/WarpPackedBits.cuh || (echo \"gpu/utils/WarpPackedBits.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/WarpSelectKernel.cuh || (echo \"gpu/utils/WarpSelectKernel.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/WarpShuffles.cuh || (echo \"gpu/utils/WarpShuffles.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/blockselect/BlockSelectImpl.cuh || (echo \"gpu/utils/blockselect/BlockSelectImpl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/warpselect/WarpSelectImpl.cuh || (echo \"gpu/utils/warpselect/WarpSelectImpl.cuh not found\" && exit 1)"
     ]
    }
   },
   {
    "build": {
     "run_exports": [
      "libfaiss{{ libext }}",
      "libfaiss =*=*_cuda"
     ],
     "string": "cuda111h1234567_3_cuda"
    },
    "name": "libfaiss",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "cuda_compiler_stub",
      "cmake",
      "libgomp"
     ],
     "host": [
      "libblas",
      "liblapack"
     ],
     "run_constrained": [
      "faiss-proc * cuda"
     ]
    },
    "script": "build-lib-generic.sh",
    "test": {
     "commands": [
      "test -f $PREFIX/lib/libfaiss.so",
      "test ! -f $PREFIX/lib/libfaiss.a",
      "test -f $PREFIX/include/faiss/AutoTune.h || (echo \"AutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/Clustering.h || (echo \"Clustering.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IVFlib.h || (echo \"IVFlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/Index.h || (echo \"Index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/Index2Layer.h || (echo \"Index2Layer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinary.h || (echo \"IndexBinary.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryFlat.h || (echo \"IndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryFromFloat.h || (echo \"IndexBinaryFromFloat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryHNSW.h || (echo \"IndexBinaryHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryHash.h || (echo \"IndexBinaryHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryIVF.h || (echo \"IndexBinaryIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexFlat.h || (echo \"IndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexHNSW.h || (echo \"IndexHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVF.h || (echo \"IndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFFlat.h || (echo \"IndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFPQ.h || (echo \"IndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFPQFastScan.h || (echo \"IndexIVFPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFPQR.h || (echo \"IndexIVFPQR.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFSpectralHash.h || (echo \"IndexIVFSpectralHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexLSH.h || (echo \"IndexLSH.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexLattice.h || (echo \"IndexLattice.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexPQ.h || (echo \"IndexPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexPQFastScan.h || (echo \"IndexPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexPreTransform.h || (echo \"IndexPreTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexRefine.h || (echo \"IndexRefine.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexReplicas.h || (echo \"IndexReplicas.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexScalarQuantizer.h || (echo \"IndexScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexShards.h || (echo \"IndexShards.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/MatrixStats.h || (echo \"MatrixStats.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/MetaIndexes.h || (echo \"MetaIndexes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/MetricType.h || (echo \"MetricType.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/VectorTransform.h || (echo \"VectorTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/clone_index.h || (echo \"clone_index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/index_factory.h || (echo \"index_factory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/index_io.h || (echo \"index_io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/AuxIndexStructures.h || (echo \"impl/AuxIndexStructures.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/FaissAssert.h || (echo \"impl/FaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/FaissException.h || (echo \"impl/FaissException.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/HNSW.h || (echo \"impl/HNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/PolysemousTraining.h || (echo \"impl/PolysemousTraining.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ProductQuantizer-inl.h || (echo \"impl/ProductQuantizer-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ProductQuantizer.h || (echo \"impl/ProductQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ResultHandler.h || (echo \"impl/ResultHandler.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ScalarQuantizer.h || (echo \"impl/ScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ThreadedIndex-inl.h || (echo \"impl/ThreadedIndex-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ThreadedIndex.h || (echo \"impl/ThreadedIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/io.h || (echo \"impl/io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/io_macros.h || (echo \"impl/io_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/lattice_Zn.h || (echo \"impl/lattice_Zn.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/platform_macros.h || (echo \"impl/platform_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/pq4_fast_scan.h || (echo \"impl/pq4_fast_scan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/simd_result_handlers.h || (echo \"impl/simd_result_handlers.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/BlockInvertedLists.h || (echo \"invlists/BlockInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/DirectMap.h || (echo \"invlists/DirectMap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/InvertedLists.h || (echo \"invlists/InvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/InvertedListsIOHook.h || (echo \"invlists/InvertedListsIOHook.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/AlignedTable.h || (echo \"utils/AlignedTable.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/Heap.h || (echo \"utils/Heap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/WorkerThread.h || (echo \"utils/WorkerThread.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/distances.h || (echo \"utils/distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/extra_distances.h || (echo \"utils/extra_distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/hamming-inl.h || (echo \"utils/hamming-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/hamming.h || (echo \"utils/hamming.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/ordered_key_value.h || (echo \"utils/ordered_key_value.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/partitioning.h || (echo \"utils/partitioning.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/quantize_lut.h || (echo \"utils/quantize_lut.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/random.h || (echo \"utils/random.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/simdlib.h || (echo \"utils/simdlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/simdlib_avx2.h || (echo \"utils/simdlib_avx2.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/simdlib_emulated.h || (echo \"utils/simdlib_emulated.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/utils.h || (echo \"utils/utils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/OnDiskInvertedLists.h || (echo \"invlists/OnDiskInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuAutoTune.h || (echo \"gpu/GpuAutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuCloner.h || (echo \"gpu/GpuCloner.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuClonerOptions.h || (echo \"gpu/GpuClonerOptions.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuDistance.h || (echo \"gpu/GpuDistance.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuFaissAssert.h || (echo \"gpu/GpuFaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndex.h || (echo \"gpu/GpuIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexBinaryFlat.h || (echo \"gpu/GpuIndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexFlat.h || (echo \"gpu/GpuIndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexIVF.h || (echo \"gpu/GpuIndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexIVFFlat.h || (echo \"gpu/GpuIndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexIVFPQ.h || (echo \"gpu/GpuIndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexIVFScalarQuantizer.h || (echo \"gpu/GpuIndexIVFScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndicesOptions.h || (echo \"gpu/GpuIndicesOptions.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuResources.h || (echo \"gpu/GpuResources.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/StandardGpuResources.h || (echo \"gpu/StandardGpuResources.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/BinaryDistance.cuh || (echo \"gpu/impl/BinaryDistance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/BinaryFlatIndex.cuh || (echo \"gpu/impl/BinaryFlatIndex.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/BroadcastSum.cuh || (echo \"gpu/impl/BroadcastSum.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/Distance.cuh || (echo \"gpu/impl/Distance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/DistanceUtils.cuh || (echo \"gpu/impl/DistanceUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/FlatIndex.cuh || (echo \"gpu/impl/FlatIndex.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/GeneralDistance.cuh || (echo \"gpu/impl/GeneralDistance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/GpuScalarQuantizer.cuh || (echo \"gpu/impl/GpuScalarQuantizer.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFAppend.cuh || (echo \"gpu/impl/IVFAppend.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFBase.cuh || (echo \"gpu/impl/IVFBase.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFFlat.cuh || (echo \"gpu/impl/IVFFlat.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFFlatScan.cuh || (echo \"gpu/impl/IVFFlatScan.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFInterleaved.cuh || (echo \"gpu/impl/IVFInterleaved.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFPQ.cuh || (echo \"gpu/impl/IVFPQ.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFUtils.cuh || (echo \"gpu/impl/IVFUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/InterleavedCodes.h || (echo \"gpu/impl/InterleavedCodes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/L2Norm.cuh || (echo \"gpu/impl/L2Norm.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/L2Select.cuh || (echo \"gpu/impl/L2Select.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQCodeDistances-inl.cuh || (echo \"gpu/impl/PQCodeDistances-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQCodeDistances.cuh || (echo \"gpu/impl/PQCodeDistances.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQCodeLoad.cuh || (echo \"gpu/impl/PQCodeLoad.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQScanMultiPassNoPrecomputed-inl.cuh || (echo \"gpu/impl/PQScanMultiPassNoPrecomputed-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQScanMultiPassNoPrecomputed.cuh || (echo \"gpu/impl/PQScanMultiPassNoPrecomputed.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQScanMultiPassPrecomputed.cuh || (echo \"gpu/impl/PQScanMultiPassPrecomputed.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/RemapIndices.h || (echo \"gpu/impl/RemapIndices.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/VectorResidual.cuh || (echo \"gpu/impl/VectorResidual.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/BlockSelectKernel.cuh || (echo \"gpu/utils/BlockSelectKernel.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Comparators.cuh || (echo \"gpu/utils/Comparators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/ConversionOperators.cuh || (echo \"gpu/utils/ConversionOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/CopyUtils.cuh || (echo \"gpu/utils/CopyUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceDefs.cuh || (echo \"gpu/utils/DeviceDefs.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceTensor-inl.cuh || (echo \"gpu/utils/DeviceTensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceTensor.cuh || (echo \"gpu/utils/DeviceTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceUtils.h || (echo \"gpu/utils/DeviceUtils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceVector.cuh || (echo \"gpu/utils/DeviceVector.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Float16.cuh || (echo \"gpu/utils/Float16.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/HostTensor-inl.cuh || (echo \"gpu/utils/HostTensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/HostTensor.cuh || (echo \"gpu/utils/HostTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Limits.cuh || (echo \"gpu/utils/Limits.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/LoadStoreOperators.cuh || (echo \"gpu/utils/LoadStoreOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MathOperators.cuh || (echo \"gpu/utils/MathOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MatrixMult-inl.cuh || (echo \"gpu/utils/MatrixMult-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MatrixMult.cuh || (echo \"gpu/utils/MatrixMult.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MergeNetworkBlock.cuh || (echo \"gpu/utils/MergeNetworkBlock.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MergeNetworkUtils.cuh || (echo \"gpu/utils/MergeNetworkUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MergeNetworkWarp.cuh || (echo \"gpu/utils/MergeNetworkWarp.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/NoTypeTensor.cuh || (echo \"gpu/utils/NoTypeTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Pair.cuh || (echo \"gpu/utils/Pair.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/PtxUtils.cuh || (echo \"gpu/utils/PtxUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/ReductionOperators.cuh || (echo \"gpu/utils/ReductionOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Reductions.cuh || (echo \"gpu/utils/Reductions.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Select.cuh || (echo \"gpu/utils/Select.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/StackDeviceMemory.h || (echo \"gpu/utils/StackDeviceMemory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/StaticUtils.h || (echo \"gpu/utils/StaticUtils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Tensor-inl.cuh || (echo \"gpu/utils/Tensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Tensor.cuh || (echo \"gpu/utils/Tensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/ThrustAllocator.cuh || (echo \"gpu/utils/ThrustAllocator.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Timer.h || (echo \"gpu/utils/Timer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Transpose.cuh || (echo \"gpu/utils/Transpose.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/WarpPackedBits.cuh || (echo \"gpu/utils/WarpPackedBits.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/WarpSelectKernel.cuh || (echo \"gpu/utils/WarpSelectKernel.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/WarpShuffles.cuh || (echo \"gpu/utils/WarpShuffles.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/blockselect/BlockSelectImpl.cuh || (echo \"gpu/utils/blockselect/BlockSelectImpl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/warpselect/WarpSelectImpl.cuh || (echo \"gpu/utils/warpselect/WarpSelectImpl.cuh not found\" && exit 1)"
     ]
    }
   },
   {
    "build": {
     "string": "py39cuda111h1234567_3_cuda"
    },
    "name": "faiss",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "cuda_compiler_stub",
      "swig",
      "cmake",
      "libgomp"
     ],
     "host": [
      "python",
      "pip",
      "numpy",
      "libfaiss =1.7.0=*_cuda",
      "libfaiss-avx2 =1.7.0=*_cuda",
      "libblas",
      "liblapack"
     ],
     "run": [
      "python",
      "libfaiss =1.7.0=*_cuda",
      "libfaiss-avx2 =1.7.0=*_cuda",
      "numpy"
     ],
     "run_constrained": [
      "faiss-proc * cuda"
     ]
    },
    "script": "build-pkg.sh",
    "test": {
     "commands": [
      "python -c \"from numpy.core._multiarray_umath import __cpu_features__; print(f'Testing version with AVX2-support - ' + str(__cpu_features__['AVX2']))\"",
      "pytest tests --log-file-level=INFO --log-file=log.txt",
      "cat log.txt && sleep 2",
      "python -c \"q = open('log.txt').readlines(); import sys; sys.exit(0 if 'Successfully loaded faiss with AVX2 support.' in [x[35:-1] for x in q] else 1)\"",
      "export NPY_DISABLE_CPU_FEATURES=AVX2",
      "python -c \"from numpy.core._multiarray_umath import __cpu_features__; print(f'Testing version with AVX2-support - ' + str(__cpu_features__['AVX2']))\"",
      "pytest tests --log-file-level=INFO --log-file=log.txt",
      "cat log.txt && sleep 2",
      "python -c \"q = open('log.txt').readlines(); import sys; sys.exit(0 if 'Successfully loaded faiss.' in [x[35:-1] for x in q] else 1)\""
     ],
     "imports": [
      "faiss"
     ],
     "requires": [
      "blas =*=mkl",
      "scipy",
      "pytest"
     ],
     "source_files": [
      "tests/"
     ]
    }
   },
   {
    "build": {
     "skip": true
    },
    "name": "faiss-cpu",
    "requirements": {
     "run": [
      "faiss =1.7.0=*_cpu"
     ]
    },
    "test": {
     "imports": [
      "faiss"
     ]
    }
   },
   {
    "build": null,
    "name": "faiss-gpu",
    "requirements": {
     "run": [
      "faiss =1.7.0=*_cuda"
     ]
    },
    "test": {
     "imports": [
      "faiss"
     ]
    }
   }
  ],
  "package": {
   "name": "faiss-split",
   "version": "1.7.0"
  },
  "requirements": {
   "build": [
    "cxx_compiler_stub",
    "cxx_compiler_stub",
    "cxx_compiler_stub",
    "cxx_compiler_stub",
    "cxx_compiler_stub"
   ]
  },
  "source": {
   "patches": [
    "patches/0001-use-c-14.patch",
    "patches/0002-Add-missing-headers-in-faiss-gpu-CMakeLists.txt-1666.patch",
    "patches/0003-update-util-guard-for-compute_86.patch",
    "patches/0004-Add-missing-includes-for-std-min-std-max.patch",
    "patches/0006-make-AVX2-detection-platform-independent-1600.patch",
    "patches/0007-make-setup.py-win-avx2-compatible-1682.patch",
    "patches/0008-log-success-messages-and-errors-in-loader.py-1683.patch",
    "patches/0009-add-msvc-compatible-AVX2-switch-in-CMakeLists.txt-16.patch",
    "patches/0010-Win-AVX2-compat-1681.patch",
    "patches/0011-Windows-portable-intrinsics-1684.patch",
    "patches/0012-adapt-header-target-directory-to-outputname.patch",
    "patches/0001-use-c-14.patch",
    "patches/0002-Add-missing-headers-in-faiss-gpu-CMakeLists.txt-1666.patch",
    "patches/0003-update-util-guard-for-compute_86.patch",
    "patches/0004-Add-missing-includes-for-std-min-std-max.patch",
    "patches/0006-make-AVX2-detection-platform-independent-1600.patch",
    "patches/0007-make-setup.py-win-avx2-compatible-1682.patch",
    "patches/0008-log-success-messages-and-errors-in-loader.py-1683.patch",
    "patches/0009-add-msvc-compatible-AVX2-switch-in-CMakeLists.txt-16.patch",
    "patches/0010-Win-AVX2-compat-1681.patch",
    "patches/0011-Windows-portable-intrinsics-1684.patch",
    "patches/0012-adapt-header-target-directory-to-outputname.patch",
    "patches/0001-use-c-14.patch",
    "patches/0002-Add-missing-headers-in-faiss-gpu-CMakeLists.txt-1666.patch",
    "patches/0003-update-util-guard-for-compute_86.patch",
    "patches/0004-Add-missing-includes-for-std-min-std-max.patch",
    "patches/0006-make-AVX2-detection-platform-independent-1600.patch",
    "patches/0007-make-setup.py-win-avx2-compatible-1682.patch",
    "patches/0008-log-success-messages-and-errors-in-loader.py-1683.patch",
    "patches/0009-add-msvc-compatible-AVX2-switch-in-CMakeLists.txt-16.patch",
    "patches/0010-Win-AVX2-compat-1681.patch",
    "patches/0011-Windows-portable-intrinsics-1684.patch",
    "patches/0012-adapt-header-target-directory-to-outputname.patch",
    "patches/0001-use-c-14.patch",
    "patches/0002-Add-missing-headers-in-faiss-gpu-CMakeLists.txt-1666.patch",
    "patches/0003-update-util-guard-for-compute_86.patch",
    "patches/0004-Add-missing-includes-for-std-min-std-max.patch",
    "patches/0006-make-AVX2-detection-platform-independent-1600.patch",
    "patches/0007-make-setup.py-win-avx2-compatible-1682.patch",
    "patches/0008-log-success-messages-and-errors-in-loader.py-1683.patch",
    "patches/0009-add-msvc-compatible-AVX2-switch-in-CMakeLists.txt-16.patch",
    "patches/0010-Win-AVX2-compat-1681.patch",
    "patches/0011-Windows-portable-intrinsics-1684.patch",
    "patches/0012-adapt-header-target-directory-to-outputname.patch",
    "patches/0001-use-c-14.patch",
    "patches/0002-Add-missing-headers-in-faiss-gpu-CMakeLists.txt-1666.patch",
    "patches/0003-update-util-guard-for-compute_86.patch",
    "patches/0004-Add-missing-includes-for-std-min-std-max.patch",
    "patches/0006-make-AVX2-detection-platform-independent-1600.patch",
    "patches/0007-make-setup.py-win-avx2-compatible-1682.patch",
    "patches/0008-log-success-messages-and-errors-in-loader.py-1683.patch",
    "patches/0009-add-msvc-compatible-AVX2-switch-in-CMakeLists.txt-16.patch",
    "patches/0010-Win-AVX2-compat-1681.patch",
    "patches/0011-Windows-portable-intrinsics-1684.patch",
    "patches/0012-adapt-header-target-directory-to-outputname.patch"
   ],
   "sha256": "f86d346ac9f409ee30abe37e52f6cce366b7f60d3924d65719f40aa07ceb4bec",
   "url": "https://github.com/facebookresearch/faiss/archive/v1.7.0.tar.gz"
  }
 },
 "linux_64_requirements": {
  "build": {
   "__set__": true,
   "elements": [
    "cmake",
    "cuda_compiler_stub",
    "cxx_compiler_stub",
    "libgomp",
    "swig"
   ]
  },
  "host": {
   "__set__": true,
   "elements": [
    "libblas",
    "libfaiss",
    "libfaiss-avx2",
    "liblapack",
    "numpy",
    "pip",
    "python"
   ]
  },
  "run": {
   "__set__": true,
   "elements": [
    "faiss",
    "libfaiss",
    "libfaiss-avx2",
    "numpy",
    "python"
   ]
  },
  "test": {
   "__set__": true,
   "elements": [
    "blas",
    "pytest",
    "scipy"
   ]
  }
 },
 "meta_yaml": {
  "about": {
   "description": "Faiss is a library for efficient similarity search and clustering of dense vectors.\nIt contains algorithms that search in sets of vectors of any size, up to ones that\npossibly do not fit in RAM. It also contains supporting code for evaluation and\nparameter tuning. Faiss is written in C++ with complete wrappers for Python/numpy.\nSome of the most useful algorithms are implemented on the GPU. It is developed by\n[Facebook AI Research](https://research.fb.com/category/facebook-ai-research-fair/).\n\nFor best performance, the maintainers of the package\n[recommend](https://github.com/conda-forge/staged-recipes/pull/11337#issuecomment-623718460)\nusing the MKL implementation of blas/lapack. You can ensure that this is installed\nby adding \"libblas =*=*mkl\" to your dependencies.\n",
   "dev_url": "https://github.com/facebookresearch/faiss",
   "doc_url": "https://rawgit.com/facebookresearch/faiss/master/docs/html/annotated.html",
   "home": "https://github.com/facebookresearch/faiss",
   "license": "MIT",
   "license_family": "MIT",
   "license_file": "LICENSE",
   "summary": "A library for efficient similarity search and clustering of dense vectors."
  },
  "build": {
   "number": "3"
  },
  "extra": {
   "recipe-maintainers": [
    "h-vetinari",
    "h-vetinari",
    "h-vetinari",
    "h-vetinari",
    "h-vetinari",
    "h-vetinari",
    "h-vetinari"
   ]
  },
  "outputs": [
   {
    "build": {
     "string": "cuda"
    },
    "name": "faiss-proc",
    "test": {
     "commands": [
      "exit 0"
     ]
    },
    "version": "1.0.0"
   },
   {
    "build": {
     "run_exports": [
      "libfaiss{{ libext }}",
      "libfaiss_avx2 =*=*_cuda"
     ],
     "string": "cuda110h1234567_3_cuda"
    },
    "name": "libfaiss-avx2",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "cuda_compiler_stub",
      "cmake",
      "libgomp"
     ],
     "host": [
      "libblas",
      "liblapack"
     ],
     "run_constrained": [
      "faiss-proc * cuda"
     ]
    },
    "script": "build-lib-avx2.sh",
    "test": {
     "commands": [
      "test -f $PREFIX/lib/libfaiss_avx2.so",
      "test ! -f $PREFIX/lib/libfaiss_avx2.a",
      "test -f $PREFIX/include/faiss_avx2/AutoTune.h || (echo \"AutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/Clustering.h || (echo \"Clustering.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IVFlib.h || (echo \"IVFlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/Index.h || (echo \"Index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/Index2Layer.h || (echo \"Index2Layer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinary.h || (echo \"IndexBinary.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryFlat.h || (echo \"IndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryFromFloat.h || (echo \"IndexBinaryFromFloat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryHNSW.h || (echo \"IndexBinaryHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryHash.h || (echo \"IndexBinaryHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryIVF.h || (echo \"IndexBinaryIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexFlat.h || (echo \"IndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexHNSW.h || (echo \"IndexHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVF.h || (echo \"IndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFFlat.h || (echo \"IndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFPQ.h || (echo \"IndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFPQFastScan.h || (echo \"IndexIVFPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFPQR.h || (echo \"IndexIVFPQR.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFSpectralHash.h || (echo \"IndexIVFSpectralHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexLSH.h || (echo \"IndexLSH.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexLattice.h || (echo \"IndexLattice.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexPQ.h || (echo \"IndexPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexPQFastScan.h || (echo \"IndexPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexPreTransform.h || (echo \"IndexPreTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexRefine.h || (echo \"IndexRefine.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexReplicas.h || (echo \"IndexReplicas.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexScalarQuantizer.h || (echo \"IndexScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexShards.h || (echo \"IndexShards.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/MatrixStats.h || (echo \"MatrixStats.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/MetaIndexes.h || (echo \"MetaIndexes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/MetricType.h || (echo \"MetricType.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/VectorTransform.h || (echo \"VectorTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/clone_index.h || (echo \"clone_index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/index_factory.h || (echo \"index_factory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/index_io.h || (echo \"index_io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/AuxIndexStructures.h || (echo \"impl/AuxIndexStructures.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/FaissAssert.h || (echo \"impl/FaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/FaissException.h || (echo \"impl/FaissException.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/HNSW.h || (echo \"impl/HNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/PolysemousTraining.h || (echo \"impl/PolysemousTraining.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ProductQuantizer-inl.h || (echo \"impl/ProductQuantizer-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ProductQuantizer.h || (echo \"impl/ProductQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ResultHandler.h || (echo \"impl/ResultHandler.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ScalarQuantizer.h || (echo \"impl/ScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ThreadedIndex-inl.h || (echo \"impl/ThreadedIndex-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ThreadedIndex.h || (echo \"impl/ThreadedIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/io.h || (echo \"impl/io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/io_macros.h || (echo \"impl/io_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/lattice_Zn.h || (echo \"impl/lattice_Zn.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/platform_macros.h || (echo \"impl/platform_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/pq4_fast_scan.h || (echo \"impl/pq4_fast_scan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/simd_result_handlers.h || (echo \"impl/simd_result_handlers.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/BlockInvertedLists.h || (echo \"invlists/BlockInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/DirectMap.h || (echo \"invlists/DirectMap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/InvertedLists.h || (echo \"invlists/InvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/InvertedListsIOHook.h || (echo \"invlists/InvertedListsIOHook.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/AlignedTable.h || (echo \"utils/AlignedTable.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/Heap.h || (echo \"utils/Heap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/WorkerThread.h || (echo \"utils/WorkerThread.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/distances.h || (echo \"utils/distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/extra_distances.h || (echo \"utils/extra_distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/hamming-inl.h || (echo \"utils/hamming-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/hamming.h || (echo \"utils/hamming.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/ordered_key_value.h || (echo \"utils/ordered_key_value.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/partitioning.h || (echo \"utils/partitioning.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/quantize_lut.h || (echo \"utils/quantize_lut.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/random.h || (echo \"utils/random.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/simdlib.h || (echo \"utils/simdlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/simdlib_avx2.h || (echo \"utils/simdlib_avx2.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/simdlib_emulated.h || (echo \"utils/simdlib_emulated.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/utils.h || (echo \"utils/utils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/OnDiskInvertedLists.h || (echo \"invlists/OnDiskInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuAutoTune.h || (echo \"gpu/GpuAutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuCloner.h || (echo \"gpu/GpuCloner.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuClonerOptions.h || (echo \"gpu/GpuClonerOptions.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuDistance.h || (echo \"gpu/GpuDistance.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuFaissAssert.h || (echo \"gpu/GpuFaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndex.h || (echo \"gpu/GpuIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexBinaryFlat.h || (echo \"gpu/GpuIndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexFlat.h || (echo \"gpu/GpuIndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexIVF.h || (echo \"gpu/GpuIndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexIVFFlat.h || (echo \"gpu/GpuIndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexIVFPQ.h || (echo \"gpu/GpuIndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexIVFScalarQuantizer.h || (echo \"gpu/GpuIndexIVFScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndicesOptions.h || (echo \"gpu/GpuIndicesOptions.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuResources.h || (echo \"gpu/GpuResources.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/StandardGpuResources.h || (echo \"gpu/StandardGpuResources.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/BinaryDistance.cuh || (echo \"gpu/impl/BinaryDistance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/BinaryFlatIndex.cuh || (echo \"gpu/impl/BinaryFlatIndex.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/BroadcastSum.cuh || (echo \"gpu/impl/BroadcastSum.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/Distance.cuh || (echo \"gpu/impl/Distance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/DistanceUtils.cuh || (echo \"gpu/impl/DistanceUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/FlatIndex.cuh || (echo \"gpu/impl/FlatIndex.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/GeneralDistance.cuh || (echo \"gpu/impl/GeneralDistance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/GpuScalarQuantizer.cuh || (echo \"gpu/impl/GpuScalarQuantizer.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFAppend.cuh || (echo \"gpu/impl/IVFAppend.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFBase.cuh || (echo \"gpu/impl/IVFBase.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFFlat.cuh || (echo \"gpu/impl/IVFFlat.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFFlatScan.cuh || (echo \"gpu/impl/IVFFlatScan.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFInterleaved.cuh || (echo \"gpu/impl/IVFInterleaved.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFPQ.cuh || (echo \"gpu/impl/IVFPQ.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFUtils.cuh || (echo \"gpu/impl/IVFUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/InterleavedCodes.h || (echo \"gpu/impl/InterleavedCodes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/L2Norm.cuh || (echo \"gpu/impl/L2Norm.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/L2Select.cuh || (echo \"gpu/impl/L2Select.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQCodeDistances-inl.cuh || (echo \"gpu/impl/PQCodeDistances-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQCodeDistances.cuh || (echo \"gpu/impl/PQCodeDistances.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQCodeLoad.cuh || (echo \"gpu/impl/PQCodeLoad.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQScanMultiPassNoPrecomputed-inl.cuh || (echo \"gpu/impl/PQScanMultiPassNoPrecomputed-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQScanMultiPassNoPrecomputed.cuh || (echo \"gpu/impl/PQScanMultiPassNoPrecomputed.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQScanMultiPassPrecomputed.cuh || (echo \"gpu/impl/PQScanMultiPassPrecomputed.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/RemapIndices.h || (echo \"gpu/impl/RemapIndices.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/VectorResidual.cuh || (echo \"gpu/impl/VectorResidual.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/BlockSelectKernel.cuh || (echo \"gpu/utils/BlockSelectKernel.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Comparators.cuh || (echo \"gpu/utils/Comparators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/ConversionOperators.cuh || (echo \"gpu/utils/ConversionOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/CopyUtils.cuh || (echo \"gpu/utils/CopyUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceDefs.cuh || (echo \"gpu/utils/DeviceDefs.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceTensor-inl.cuh || (echo \"gpu/utils/DeviceTensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceTensor.cuh || (echo \"gpu/utils/DeviceTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceUtils.h || (echo \"gpu/utils/DeviceUtils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceVector.cuh || (echo \"gpu/utils/DeviceVector.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Float16.cuh || (echo \"gpu/utils/Float16.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/HostTensor-inl.cuh || (echo \"gpu/utils/HostTensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/HostTensor.cuh || (echo \"gpu/utils/HostTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Limits.cuh || (echo \"gpu/utils/Limits.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/LoadStoreOperators.cuh || (echo \"gpu/utils/LoadStoreOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MathOperators.cuh || (echo \"gpu/utils/MathOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MatrixMult-inl.cuh || (echo \"gpu/utils/MatrixMult-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MatrixMult.cuh || (echo \"gpu/utils/MatrixMult.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MergeNetworkBlock.cuh || (echo \"gpu/utils/MergeNetworkBlock.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MergeNetworkUtils.cuh || (echo \"gpu/utils/MergeNetworkUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MergeNetworkWarp.cuh || (echo \"gpu/utils/MergeNetworkWarp.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/NoTypeTensor.cuh || (echo \"gpu/utils/NoTypeTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Pair.cuh || (echo \"gpu/utils/Pair.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/PtxUtils.cuh || (echo \"gpu/utils/PtxUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/ReductionOperators.cuh || (echo \"gpu/utils/ReductionOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Reductions.cuh || (echo \"gpu/utils/Reductions.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Select.cuh || (echo \"gpu/utils/Select.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/StackDeviceMemory.h || (echo \"gpu/utils/StackDeviceMemory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/StaticUtils.h || (echo \"gpu/utils/StaticUtils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Tensor-inl.cuh || (echo \"gpu/utils/Tensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Tensor.cuh || (echo \"gpu/utils/Tensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/ThrustAllocator.cuh || (echo \"gpu/utils/ThrustAllocator.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Timer.h || (echo \"gpu/utils/Timer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Transpose.cuh || (echo \"gpu/utils/Transpose.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/WarpPackedBits.cuh || (echo \"gpu/utils/WarpPackedBits.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/WarpSelectKernel.cuh || (echo \"gpu/utils/WarpSelectKernel.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/WarpShuffles.cuh || (echo \"gpu/utils/WarpShuffles.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/blockselect/BlockSelectImpl.cuh || (echo \"gpu/utils/blockselect/BlockSelectImpl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/warpselect/WarpSelectImpl.cuh || (echo \"gpu/utils/warpselect/WarpSelectImpl.cuh not found\" && exit 1)"
     ]
    }
   },
   {
    "build": {
     "run_exports": [
      "libfaiss{{ libext }}",
      "libfaiss =*=*_cuda"
     ],
     "string": "cuda110h1234567_3_cuda"
    },
    "name": "libfaiss",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "cuda_compiler_stub",
      "cmake",
      "libgomp"
     ],
     "host": [
      "libblas",
      "liblapack"
     ],
     "run_constrained": [
      "faiss-proc * cuda"
     ]
    },
    "script": "build-lib-generic.sh",
    "test": {
     "commands": [
      "test -f $PREFIX/lib/libfaiss.so",
      "test ! -f $PREFIX/lib/libfaiss.a",
      "test -f $PREFIX/include/faiss/AutoTune.h || (echo \"AutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/Clustering.h || (echo \"Clustering.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IVFlib.h || (echo \"IVFlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/Index.h || (echo \"Index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/Index2Layer.h || (echo \"Index2Layer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinary.h || (echo \"IndexBinary.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryFlat.h || (echo \"IndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryFromFloat.h || (echo \"IndexBinaryFromFloat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryHNSW.h || (echo \"IndexBinaryHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryHash.h || (echo \"IndexBinaryHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryIVF.h || (echo \"IndexBinaryIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexFlat.h || (echo \"IndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexHNSW.h || (echo \"IndexHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVF.h || (echo \"IndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFFlat.h || (echo \"IndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFPQ.h || (echo \"IndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFPQFastScan.h || (echo \"IndexIVFPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFPQR.h || (echo \"IndexIVFPQR.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFSpectralHash.h || (echo \"IndexIVFSpectralHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexLSH.h || (echo \"IndexLSH.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexLattice.h || (echo \"IndexLattice.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexPQ.h || (echo \"IndexPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexPQFastScan.h || (echo \"IndexPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexPreTransform.h || (echo \"IndexPreTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexRefine.h || (echo \"IndexRefine.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexReplicas.h || (echo \"IndexReplicas.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexScalarQuantizer.h || (echo \"IndexScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexShards.h || (echo \"IndexShards.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/MatrixStats.h || (echo \"MatrixStats.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/MetaIndexes.h || (echo \"MetaIndexes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/MetricType.h || (echo \"MetricType.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/VectorTransform.h || (echo \"VectorTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/clone_index.h || (echo \"clone_index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/index_factory.h || (echo \"index_factory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/index_io.h || (echo \"index_io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/AuxIndexStructures.h || (echo \"impl/AuxIndexStructures.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/FaissAssert.h || (echo \"impl/FaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/FaissException.h || (echo \"impl/FaissException.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/HNSW.h || (echo \"impl/HNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/PolysemousTraining.h || (echo \"impl/PolysemousTraining.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ProductQuantizer-inl.h || (echo \"impl/ProductQuantizer-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ProductQuantizer.h || (echo \"impl/ProductQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ResultHandler.h || (echo \"impl/ResultHandler.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ScalarQuantizer.h || (echo \"impl/ScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ThreadedIndex-inl.h || (echo \"impl/ThreadedIndex-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ThreadedIndex.h || (echo \"impl/ThreadedIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/io.h || (echo \"impl/io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/io_macros.h || (echo \"impl/io_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/lattice_Zn.h || (echo \"impl/lattice_Zn.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/platform_macros.h || (echo \"impl/platform_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/pq4_fast_scan.h || (echo \"impl/pq4_fast_scan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/simd_result_handlers.h || (echo \"impl/simd_result_handlers.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/BlockInvertedLists.h || (echo \"invlists/BlockInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/DirectMap.h || (echo \"invlists/DirectMap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/InvertedLists.h || (echo \"invlists/InvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/InvertedListsIOHook.h || (echo \"invlists/InvertedListsIOHook.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/AlignedTable.h || (echo \"utils/AlignedTable.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/Heap.h || (echo \"utils/Heap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/WorkerThread.h || (echo \"utils/WorkerThread.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/distances.h || (echo \"utils/distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/extra_distances.h || (echo \"utils/extra_distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/hamming-inl.h || (echo \"utils/hamming-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/hamming.h || (echo \"utils/hamming.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/ordered_key_value.h || (echo \"utils/ordered_key_value.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/partitioning.h || (echo \"utils/partitioning.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/quantize_lut.h || (echo \"utils/quantize_lut.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/random.h || (echo \"utils/random.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/simdlib.h || (echo \"utils/simdlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/simdlib_avx2.h || (echo \"utils/simdlib_avx2.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/simdlib_emulated.h || (echo \"utils/simdlib_emulated.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/utils.h || (echo \"utils/utils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/OnDiskInvertedLists.h || (echo \"invlists/OnDiskInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuAutoTune.h || (echo \"gpu/GpuAutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuCloner.h || (echo \"gpu/GpuCloner.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuClonerOptions.h || (echo \"gpu/GpuClonerOptions.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuDistance.h || (echo \"gpu/GpuDistance.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuFaissAssert.h || (echo \"gpu/GpuFaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndex.h || (echo \"gpu/GpuIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexBinaryFlat.h || (echo \"gpu/GpuIndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexFlat.h || (echo \"gpu/GpuIndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexIVF.h || (echo \"gpu/GpuIndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexIVFFlat.h || (echo \"gpu/GpuIndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexIVFPQ.h || (echo \"gpu/GpuIndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexIVFScalarQuantizer.h || (echo \"gpu/GpuIndexIVFScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndicesOptions.h || (echo \"gpu/GpuIndicesOptions.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuResources.h || (echo \"gpu/GpuResources.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/StandardGpuResources.h || (echo \"gpu/StandardGpuResources.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/BinaryDistance.cuh || (echo \"gpu/impl/BinaryDistance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/BinaryFlatIndex.cuh || (echo \"gpu/impl/BinaryFlatIndex.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/BroadcastSum.cuh || (echo \"gpu/impl/BroadcastSum.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/Distance.cuh || (echo \"gpu/impl/Distance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/DistanceUtils.cuh || (echo \"gpu/impl/DistanceUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/FlatIndex.cuh || (echo \"gpu/impl/FlatIndex.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/GeneralDistance.cuh || (echo \"gpu/impl/GeneralDistance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/GpuScalarQuantizer.cuh || (echo \"gpu/impl/GpuScalarQuantizer.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFAppend.cuh || (echo \"gpu/impl/IVFAppend.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFBase.cuh || (echo \"gpu/impl/IVFBase.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFFlat.cuh || (echo \"gpu/impl/IVFFlat.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFFlatScan.cuh || (echo \"gpu/impl/IVFFlatScan.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFInterleaved.cuh || (echo \"gpu/impl/IVFInterleaved.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFPQ.cuh || (echo \"gpu/impl/IVFPQ.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFUtils.cuh || (echo \"gpu/impl/IVFUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/InterleavedCodes.h || (echo \"gpu/impl/InterleavedCodes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/L2Norm.cuh || (echo \"gpu/impl/L2Norm.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/L2Select.cuh || (echo \"gpu/impl/L2Select.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQCodeDistances-inl.cuh || (echo \"gpu/impl/PQCodeDistances-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQCodeDistances.cuh || (echo \"gpu/impl/PQCodeDistances.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQCodeLoad.cuh || (echo \"gpu/impl/PQCodeLoad.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQScanMultiPassNoPrecomputed-inl.cuh || (echo \"gpu/impl/PQScanMultiPassNoPrecomputed-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQScanMultiPassNoPrecomputed.cuh || (echo \"gpu/impl/PQScanMultiPassNoPrecomputed.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQScanMultiPassPrecomputed.cuh || (echo \"gpu/impl/PQScanMultiPassPrecomputed.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/RemapIndices.h || (echo \"gpu/impl/RemapIndices.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/VectorResidual.cuh || (echo \"gpu/impl/VectorResidual.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/BlockSelectKernel.cuh || (echo \"gpu/utils/BlockSelectKernel.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Comparators.cuh || (echo \"gpu/utils/Comparators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/ConversionOperators.cuh || (echo \"gpu/utils/ConversionOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/CopyUtils.cuh || (echo \"gpu/utils/CopyUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceDefs.cuh || (echo \"gpu/utils/DeviceDefs.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceTensor-inl.cuh || (echo \"gpu/utils/DeviceTensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceTensor.cuh || (echo \"gpu/utils/DeviceTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceUtils.h || (echo \"gpu/utils/DeviceUtils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceVector.cuh || (echo \"gpu/utils/DeviceVector.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Float16.cuh || (echo \"gpu/utils/Float16.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/HostTensor-inl.cuh || (echo \"gpu/utils/HostTensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/HostTensor.cuh || (echo \"gpu/utils/HostTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Limits.cuh || (echo \"gpu/utils/Limits.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/LoadStoreOperators.cuh || (echo \"gpu/utils/LoadStoreOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MathOperators.cuh || (echo \"gpu/utils/MathOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MatrixMult-inl.cuh || (echo \"gpu/utils/MatrixMult-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MatrixMult.cuh || (echo \"gpu/utils/MatrixMult.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MergeNetworkBlock.cuh || (echo \"gpu/utils/MergeNetworkBlock.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MergeNetworkUtils.cuh || (echo \"gpu/utils/MergeNetworkUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MergeNetworkWarp.cuh || (echo \"gpu/utils/MergeNetworkWarp.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/NoTypeTensor.cuh || (echo \"gpu/utils/NoTypeTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Pair.cuh || (echo \"gpu/utils/Pair.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/PtxUtils.cuh || (echo \"gpu/utils/PtxUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/ReductionOperators.cuh || (echo \"gpu/utils/ReductionOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Reductions.cuh || (echo \"gpu/utils/Reductions.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Select.cuh || (echo \"gpu/utils/Select.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/StackDeviceMemory.h || (echo \"gpu/utils/StackDeviceMemory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/StaticUtils.h || (echo \"gpu/utils/StaticUtils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Tensor-inl.cuh || (echo \"gpu/utils/Tensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Tensor.cuh || (echo \"gpu/utils/Tensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/ThrustAllocator.cuh || (echo \"gpu/utils/ThrustAllocator.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Timer.h || (echo \"gpu/utils/Timer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Transpose.cuh || (echo \"gpu/utils/Transpose.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/WarpPackedBits.cuh || (echo \"gpu/utils/WarpPackedBits.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/WarpSelectKernel.cuh || (echo \"gpu/utils/WarpSelectKernel.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/WarpShuffles.cuh || (echo \"gpu/utils/WarpShuffles.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/blockselect/BlockSelectImpl.cuh || (echo \"gpu/utils/blockselect/BlockSelectImpl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/warpselect/WarpSelectImpl.cuh || (echo \"gpu/utils/warpselect/WarpSelectImpl.cuh not found\" && exit 1)"
     ]
    }
   },
   {
    "build": {
     "string": "py39cuda110h1234567_3_cuda"
    },
    "name": "faiss",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "cuda_compiler_stub",
      "swig",
      "cmake",
      "libgomp"
     ],
     "host": [
      "python",
      "pip",
      "numpy",
      "libfaiss =1.7.0=*_cuda",
      "libfaiss-avx2 =1.7.0=*_cuda",
      "libblas",
      "liblapack"
     ],
     "run": [
      "python",
      "libfaiss =1.7.0=*_cuda",
      "libfaiss-avx2 =1.7.0=*_cuda",
      "numpy"
     ],
     "run_constrained": [
      "faiss-proc * cuda"
     ]
    },
    "script": "build-pkg.sh",
    "test": {
     "commands": [
      "python -c \"from numpy.core._multiarray_umath import __cpu_features__; print(f'Testing version with AVX2-support - ' + str(__cpu_features__['AVX2']))\"",
      "pytest tests --log-file-level=INFO --log-file=log.txt",
      "cat log.txt && sleep 2",
      "python -c \"q = open('log.txt').readlines(); import sys; sys.exit(0 if 'Successfully loaded faiss with AVX2 support.' in [x[35:-1] for x in q] else 1)\"",
      "export NPY_DISABLE_CPU_FEATURES=AVX2",
      "python -c \"from numpy.core._multiarray_umath import __cpu_features__; print(f'Testing version with AVX2-support - ' + str(__cpu_features__['AVX2']))\"",
      "pytest tests --log-file-level=INFO --log-file=log.txt",
      "cat log.txt && sleep 2",
      "python -c \"q = open('log.txt').readlines(); import sys; sys.exit(0 if 'Successfully loaded faiss.' in [x[35:-1] for x in q] else 1)\""
     ],
     "imports": [
      "faiss"
     ],
     "requires": [
      "blas =*=mkl",
      "scipy",
      "pytest"
     ],
     "source_files": [
      "tests/"
     ]
    }
   },
   {
    "build": {
     "skip": true
    },
    "name": "faiss-cpu",
    "requirements": {
     "run": [
      "faiss =1.7.0=*_cpu"
     ]
    },
    "test": {
     "imports": [
      "faiss"
     ]
    }
   },
   {
    "build": null,
    "name": "faiss-gpu",
    "requirements": {
     "run": [
      "faiss =1.7.0=*_cuda"
     ]
    },
    "test": {
     "imports": [
      "faiss"
     ]
    }
   },
   {
    "build": {
     "string": "cpu"
    },
    "name": "faiss-proc",
    "test": {
     "commands": [
      "exit 0"
     ]
    },
    "version": "1.0.0"
   },
   {
    "build": {
     "run_exports": [
      "libfaiss{{ libext }}",
      "libfaiss_avx2 =*=*_cpu"
     ],
     "string": "h1234567_3_cpu"
    },
    "name": "libfaiss-avx2",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "cmake",
      "libgomp"
     ],
     "host": [
      "libblas",
      "liblapack"
     ],
     "run_constrained": [
      "faiss-proc * cpu"
     ]
    },
    "script": "build-lib-avx2.sh",
    "test": {
     "commands": [
      "test -f $PREFIX/lib/libfaiss_avx2.so",
      "test ! -f $PREFIX/lib/libfaiss_avx2.a",
      "test -f $PREFIX/include/faiss_avx2/AutoTune.h || (echo \"AutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/Clustering.h || (echo \"Clustering.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IVFlib.h || (echo \"IVFlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/Index.h || (echo \"Index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/Index2Layer.h || (echo \"Index2Layer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinary.h || (echo \"IndexBinary.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryFlat.h || (echo \"IndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryFromFloat.h || (echo \"IndexBinaryFromFloat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryHNSW.h || (echo \"IndexBinaryHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryHash.h || (echo \"IndexBinaryHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryIVF.h || (echo \"IndexBinaryIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexFlat.h || (echo \"IndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexHNSW.h || (echo \"IndexHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVF.h || (echo \"IndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFFlat.h || (echo \"IndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFPQ.h || (echo \"IndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFPQFastScan.h || (echo \"IndexIVFPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFPQR.h || (echo \"IndexIVFPQR.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFSpectralHash.h || (echo \"IndexIVFSpectralHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexLSH.h || (echo \"IndexLSH.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexLattice.h || (echo \"IndexLattice.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexPQ.h || (echo \"IndexPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexPQFastScan.h || (echo \"IndexPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexPreTransform.h || (echo \"IndexPreTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexRefine.h || (echo \"IndexRefine.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexReplicas.h || (echo \"IndexReplicas.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexScalarQuantizer.h || (echo \"IndexScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexShards.h || (echo \"IndexShards.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/MatrixStats.h || (echo \"MatrixStats.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/MetaIndexes.h || (echo \"MetaIndexes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/MetricType.h || (echo \"MetricType.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/VectorTransform.h || (echo \"VectorTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/clone_index.h || (echo \"clone_index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/index_factory.h || (echo \"index_factory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/index_io.h || (echo \"index_io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/AuxIndexStructures.h || (echo \"impl/AuxIndexStructures.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/FaissAssert.h || (echo \"impl/FaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/FaissException.h || (echo \"impl/FaissException.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/HNSW.h || (echo \"impl/HNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/PolysemousTraining.h || (echo \"impl/PolysemousTraining.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ProductQuantizer-inl.h || (echo \"impl/ProductQuantizer-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ProductQuantizer.h || (echo \"impl/ProductQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ResultHandler.h || (echo \"impl/ResultHandler.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ScalarQuantizer.h || (echo \"impl/ScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ThreadedIndex-inl.h || (echo \"impl/ThreadedIndex-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ThreadedIndex.h || (echo \"impl/ThreadedIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/io.h || (echo \"impl/io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/io_macros.h || (echo \"impl/io_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/lattice_Zn.h || (echo \"impl/lattice_Zn.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/platform_macros.h || (echo \"impl/platform_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/pq4_fast_scan.h || (echo \"impl/pq4_fast_scan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/simd_result_handlers.h || (echo \"impl/simd_result_handlers.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/BlockInvertedLists.h || (echo \"invlists/BlockInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/DirectMap.h || (echo \"invlists/DirectMap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/InvertedLists.h || (echo \"invlists/InvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/InvertedListsIOHook.h || (echo \"invlists/InvertedListsIOHook.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/AlignedTable.h || (echo \"utils/AlignedTable.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/Heap.h || (echo \"utils/Heap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/WorkerThread.h || (echo \"utils/WorkerThread.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/distances.h || (echo \"utils/distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/extra_distances.h || (echo \"utils/extra_distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/hamming-inl.h || (echo \"utils/hamming-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/hamming.h || (echo \"utils/hamming.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/ordered_key_value.h || (echo \"utils/ordered_key_value.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/partitioning.h || (echo \"utils/partitioning.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/quantize_lut.h || (echo \"utils/quantize_lut.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/random.h || (echo \"utils/random.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/simdlib.h || (echo \"utils/simdlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/simdlib_avx2.h || (echo \"utils/simdlib_avx2.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/simdlib_emulated.h || (echo \"utils/simdlib_emulated.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/utils.h || (echo \"utils/utils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/OnDiskInvertedLists.h || (echo \"invlists/OnDiskInvertedLists.h not found\" && exit 1)"
     ]
    }
   },
   {
    "build": {
     "run_exports": [
      "libfaiss{{ libext }}",
      "libfaiss =*=*_cpu"
     ],
     "string": "h1234567_3_cpu"
    },
    "name": "libfaiss",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "cmake",
      "libgomp"
     ],
     "host": [
      "libblas",
      "liblapack"
     ],
     "run_constrained": [
      "faiss-proc * cpu"
     ]
    },
    "script": "build-lib-generic.sh",
    "test": {
     "commands": [
      "test -f $PREFIX/lib/libfaiss.so",
      "test ! -f $PREFIX/lib/libfaiss.a",
      "test -f $PREFIX/include/faiss/AutoTune.h || (echo \"AutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/Clustering.h || (echo \"Clustering.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IVFlib.h || (echo \"IVFlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/Index.h || (echo \"Index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/Index2Layer.h || (echo \"Index2Layer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinary.h || (echo \"IndexBinary.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryFlat.h || (echo \"IndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryFromFloat.h || (echo \"IndexBinaryFromFloat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryHNSW.h || (echo \"IndexBinaryHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryHash.h || (echo \"IndexBinaryHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryIVF.h || (echo \"IndexBinaryIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexFlat.h || (echo \"IndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexHNSW.h || (echo \"IndexHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVF.h || (echo \"IndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFFlat.h || (echo \"IndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFPQ.h || (echo \"IndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFPQFastScan.h || (echo \"IndexIVFPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFPQR.h || (echo \"IndexIVFPQR.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFSpectralHash.h || (echo \"IndexIVFSpectralHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexLSH.h || (echo \"IndexLSH.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexLattice.h || (echo \"IndexLattice.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexPQ.h || (echo \"IndexPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexPQFastScan.h || (echo \"IndexPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexPreTransform.h || (echo \"IndexPreTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexRefine.h || (echo \"IndexRefine.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexReplicas.h || (echo \"IndexReplicas.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexScalarQuantizer.h || (echo \"IndexScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexShards.h || (echo \"IndexShards.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/MatrixStats.h || (echo \"MatrixStats.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/MetaIndexes.h || (echo \"MetaIndexes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/MetricType.h || (echo \"MetricType.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/VectorTransform.h || (echo \"VectorTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/clone_index.h || (echo \"clone_index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/index_factory.h || (echo \"index_factory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/index_io.h || (echo \"index_io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/AuxIndexStructures.h || (echo \"impl/AuxIndexStructures.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/FaissAssert.h || (echo \"impl/FaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/FaissException.h || (echo \"impl/FaissException.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/HNSW.h || (echo \"impl/HNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/PolysemousTraining.h || (echo \"impl/PolysemousTraining.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ProductQuantizer-inl.h || (echo \"impl/ProductQuantizer-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ProductQuantizer.h || (echo \"impl/ProductQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ResultHandler.h || (echo \"impl/ResultHandler.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ScalarQuantizer.h || (echo \"impl/ScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ThreadedIndex-inl.h || (echo \"impl/ThreadedIndex-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ThreadedIndex.h || (echo \"impl/ThreadedIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/io.h || (echo \"impl/io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/io_macros.h || (echo \"impl/io_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/lattice_Zn.h || (echo \"impl/lattice_Zn.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/platform_macros.h || (echo \"impl/platform_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/pq4_fast_scan.h || (echo \"impl/pq4_fast_scan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/simd_result_handlers.h || (echo \"impl/simd_result_handlers.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/BlockInvertedLists.h || (echo \"invlists/BlockInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/DirectMap.h || (echo \"invlists/DirectMap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/InvertedLists.h || (echo \"invlists/InvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/InvertedListsIOHook.h || (echo \"invlists/InvertedListsIOHook.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/AlignedTable.h || (echo \"utils/AlignedTable.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/Heap.h || (echo \"utils/Heap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/WorkerThread.h || (echo \"utils/WorkerThread.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/distances.h || (echo \"utils/distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/extra_distances.h || (echo \"utils/extra_distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/hamming-inl.h || (echo \"utils/hamming-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/hamming.h || (echo \"utils/hamming.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/ordered_key_value.h || (echo \"utils/ordered_key_value.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/partitioning.h || (echo \"utils/partitioning.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/quantize_lut.h || (echo \"utils/quantize_lut.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/random.h || (echo \"utils/random.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/simdlib.h || (echo \"utils/simdlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/simdlib_avx2.h || (echo \"utils/simdlib_avx2.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/simdlib_emulated.h || (echo \"utils/simdlib_emulated.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/utils.h || (echo \"utils/utils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/OnDiskInvertedLists.h || (echo \"invlists/OnDiskInvertedLists.h not found\" && exit 1)"
     ]
    }
   },
   {
    "build": {
     "string": "py39h1234567_3_cpu"
    },
    "name": "faiss",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "swig",
      "cmake",
      "libgomp"
     ],
     "host": [
      "python",
      "pip",
      "numpy",
      "libfaiss =1.7.0=*_cpu",
      "libfaiss-avx2 =1.7.0=*_cpu",
      "libblas",
      "liblapack"
     ],
     "run": [
      "python",
      "libfaiss =1.7.0=*_cpu",
      "libfaiss-avx2 =1.7.0=*_cpu",
      "numpy"
     ],
     "run_constrained": [
      "faiss-proc * cpu"
     ]
    },
    "script": "build-pkg.sh",
    "test": {
     "commands": [
      "python -c \"from numpy.core._multiarray_umath import __cpu_features__; print(f'Testing version with AVX2-support - ' + str(__cpu_features__['AVX2']))\"",
      "pytest tests --log-file-level=INFO --log-file=log.txt",
      "cat log.txt && sleep 2",
      "python -c \"q = open('log.txt').readlines(); import sys; sys.exit(0 if 'Successfully loaded faiss with AVX2 support.' in [x[35:-1] for x in q] else 1)\"",
      "export NPY_DISABLE_CPU_FEATURES=AVX2",
      "python -c \"from numpy.core._multiarray_umath import __cpu_features__; print(f'Testing version with AVX2-support - ' + str(__cpu_features__['AVX2']))\"",
      "pytest tests --log-file-level=INFO --log-file=log.txt",
      "cat log.txt && sleep 2",
      "python -c \"q = open('log.txt').readlines(); import sys; sys.exit(0 if 'Successfully loaded faiss.' in [x[35:-1] for x in q] else 1)\""
     ],
     "imports": [
      "faiss"
     ],
     "requires": [
      "blas =*=mkl",
      "scipy",
      "pytest"
     ],
     "source_files": [
      "tests/"
     ]
    }
   },
   {
    "build": null,
    "name": "faiss-cpu",
    "requirements": {
     "run": [
      "faiss =1.7.0=*_cpu"
     ]
    },
    "test": {
     "imports": [
      "faiss"
     ]
    }
   },
   {
    "build": {
     "skip": true
    },
    "name": "faiss-gpu",
    "requirements": {
     "run": [
      "faiss =1.7.0=*_cuda"
     ]
    },
    "test": {
     "imports": [
      "faiss"
     ]
    }
   },
   {
    "build": {
     "string": "cuda"
    },
    "name": "faiss-proc",
    "test": {
     "commands": [
      "exit 0"
     ]
    },
    "version": "1.0.0"
   },
   {
    "build": {
     "run_exports": [
      "libfaiss{{ libext }}",
      "libfaiss_avx2 =*=*_cuda"
     ],
     "string": "cuda102h1234567_3_cuda"
    },
    "name": "libfaiss-avx2",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "cuda_compiler_stub",
      "cmake",
      "libgomp"
     ],
     "host": [
      "libblas",
      "liblapack"
     ],
     "run_constrained": [
      "faiss-proc * cuda"
     ]
    },
    "script": "build-lib-avx2.sh",
    "test": {
     "commands": [
      "test -f $PREFIX/lib/libfaiss_avx2.so",
      "test ! -f $PREFIX/lib/libfaiss_avx2.a",
      "test -f $PREFIX/include/faiss_avx2/AutoTune.h || (echo \"AutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/Clustering.h || (echo \"Clustering.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IVFlib.h || (echo \"IVFlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/Index.h || (echo \"Index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/Index2Layer.h || (echo \"Index2Layer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinary.h || (echo \"IndexBinary.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryFlat.h || (echo \"IndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryFromFloat.h || (echo \"IndexBinaryFromFloat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryHNSW.h || (echo \"IndexBinaryHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryHash.h || (echo \"IndexBinaryHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryIVF.h || (echo \"IndexBinaryIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexFlat.h || (echo \"IndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexHNSW.h || (echo \"IndexHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVF.h || (echo \"IndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFFlat.h || (echo \"IndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFPQ.h || (echo \"IndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFPQFastScan.h || (echo \"IndexIVFPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFPQR.h || (echo \"IndexIVFPQR.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFSpectralHash.h || (echo \"IndexIVFSpectralHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexLSH.h || (echo \"IndexLSH.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexLattice.h || (echo \"IndexLattice.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexPQ.h || (echo \"IndexPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexPQFastScan.h || (echo \"IndexPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexPreTransform.h || (echo \"IndexPreTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexRefine.h || (echo \"IndexRefine.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexReplicas.h || (echo \"IndexReplicas.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexScalarQuantizer.h || (echo \"IndexScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexShards.h || (echo \"IndexShards.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/MatrixStats.h || (echo \"MatrixStats.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/MetaIndexes.h || (echo \"MetaIndexes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/MetricType.h || (echo \"MetricType.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/VectorTransform.h || (echo \"VectorTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/clone_index.h || (echo \"clone_index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/index_factory.h || (echo \"index_factory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/index_io.h || (echo \"index_io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/AuxIndexStructures.h || (echo \"impl/AuxIndexStructures.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/FaissAssert.h || (echo \"impl/FaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/FaissException.h || (echo \"impl/FaissException.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/HNSW.h || (echo \"impl/HNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/PolysemousTraining.h || (echo \"impl/PolysemousTraining.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ProductQuantizer-inl.h || (echo \"impl/ProductQuantizer-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ProductQuantizer.h || (echo \"impl/ProductQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ResultHandler.h || (echo \"impl/ResultHandler.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ScalarQuantizer.h || (echo \"impl/ScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ThreadedIndex-inl.h || (echo \"impl/ThreadedIndex-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ThreadedIndex.h || (echo \"impl/ThreadedIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/io.h || (echo \"impl/io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/io_macros.h || (echo \"impl/io_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/lattice_Zn.h || (echo \"impl/lattice_Zn.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/platform_macros.h || (echo \"impl/platform_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/pq4_fast_scan.h || (echo \"impl/pq4_fast_scan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/simd_result_handlers.h || (echo \"impl/simd_result_handlers.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/BlockInvertedLists.h || (echo \"invlists/BlockInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/DirectMap.h || (echo \"invlists/DirectMap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/InvertedLists.h || (echo \"invlists/InvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/InvertedListsIOHook.h || (echo \"invlists/InvertedListsIOHook.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/AlignedTable.h || (echo \"utils/AlignedTable.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/Heap.h || (echo \"utils/Heap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/WorkerThread.h || (echo \"utils/WorkerThread.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/distances.h || (echo \"utils/distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/extra_distances.h || (echo \"utils/extra_distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/hamming-inl.h || (echo \"utils/hamming-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/hamming.h || (echo \"utils/hamming.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/ordered_key_value.h || (echo \"utils/ordered_key_value.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/partitioning.h || (echo \"utils/partitioning.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/quantize_lut.h || (echo \"utils/quantize_lut.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/random.h || (echo \"utils/random.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/simdlib.h || (echo \"utils/simdlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/simdlib_avx2.h || (echo \"utils/simdlib_avx2.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/simdlib_emulated.h || (echo \"utils/simdlib_emulated.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/utils.h || (echo \"utils/utils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/OnDiskInvertedLists.h || (echo \"invlists/OnDiskInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuAutoTune.h || (echo \"gpu/GpuAutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuCloner.h || (echo \"gpu/GpuCloner.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuClonerOptions.h || (echo \"gpu/GpuClonerOptions.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuDistance.h || (echo \"gpu/GpuDistance.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuFaissAssert.h || (echo \"gpu/GpuFaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndex.h || (echo \"gpu/GpuIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexBinaryFlat.h || (echo \"gpu/GpuIndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexFlat.h || (echo \"gpu/GpuIndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexIVF.h || (echo \"gpu/GpuIndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexIVFFlat.h || (echo \"gpu/GpuIndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexIVFPQ.h || (echo \"gpu/GpuIndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexIVFScalarQuantizer.h || (echo \"gpu/GpuIndexIVFScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndicesOptions.h || (echo \"gpu/GpuIndicesOptions.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuResources.h || (echo \"gpu/GpuResources.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/StandardGpuResources.h || (echo \"gpu/StandardGpuResources.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/BinaryDistance.cuh || (echo \"gpu/impl/BinaryDistance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/BinaryFlatIndex.cuh || (echo \"gpu/impl/BinaryFlatIndex.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/BroadcastSum.cuh || (echo \"gpu/impl/BroadcastSum.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/Distance.cuh || (echo \"gpu/impl/Distance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/DistanceUtils.cuh || (echo \"gpu/impl/DistanceUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/FlatIndex.cuh || (echo \"gpu/impl/FlatIndex.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/GeneralDistance.cuh || (echo \"gpu/impl/GeneralDistance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/GpuScalarQuantizer.cuh || (echo \"gpu/impl/GpuScalarQuantizer.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFAppend.cuh || (echo \"gpu/impl/IVFAppend.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFBase.cuh || (echo \"gpu/impl/IVFBase.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFFlat.cuh || (echo \"gpu/impl/IVFFlat.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFFlatScan.cuh || (echo \"gpu/impl/IVFFlatScan.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFInterleaved.cuh || (echo \"gpu/impl/IVFInterleaved.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFPQ.cuh || (echo \"gpu/impl/IVFPQ.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFUtils.cuh || (echo \"gpu/impl/IVFUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/InterleavedCodes.h || (echo \"gpu/impl/InterleavedCodes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/L2Norm.cuh || (echo \"gpu/impl/L2Norm.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/L2Select.cuh || (echo \"gpu/impl/L2Select.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQCodeDistances-inl.cuh || (echo \"gpu/impl/PQCodeDistances-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQCodeDistances.cuh || (echo \"gpu/impl/PQCodeDistances.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQCodeLoad.cuh || (echo \"gpu/impl/PQCodeLoad.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQScanMultiPassNoPrecomputed-inl.cuh || (echo \"gpu/impl/PQScanMultiPassNoPrecomputed-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQScanMultiPassNoPrecomputed.cuh || (echo \"gpu/impl/PQScanMultiPassNoPrecomputed.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQScanMultiPassPrecomputed.cuh || (echo \"gpu/impl/PQScanMultiPassPrecomputed.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/RemapIndices.h || (echo \"gpu/impl/RemapIndices.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/VectorResidual.cuh || (echo \"gpu/impl/VectorResidual.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/BlockSelectKernel.cuh || (echo \"gpu/utils/BlockSelectKernel.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Comparators.cuh || (echo \"gpu/utils/Comparators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/ConversionOperators.cuh || (echo \"gpu/utils/ConversionOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/CopyUtils.cuh || (echo \"gpu/utils/CopyUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceDefs.cuh || (echo \"gpu/utils/DeviceDefs.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceTensor-inl.cuh || (echo \"gpu/utils/DeviceTensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceTensor.cuh || (echo \"gpu/utils/DeviceTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceUtils.h || (echo \"gpu/utils/DeviceUtils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceVector.cuh || (echo \"gpu/utils/DeviceVector.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Float16.cuh || (echo \"gpu/utils/Float16.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/HostTensor-inl.cuh || (echo \"gpu/utils/HostTensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/HostTensor.cuh || (echo \"gpu/utils/HostTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Limits.cuh || (echo \"gpu/utils/Limits.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/LoadStoreOperators.cuh || (echo \"gpu/utils/LoadStoreOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MathOperators.cuh || (echo \"gpu/utils/MathOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MatrixMult-inl.cuh || (echo \"gpu/utils/MatrixMult-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MatrixMult.cuh || (echo \"gpu/utils/MatrixMult.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MergeNetworkBlock.cuh || (echo \"gpu/utils/MergeNetworkBlock.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MergeNetworkUtils.cuh || (echo \"gpu/utils/MergeNetworkUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MergeNetworkWarp.cuh || (echo \"gpu/utils/MergeNetworkWarp.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/NoTypeTensor.cuh || (echo \"gpu/utils/NoTypeTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Pair.cuh || (echo \"gpu/utils/Pair.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/PtxUtils.cuh || (echo \"gpu/utils/PtxUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/ReductionOperators.cuh || (echo \"gpu/utils/ReductionOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Reductions.cuh || (echo \"gpu/utils/Reductions.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Select.cuh || (echo \"gpu/utils/Select.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/StackDeviceMemory.h || (echo \"gpu/utils/StackDeviceMemory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/StaticUtils.h || (echo \"gpu/utils/StaticUtils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Tensor-inl.cuh || (echo \"gpu/utils/Tensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Tensor.cuh || (echo \"gpu/utils/Tensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/ThrustAllocator.cuh || (echo \"gpu/utils/ThrustAllocator.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Timer.h || (echo \"gpu/utils/Timer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Transpose.cuh || (echo \"gpu/utils/Transpose.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/WarpPackedBits.cuh || (echo \"gpu/utils/WarpPackedBits.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/WarpSelectKernel.cuh || (echo \"gpu/utils/WarpSelectKernel.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/WarpShuffles.cuh || (echo \"gpu/utils/WarpShuffles.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/blockselect/BlockSelectImpl.cuh || (echo \"gpu/utils/blockselect/BlockSelectImpl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/warpselect/WarpSelectImpl.cuh || (echo \"gpu/utils/warpselect/WarpSelectImpl.cuh not found\" && exit 1)"
     ]
    }
   },
   {
    "build": {
     "run_exports": [
      "libfaiss{{ libext }}",
      "libfaiss =*=*_cuda"
     ],
     "string": "cuda102h1234567_3_cuda"
    },
    "name": "libfaiss",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "cuda_compiler_stub",
      "cmake",
      "libgomp"
     ],
     "host": [
      "libblas",
      "liblapack"
     ],
     "run_constrained": [
      "faiss-proc * cuda"
     ]
    },
    "script": "build-lib-generic.sh",
    "test": {
     "commands": [
      "test -f $PREFIX/lib/libfaiss.so",
      "test ! -f $PREFIX/lib/libfaiss.a",
      "test -f $PREFIX/include/faiss/AutoTune.h || (echo \"AutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/Clustering.h || (echo \"Clustering.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IVFlib.h || (echo \"IVFlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/Index.h || (echo \"Index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/Index2Layer.h || (echo \"Index2Layer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinary.h || (echo \"IndexBinary.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryFlat.h || (echo \"IndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryFromFloat.h || (echo \"IndexBinaryFromFloat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryHNSW.h || (echo \"IndexBinaryHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryHash.h || (echo \"IndexBinaryHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryIVF.h || (echo \"IndexBinaryIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexFlat.h || (echo \"IndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexHNSW.h || (echo \"IndexHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVF.h || (echo \"IndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFFlat.h || (echo \"IndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFPQ.h || (echo \"IndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFPQFastScan.h || (echo \"IndexIVFPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFPQR.h || (echo \"IndexIVFPQR.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFSpectralHash.h || (echo \"IndexIVFSpectralHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexLSH.h || (echo \"IndexLSH.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexLattice.h || (echo \"IndexLattice.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexPQ.h || (echo \"IndexPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexPQFastScan.h || (echo \"IndexPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexPreTransform.h || (echo \"IndexPreTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexRefine.h || (echo \"IndexRefine.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexReplicas.h || (echo \"IndexReplicas.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexScalarQuantizer.h || (echo \"IndexScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexShards.h || (echo \"IndexShards.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/MatrixStats.h || (echo \"MatrixStats.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/MetaIndexes.h || (echo \"MetaIndexes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/MetricType.h || (echo \"MetricType.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/VectorTransform.h || (echo \"VectorTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/clone_index.h || (echo \"clone_index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/index_factory.h || (echo \"index_factory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/index_io.h || (echo \"index_io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/AuxIndexStructures.h || (echo \"impl/AuxIndexStructures.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/FaissAssert.h || (echo \"impl/FaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/FaissException.h || (echo \"impl/FaissException.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/HNSW.h || (echo \"impl/HNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/PolysemousTraining.h || (echo \"impl/PolysemousTraining.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ProductQuantizer-inl.h || (echo \"impl/ProductQuantizer-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ProductQuantizer.h || (echo \"impl/ProductQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ResultHandler.h || (echo \"impl/ResultHandler.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ScalarQuantizer.h || (echo \"impl/ScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ThreadedIndex-inl.h || (echo \"impl/ThreadedIndex-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ThreadedIndex.h || (echo \"impl/ThreadedIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/io.h || (echo \"impl/io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/io_macros.h || (echo \"impl/io_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/lattice_Zn.h || (echo \"impl/lattice_Zn.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/platform_macros.h || (echo \"impl/platform_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/pq4_fast_scan.h || (echo \"impl/pq4_fast_scan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/simd_result_handlers.h || (echo \"impl/simd_result_handlers.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/BlockInvertedLists.h || (echo \"invlists/BlockInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/DirectMap.h || (echo \"invlists/DirectMap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/InvertedLists.h || (echo \"invlists/InvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/InvertedListsIOHook.h || (echo \"invlists/InvertedListsIOHook.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/AlignedTable.h || (echo \"utils/AlignedTable.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/Heap.h || (echo \"utils/Heap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/WorkerThread.h || (echo \"utils/WorkerThread.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/distances.h || (echo \"utils/distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/extra_distances.h || (echo \"utils/extra_distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/hamming-inl.h || (echo \"utils/hamming-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/hamming.h || (echo \"utils/hamming.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/ordered_key_value.h || (echo \"utils/ordered_key_value.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/partitioning.h || (echo \"utils/partitioning.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/quantize_lut.h || (echo \"utils/quantize_lut.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/random.h || (echo \"utils/random.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/simdlib.h || (echo \"utils/simdlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/simdlib_avx2.h || (echo \"utils/simdlib_avx2.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/simdlib_emulated.h || (echo \"utils/simdlib_emulated.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/utils.h || (echo \"utils/utils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/OnDiskInvertedLists.h || (echo \"invlists/OnDiskInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuAutoTune.h || (echo \"gpu/GpuAutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuCloner.h || (echo \"gpu/GpuCloner.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuClonerOptions.h || (echo \"gpu/GpuClonerOptions.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuDistance.h || (echo \"gpu/GpuDistance.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuFaissAssert.h || (echo \"gpu/GpuFaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndex.h || (echo \"gpu/GpuIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexBinaryFlat.h || (echo \"gpu/GpuIndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexFlat.h || (echo \"gpu/GpuIndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexIVF.h || (echo \"gpu/GpuIndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexIVFFlat.h || (echo \"gpu/GpuIndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexIVFPQ.h || (echo \"gpu/GpuIndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexIVFScalarQuantizer.h || (echo \"gpu/GpuIndexIVFScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndicesOptions.h || (echo \"gpu/GpuIndicesOptions.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuResources.h || (echo \"gpu/GpuResources.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/StandardGpuResources.h || (echo \"gpu/StandardGpuResources.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/BinaryDistance.cuh || (echo \"gpu/impl/BinaryDistance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/BinaryFlatIndex.cuh || (echo \"gpu/impl/BinaryFlatIndex.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/BroadcastSum.cuh || (echo \"gpu/impl/BroadcastSum.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/Distance.cuh || (echo \"gpu/impl/Distance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/DistanceUtils.cuh || (echo \"gpu/impl/DistanceUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/FlatIndex.cuh || (echo \"gpu/impl/FlatIndex.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/GeneralDistance.cuh || (echo \"gpu/impl/GeneralDistance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/GpuScalarQuantizer.cuh || (echo \"gpu/impl/GpuScalarQuantizer.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFAppend.cuh || (echo \"gpu/impl/IVFAppend.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFBase.cuh || (echo \"gpu/impl/IVFBase.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFFlat.cuh || (echo \"gpu/impl/IVFFlat.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFFlatScan.cuh || (echo \"gpu/impl/IVFFlatScan.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFInterleaved.cuh || (echo \"gpu/impl/IVFInterleaved.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFPQ.cuh || (echo \"gpu/impl/IVFPQ.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFUtils.cuh || (echo \"gpu/impl/IVFUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/InterleavedCodes.h || (echo \"gpu/impl/InterleavedCodes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/L2Norm.cuh || (echo \"gpu/impl/L2Norm.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/L2Select.cuh || (echo \"gpu/impl/L2Select.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQCodeDistances-inl.cuh || (echo \"gpu/impl/PQCodeDistances-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQCodeDistances.cuh || (echo \"gpu/impl/PQCodeDistances.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQCodeLoad.cuh || (echo \"gpu/impl/PQCodeLoad.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQScanMultiPassNoPrecomputed-inl.cuh || (echo \"gpu/impl/PQScanMultiPassNoPrecomputed-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQScanMultiPassNoPrecomputed.cuh || (echo \"gpu/impl/PQScanMultiPassNoPrecomputed.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQScanMultiPassPrecomputed.cuh || (echo \"gpu/impl/PQScanMultiPassPrecomputed.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/RemapIndices.h || (echo \"gpu/impl/RemapIndices.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/VectorResidual.cuh || (echo \"gpu/impl/VectorResidual.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/BlockSelectKernel.cuh || (echo \"gpu/utils/BlockSelectKernel.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Comparators.cuh || (echo \"gpu/utils/Comparators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/ConversionOperators.cuh || (echo \"gpu/utils/ConversionOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/CopyUtils.cuh || (echo \"gpu/utils/CopyUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceDefs.cuh || (echo \"gpu/utils/DeviceDefs.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceTensor-inl.cuh || (echo \"gpu/utils/DeviceTensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceTensor.cuh || (echo \"gpu/utils/DeviceTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceUtils.h || (echo \"gpu/utils/DeviceUtils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceVector.cuh || (echo \"gpu/utils/DeviceVector.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Float16.cuh || (echo \"gpu/utils/Float16.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/HostTensor-inl.cuh || (echo \"gpu/utils/HostTensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/HostTensor.cuh || (echo \"gpu/utils/HostTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Limits.cuh || (echo \"gpu/utils/Limits.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/LoadStoreOperators.cuh || (echo \"gpu/utils/LoadStoreOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MathOperators.cuh || (echo \"gpu/utils/MathOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MatrixMult-inl.cuh || (echo \"gpu/utils/MatrixMult-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MatrixMult.cuh || (echo \"gpu/utils/MatrixMult.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MergeNetworkBlock.cuh || (echo \"gpu/utils/MergeNetworkBlock.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MergeNetworkUtils.cuh || (echo \"gpu/utils/MergeNetworkUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MergeNetworkWarp.cuh || (echo \"gpu/utils/MergeNetworkWarp.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/NoTypeTensor.cuh || (echo \"gpu/utils/NoTypeTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Pair.cuh || (echo \"gpu/utils/Pair.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/PtxUtils.cuh || (echo \"gpu/utils/PtxUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/ReductionOperators.cuh || (echo \"gpu/utils/ReductionOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Reductions.cuh || (echo \"gpu/utils/Reductions.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Select.cuh || (echo \"gpu/utils/Select.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/StackDeviceMemory.h || (echo \"gpu/utils/StackDeviceMemory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/StaticUtils.h || (echo \"gpu/utils/StaticUtils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Tensor-inl.cuh || (echo \"gpu/utils/Tensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Tensor.cuh || (echo \"gpu/utils/Tensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/ThrustAllocator.cuh || (echo \"gpu/utils/ThrustAllocator.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Timer.h || (echo \"gpu/utils/Timer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Transpose.cuh || (echo \"gpu/utils/Transpose.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/WarpPackedBits.cuh || (echo \"gpu/utils/WarpPackedBits.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/WarpSelectKernel.cuh || (echo \"gpu/utils/WarpSelectKernel.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/WarpShuffles.cuh || (echo \"gpu/utils/WarpShuffles.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/blockselect/BlockSelectImpl.cuh || (echo \"gpu/utils/blockselect/BlockSelectImpl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/warpselect/WarpSelectImpl.cuh || (echo \"gpu/utils/warpselect/WarpSelectImpl.cuh not found\" && exit 1)"
     ]
    }
   },
   {
    "build": {
     "string": "py39cuda102h1234567_3_cuda"
    },
    "name": "faiss",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "cuda_compiler_stub",
      "swig",
      "cmake",
      "libgomp"
     ],
     "host": [
      "python",
      "pip",
      "numpy",
      "libfaiss =1.7.0=*_cuda",
      "libfaiss-avx2 =1.7.0=*_cuda",
      "libblas",
      "liblapack"
     ],
     "run": [
      "python",
      "libfaiss =1.7.0=*_cuda",
      "libfaiss-avx2 =1.7.0=*_cuda",
      "numpy"
     ],
     "run_constrained": [
      "faiss-proc * cuda"
     ]
    },
    "script": "build-pkg.sh",
    "test": {
     "commands": [
      "python -c \"from numpy.core._multiarray_umath import __cpu_features__; print(f'Testing version with AVX2-support - ' + str(__cpu_features__['AVX2']))\"",
      "pytest tests --log-file-level=INFO --log-file=log.txt",
      "cat log.txt && sleep 2",
      "python -c \"q = open('log.txt').readlines(); import sys; sys.exit(0 if 'Successfully loaded faiss with AVX2 support.' in [x[35:-1] for x in q] else 1)\"",
      "export NPY_DISABLE_CPU_FEATURES=AVX2",
      "python -c \"from numpy.core._multiarray_umath import __cpu_features__; print(f'Testing version with AVX2-support - ' + str(__cpu_features__['AVX2']))\"",
      "pytest tests --log-file-level=INFO --log-file=log.txt",
      "cat log.txt && sleep 2",
      "python -c \"q = open('log.txt').readlines(); import sys; sys.exit(0 if 'Successfully loaded faiss.' in [x[35:-1] for x in q] else 1)\""
     ],
     "imports": [
      "faiss"
     ],
     "requires": [
      "blas =*=mkl",
      "scipy",
      "pytest"
     ],
     "source_files": [
      "tests/"
     ]
    }
   },
   {
    "build": {
     "skip": true
    },
    "name": "faiss-cpu",
    "requirements": {
     "run": [
      "faiss =1.7.0=*_cpu"
     ]
    },
    "test": {
     "imports": [
      "faiss"
     ]
    }
   },
   {
    "build": null,
    "name": "faiss-gpu",
    "requirements": {
     "run": [
      "faiss =1.7.0=*_cuda"
     ]
    },
    "test": {
     "imports": [
      "faiss"
     ]
    }
   },
   {
    "build": {
     "string": "cuda"
    },
    "name": "faiss-proc",
    "test": {
     "commands": [
      "exit 0"
     ]
    },
    "version": "1.0.0"
   },
   {
    "build": {
     "run_exports": [
      "libfaiss{{ libext }}",
      "libfaiss_avx2 =*=*_cuda"
     ],
     "string": "cuda112h1234567_3_cuda"
    },
    "name": "libfaiss-avx2",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "cuda_compiler_stub",
      "cmake",
      "libgomp"
     ],
     "host": [
      "libblas",
      "liblapack"
     ],
     "run_constrained": [
      "faiss-proc * cuda"
     ]
    },
    "script": "build-lib-avx2.sh",
    "test": {
     "commands": [
      "test -f $PREFIX/lib/libfaiss_avx2.so",
      "test ! -f $PREFIX/lib/libfaiss_avx2.a",
      "test -f $PREFIX/include/faiss_avx2/AutoTune.h || (echo \"AutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/Clustering.h || (echo \"Clustering.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IVFlib.h || (echo \"IVFlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/Index.h || (echo \"Index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/Index2Layer.h || (echo \"Index2Layer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinary.h || (echo \"IndexBinary.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryFlat.h || (echo \"IndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryFromFloat.h || (echo \"IndexBinaryFromFloat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryHNSW.h || (echo \"IndexBinaryHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryHash.h || (echo \"IndexBinaryHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryIVF.h || (echo \"IndexBinaryIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexFlat.h || (echo \"IndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexHNSW.h || (echo \"IndexHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVF.h || (echo \"IndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFFlat.h || (echo \"IndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFPQ.h || (echo \"IndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFPQFastScan.h || (echo \"IndexIVFPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFPQR.h || (echo \"IndexIVFPQR.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFSpectralHash.h || (echo \"IndexIVFSpectralHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexLSH.h || (echo \"IndexLSH.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexLattice.h || (echo \"IndexLattice.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexPQ.h || (echo \"IndexPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexPQFastScan.h || (echo \"IndexPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexPreTransform.h || (echo \"IndexPreTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexRefine.h || (echo \"IndexRefine.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexReplicas.h || (echo \"IndexReplicas.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexScalarQuantizer.h || (echo \"IndexScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexShards.h || (echo \"IndexShards.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/MatrixStats.h || (echo \"MatrixStats.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/MetaIndexes.h || (echo \"MetaIndexes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/MetricType.h || (echo \"MetricType.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/VectorTransform.h || (echo \"VectorTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/clone_index.h || (echo \"clone_index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/index_factory.h || (echo \"index_factory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/index_io.h || (echo \"index_io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/AuxIndexStructures.h || (echo \"impl/AuxIndexStructures.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/FaissAssert.h || (echo \"impl/FaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/FaissException.h || (echo \"impl/FaissException.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/HNSW.h || (echo \"impl/HNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/PolysemousTraining.h || (echo \"impl/PolysemousTraining.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ProductQuantizer-inl.h || (echo \"impl/ProductQuantizer-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ProductQuantizer.h || (echo \"impl/ProductQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ResultHandler.h || (echo \"impl/ResultHandler.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ScalarQuantizer.h || (echo \"impl/ScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ThreadedIndex-inl.h || (echo \"impl/ThreadedIndex-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ThreadedIndex.h || (echo \"impl/ThreadedIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/io.h || (echo \"impl/io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/io_macros.h || (echo \"impl/io_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/lattice_Zn.h || (echo \"impl/lattice_Zn.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/platform_macros.h || (echo \"impl/platform_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/pq4_fast_scan.h || (echo \"impl/pq4_fast_scan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/simd_result_handlers.h || (echo \"impl/simd_result_handlers.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/BlockInvertedLists.h || (echo \"invlists/BlockInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/DirectMap.h || (echo \"invlists/DirectMap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/InvertedLists.h || (echo \"invlists/InvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/InvertedListsIOHook.h || (echo \"invlists/InvertedListsIOHook.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/AlignedTable.h || (echo \"utils/AlignedTable.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/Heap.h || (echo \"utils/Heap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/WorkerThread.h || (echo \"utils/WorkerThread.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/distances.h || (echo \"utils/distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/extra_distances.h || (echo \"utils/extra_distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/hamming-inl.h || (echo \"utils/hamming-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/hamming.h || (echo \"utils/hamming.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/ordered_key_value.h || (echo \"utils/ordered_key_value.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/partitioning.h || (echo \"utils/partitioning.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/quantize_lut.h || (echo \"utils/quantize_lut.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/random.h || (echo \"utils/random.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/simdlib.h || (echo \"utils/simdlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/simdlib_avx2.h || (echo \"utils/simdlib_avx2.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/simdlib_emulated.h || (echo \"utils/simdlib_emulated.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/utils.h || (echo \"utils/utils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/OnDiskInvertedLists.h || (echo \"invlists/OnDiskInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuAutoTune.h || (echo \"gpu/GpuAutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuCloner.h || (echo \"gpu/GpuCloner.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuClonerOptions.h || (echo \"gpu/GpuClonerOptions.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuDistance.h || (echo \"gpu/GpuDistance.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuFaissAssert.h || (echo \"gpu/GpuFaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndex.h || (echo \"gpu/GpuIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexBinaryFlat.h || (echo \"gpu/GpuIndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexFlat.h || (echo \"gpu/GpuIndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexIVF.h || (echo \"gpu/GpuIndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexIVFFlat.h || (echo \"gpu/GpuIndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexIVFPQ.h || (echo \"gpu/GpuIndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexIVFScalarQuantizer.h || (echo \"gpu/GpuIndexIVFScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndicesOptions.h || (echo \"gpu/GpuIndicesOptions.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuResources.h || (echo \"gpu/GpuResources.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/StandardGpuResources.h || (echo \"gpu/StandardGpuResources.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/BinaryDistance.cuh || (echo \"gpu/impl/BinaryDistance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/BinaryFlatIndex.cuh || (echo \"gpu/impl/BinaryFlatIndex.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/BroadcastSum.cuh || (echo \"gpu/impl/BroadcastSum.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/Distance.cuh || (echo \"gpu/impl/Distance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/DistanceUtils.cuh || (echo \"gpu/impl/DistanceUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/FlatIndex.cuh || (echo \"gpu/impl/FlatIndex.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/GeneralDistance.cuh || (echo \"gpu/impl/GeneralDistance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/GpuScalarQuantizer.cuh || (echo \"gpu/impl/GpuScalarQuantizer.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFAppend.cuh || (echo \"gpu/impl/IVFAppend.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFBase.cuh || (echo \"gpu/impl/IVFBase.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFFlat.cuh || (echo \"gpu/impl/IVFFlat.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFFlatScan.cuh || (echo \"gpu/impl/IVFFlatScan.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFInterleaved.cuh || (echo \"gpu/impl/IVFInterleaved.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFPQ.cuh || (echo \"gpu/impl/IVFPQ.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFUtils.cuh || (echo \"gpu/impl/IVFUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/InterleavedCodes.h || (echo \"gpu/impl/InterleavedCodes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/L2Norm.cuh || (echo \"gpu/impl/L2Norm.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/L2Select.cuh || (echo \"gpu/impl/L2Select.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQCodeDistances-inl.cuh || (echo \"gpu/impl/PQCodeDistances-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQCodeDistances.cuh || (echo \"gpu/impl/PQCodeDistances.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQCodeLoad.cuh || (echo \"gpu/impl/PQCodeLoad.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQScanMultiPassNoPrecomputed-inl.cuh || (echo \"gpu/impl/PQScanMultiPassNoPrecomputed-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQScanMultiPassNoPrecomputed.cuh || (echo \"gpu/impl/PQScanMultiPassNoPrecomputed.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQScanMultiPassPrecomputed.cuh || (echo \"gpu/impl/PQScanMultiPassPrecomputed.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/RemapIndices.h || (echo \"gpu/impl/RemapIndices.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/VectorResidual.cuh || (echo \"gpu/impl/VectorResidual.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/BlockSelectKernel.cuh || (echo \"gpu/utils/BlockSelectKernel.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Comparators.cuh || (echo \"gpu/utils/Comparators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/ConversionOperators.cuh || (echo \"gpu/utils/ConversionOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/CopyUtils.cuh || (echo \"gpu/utils/CopyUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceDefs.cuh || (echo \"gpu/utils/DeviceDefs.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceTensor-inl.cuh || (echo \"gpu/utils/DeviceTensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceTensor.cuh || (echo \"gpu/utils/DeviceTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceUtils.h || (echo \"gpu/utils/DeviceUtils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceVector.cuh || (echo \"gpu/utils/DeviceVector.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Float16.cuh || (echo \"gpu/utils/Float16.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/HostTensor-inl.cuh || (echo \"gpu/utils/HostTensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/HostTensor.cuh || (echo \"gpu/utils/HostTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Limits.cuh || (echo \"gpu/utils/Limits.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/LoadStoreOperators.cuh || (echo \"gpu/utils/LoadStoreOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MathOperators.cuh || (echo \"gpu/utils/MathOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MatrixMult-inl.cuh || (echo \"gpu/utils/MatrixMult-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MatrixMult.cuh || (echo \"gpu/utils/MatrixMult.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MergeNetworkBlock.cuh || (echo \"gpu/utils/MergeNetworkBlock.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MergeNetworkUtils.cuh || (echo \"gpu/utils/MergeNetworkUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MergeNetworkWarp.cuh || (echo \"gpu/utils/MergeNetworkWarp.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/NoTypeTensor.cuh || (echo \"gpu/utils/NoTypeTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Pair.cuh || (echo \"gpu/utils/Pair.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/PtxUtils.cuh || (echo \"gpu/utils/PtxUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/ReductionOperators.cuh || (echo \"gpu/utils/ReductionOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Reductions.cuh || (echo \"gpu/utils/Reductions.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Select.cuh || (echo \"gpu/utils/Select.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/StackDeviceMemory.h || (echo \"gpu/utils/StackDeviceMemory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/StaticUtils.h || (echo \"gpu/utils/StaticUtils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Tensor-inl.cuh || (echo \"gpu/utils/Tensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Tensor.cuh || (echo \"gpu/utils/Tensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/ThrustAllocator.cuh || (echo \"gpu/utils/ThrustAllocator.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Timer.h || (echo \"gpu/utils/Timer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Transpose.cuh || (echo \"gpu/utils/Transpose.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/WarpPackedBits.cuh || (echo \"gpu/utils/WarpPackedBits.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/WarpSelectKernel.cuh || (echo \"gpu/utils/WarpSelectKernel.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/WarpShuffles.cuh || (echo \"gpu/utils/WarpShuffles.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/blockselect/BlockSelectImpl.cuh || (echo \"gpu/utils/blockselect/BlockSelectImpl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/warpselect/WarpSelectImpl.cuh || (echo \"gpu/utils/warpselect/WarpSelectImpl.cuh not found\" && exit 1)"
     ]
    }
   },
   {
    "build": {
     "run_exports": [
      "libfaiss{{ libext }}",
      "libfaiss =*=*_cuda"
     ],
     "string": "cuda112h1234567_3_cuda"
    },
    "name": "libfaiss",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "cuda_compiler_stub",
      "cmake",
      "libgomp"
     ],
     "host": [
      "libblas",
      "liblapack"
     ],
     "run_constrained": [
      "faiss-proc * cuda"
     ]
    },
    "script": "build-lib-generic.sh",
    "test": {
     "commands": [
      "test -f $PREFIX/lib/libfaiss.so",
      "test ! -f $PREFIX/lib/libfaiss.a",
      "test -f $PREFIX/include/faiss/AutoTune.h || (echo \"AutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/Clustering.h || (echo \"Clustering.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IVFlib.h || (echo \"IVFlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/Index.h || (echo \"Index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/Index2Layer.h || (echo \"Index2Layer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinary.h || (echo \"IndexBinary.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryFlat.h || (echo \"IndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryFromFloat.h || (echo \"IndexBinaryFromFloat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryHNSW.h || (echo \"IndexBinaryHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryHash.h || (echo \"IndexBinaryHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryIVF.h || (echo \"IndexBinaryIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexFlat.h || (echo \"IndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexHNSW.h || (echo \"IndexHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVF.h || (echo \"IndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFFlat.h || (echo \"IndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFPQ.h || (echo \"IndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFPQFastScan.h || (echo \"IndexIVFPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFPQR.h || (echo \"IndexIVFPQR.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFSpectralHash.h || (echo \"IndexIVFSpectralHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexLSH.h || (echo \"IndexLSH.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexLattice.h || (echo \"IndexLattice.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexPQ.h || (echo \"IndexPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexPQFastScan.h || (echo \"IndexPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexPreTransform.h || (echo \"IndexPreTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexRefine.h || (echo \"IndexRefine.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexReplicas.h || (echo \"IndexReplicas.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexScalarQuantizer.h || (echo \"IndexScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexShards.h || (echo \"IndexShards.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/MatrixStats.h || (echo \"MatrixStats.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/MetaIndexes.h || (echo \"MetaIndexes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/MetricType.h || (echo \"MetricType.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/VectorTransform.h || (echo \"VectorTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/clone_index.h || (echo \"clone_index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/index_factory.h || (echo \"index_factory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/index_io.h || (echo \"index_io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/AuxIndexStructures.h || (echo \"impl/AuxIndexStructures.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/FaissAssert.h || (echo \"impl/FaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/FaissException.h || (echo \"impl/FaissException.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/HNSW.h || (echo \"impl/HNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/PolysemousTraining.h || (echo \"impl/PolysemousTraining.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ProductQuantizer-inl.h || (echo \"impl/ProductQuantizer-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ProductQuantizer.h || (echo \"impl/ProductQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ResultHandler.h || (echo \"impl/ResultHandler.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ScalarQuantizer.h || (echo \"impl/ScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ThreadedIndex-inl.h || (echo \"impl/ThreadedIndex-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ThreadedIndex.h || (echo \"impl/ThreadedIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/io.h || (echo \"impl/io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/io_macros.h || (echo \"impl/io_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/lattice_Zn.h || (echo \"impl/lattice_Zn.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/platform_macros.h || (echo \"impl/platform_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/pq4_fast_scan.h || (echo \"impl/pq4_fast_scan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/simd_result_handlers.h || (echo \"impl/simd_result_handlers.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/BlockInvertedLists.h || (echo \"invlists/BlockInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/DirectMap.h || (echo \"invlists/DirectMap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/InvertedLists.h || (echo \"invlists/InvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/InvertedListsIOHook.h || (echo \"invlists/InvertedListsIOHook.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/AlignedTable.h || (echo \"utils/AlignedTable.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/Heap.h || (echo \"utils/Heap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/WorkerThread.h || (echo \"utils/WorkerThread.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/distances.h || (echo \"utils/distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/extra_distances.h || (echo \"utils/extra_distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/hamming-inl.h || (echo \"utils/hamming-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/hamming.h || (echo \"utils/hamming.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/ordered_key_value.h || (echo \"utils/ordered_key_value.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/partitioning.h || (echo \"utils/partitioning.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/quantize_lut.h || (echo \"utils/quantize_lut.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/random.h || (echo \"utils/random.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/simdlib.h || (echo \"utils/simdlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/simdlib_avx2.h || (echo \"utils/simdlib_avx2.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/simdlib_emulated.h || (echo \"utils/simdlib_emulated.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/utils.h || (echo \"utils/utils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/OnDiskInvertedLists.h || (echo \"invlists/OnDiskInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuAutoTune.h || (echo \"gpu/GpuAutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuCloner.h || (echo \"gpu/GpuCloner.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuClonerOptions.h || (echo \"gpu/GpuClonerOptions.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuDistance.h || (echo \"gpu/GpuDistance.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuFaissAssert.h || (echo \"gpu/GpuFaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndex.h || (echo \"gpu/GpuIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexBinaryFlat.h || (echo \"gpu/GpuIndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexFlat.h || (echo \"gpu/GpuIndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexIVF.h || (echo \"gpu/GpuIndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexIVFFlat.h || (echo \"gpu/GpuIndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexIVFPQ.h || (echo \"gpu/GpuIndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexIVFScalarQuantizer.h || (echo \"gpu/GpuIndexIVFScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndicesOptions.h || (echo \"gpu/GpuIndicesOptions.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuResources.h || (echo \"gpu/GpuResources.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/StandardGpuResources.h || (echo \"gpu/StandardGpuResources.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/BinaryDistance.cuh || (echo \"gpu/impl/BinaryDistance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/BinaryFlatIndex.cuh || (echo \"gpu/impl/BinaryFlatIndex.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/BroadcastSum.cuh || (echo \"gpu/impl/BroadcastSum.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/Distance.cuh || (echo \"gpu/impl/Distance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/DistanceUtils.cuh || (echo \"gpu/impl/DistanceUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/FlatIndex.cuh || (echo \"gpu/impl/FlatIndex.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/GeneralDistance.cuh || (echo \"gpu/impl/GeneralDistance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/GpuScalarQuantizer.cuh || (echo \"gpu/impl/GpuScalarQuantizer.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFAppend.cuh || (echo \"gpu/impl/IVFAppend.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFBase.cuh || (echo \"gpu/impl/IVFBase.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFFlat.cuh || (echo \"gpu/impl/IVFFlat.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFFlatScan.cuh || (echo \"gpu/impl/IVFFlatScan.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFInterleaved.cuh || (echo \"gpu/impl/IVFInterleaved.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFPQ.cuh || (echo \"gpu/impl/IVFPQ.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFUtils.cuh || (echo \"gpu/impl/IVFUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/InterleavedCodes.h || (echo \"gpu/impl/InterleavedCodes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/L2Norm.cuh || (echo \"gpu/impl/L2Norm.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/L2Select.cuh || (echo \"gpu/impl/L2Select.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQCodeDistances-inl.cuh || (echo \"gpu/impl/PQCodeDistances-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQCodeDistances.cuh || (echo \"gpu/impl/PQCodeDistances.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQCodeLoad.cuh || (echo \"gpu/impl/PQCodeLoad.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQScanMultiPassNoPrecomputed-inl.cuh || (echo \"gpu/impl/PQScanMultiPassNoPrecomputed-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQScanMultiPassNoPrecomputed.cuh || (echo \"gpu/impl/PQScanMultiPassNoPrecomputed.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQScanMultiPassPrecomputed.cuh || (echo \"gpu/impl/PQScanMultiPassPrecomputed.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/RemapIndices.h || (echo \"gpu/impl/RemapIndices.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/VectorResidual.cuh || (echo \"gpu/impl/VectorResidual.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/BlockSelectKernel.cuh || (echo \"gpu/utils/BlockSelectKernel.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Comparators.cuh || (echo \"gpu/utils/Comparators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/ConversionOperators.cuh || (echo \"gpu/utils/ConversionOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/CopyUtils.cuh || (echo \"gpu/utils/CopyUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceDefs.cuh || (echo \"gpu/utils/DeviceDefs.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceTensor-inl.cuh || (echo \"gpu/utils/DeviceTensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceTensor.cuh || (echo \"gpu/utils/DeviceTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceUtils.h || (echo \"gpu/utils/DeviceUtils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceVector.cuh || (echo \"gpu/utils/DeviceVector.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Float16.cuh || (echo \"gpu/utils/Float16.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/HostTensor-inl.cuh || (echo \"gpu/utils/HostTensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/HostTensor.cuh || (echo \"gpu/utils/HostTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Limits.cuh || (echo \"gpu/utils/Limits.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/LoadStoreOperators.cuh || (echo \"gpu/utils/LoadStoreOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MathOperators.cuh || (echo \"gpu/utils/MathOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MatrixMult-inl.cuh || (echo \"gpu/utils/MatrixMult-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MatrixMult.cuh || (echo \"gpu/utils/MatrixMult.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MergeNetworkBlock.cuh || (echo \"gpu/utils/MergeNetworkBlock.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MergeNetworkUtils.cuh || (echo \"gpu/utils/MergeNetworkUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MergeNetworkWarp.cuh || (echo \"gpu/utils/MergeNetworkWarp.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/NoTypeTensor.cuh || (echo \"gpu/utils/NoTypeTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Pair.cuh || (echo \"gpu/utils/Pair.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/PtxUtils.cuh || (echo \"gpu/utils/PtxUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/ReductionOperators.cuh || (echo \"gpu/utils/ReductionOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Reductions.cuh || (echo \"gpu/utils/Reductions.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Select.cuh || (echo \"gpu/utils/Select.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/StackDeviceMemory.h || (echo \"gpu/utils/StackDeviceMemory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/StaticUtils.h || (echo \"gpu/utils/StaticUtils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Tensor-inl.cuh || (echo \"gpu/utils/Tensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Tensor.cuh || (echo \"gpu/utils/Tensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/ThrustAllocator.cuh || (echo \"gpu/utils/ThrustAllocator.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Timer.h || (echo \"gpu/utils/Timer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Transpose.cuh || (echo \"gpu/utils/Transpose.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/WarpPackedBits.cuh || (echo \"gpu/utils/WarpPackedBits.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/WarpSelectKernel.cuh || (echo \"gpu/utils/WarpSelectKernel.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/WarpShuffles.cuh || (echo \"gpu/utils/WarpShuffles.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/blockselect/BlockSelectImpl.cuh || (echo \"gpu/utils/blockselect/BlockSelectImpl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/warpselect/WarpSelectImpl.cuh || (echo \"gpu/utils/warpselect/WarpSelectImpl.cuh not found\" && exit 1)"
     ]
    }
   },
   {
    "build": {
     "string": "py39cuda112h1234567_3_cuda"
    },
    "name": "faiss",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "cuda_compiler_stub",
      "swig",
      "cmake",
      "libgomp"
     ],
     "host": [
      "python",
      "pip",
      "numpy",
      "libfaiss =1.7.0=*_cuda",
      "libfaiss-avx2 =1.7.0=*_cuda",
      "libblas",
      "liblapack"
     ],
     "run": [
      "python",
      "libfaiss =1.7.0=*_cuda",
      "libfaiss-avx2 =1.7.0=*_cuda",
      "numpy"
     ],
     "run_constrained": [
      "faiss-proc * cuda"
     ]
    },
    "script": "build-pkg.sh",
    "test": {
     "commands": [
      "python -c \"from numpy.core._multiarray_umath import __cpu_features__; print(f'Testing version with AVX2-support - ' + str(__cpu_features__['AVX2']))\"",
      "pytest tests --log-file-level=INFO --log-file=log.txt",
      "cat log.txt && sleep 2",
      "python -c \"q = open('log.txt').readlines(); import sys; sys.exit(0 if 'Successfully loaded faiss with AVX2 support.' in [x[35:-1] for x in q] else 1)\"",
      "export NPY_DISABLE_CPU_FEATURES=AVX2",
      "python -c \"from numpy.core._multiarray_umath import __cpu_features__; print(f'Testing version with AVX2-support - ' + str(__cpu_features__['AVX2']))\"",
      "pytest tests --log-file-level=INFO --log-file=log.txt",
      "cat log.txt && sleep 2",
      "python -c \"q = open('log.txt').readlines(); import sys; sys.exit(0 if 'Successfully loaded faiss.' in [x[35:-1] for x in q] else 1)\""
     ],
     "imports": [
      "faiss"
     ],
     "requires": [
      "blas =*=mkl",
      "scipy",
      "pytest"
     ],
     "source_files": [
      "tests/"
     ]
    }
   },
   {
    "build": {
     "skip": true
    },
    "name": "faiss-cpu",
    "requirements": {
     "run": [
      "faiss =1.7.0=*_cpu"
     ]
    },
    "test": {
     "imports": [
      "faiss"
     ]
    }
   },
   {
    "build": null,
    "name": "faiss-gpu",
    "requirements": {
     "run": [
      "faiss =1.7.0=*_cuda"
     ]
    },
    "test": {
     "imports": [
      "faiss"
     ]
    }
   },
   {
    "build": {
     "string": "cuda"
    },
    "name": "faiss-proc",
    "test": {
     "commands": [
      "exit 0"
     ]
    },
    "version": "1.0.0"
   },
   {
    "build": {
     "run_exports": [
      "libfaiss{{ libext }}",
      "libfaiss_avx2 =*=*_cuda"
     ],
     "string": "cuda111h1234567_3_cuda"
    },
    "name": "libfaiss-avx2",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "cuda_compiler_stub",
      "cmake",
      "libgomp"
     ],
     "host": [
      "libblas",
      "liblapack"
     ],
     "run_constrained": [
      "faiss-proc * cuda"
     ]
    },
    "script": "build-lib-avx2.sh",
    "test": {
     "commands": [
      "test -f $PREFIX/lib/libfaiss_avx2.so",
      "test ! -f $PREFIX/lib/libfaiss_avx2.a",
      "test -f $PREFIX/include/faiss_avx2/AutoTune.h || (echo \"AutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/Clustering.h || (echo \"Clustering.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IVFlib.h || (echo \"IVFlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/Index.h || (echo \"Index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/Index2Layer.h || (echo \"Index2Layer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinary.h || (echo \"IndexBinary.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryFlat.h || (echo \"IndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryFromFloat.h || (echo \"IndexBinaryFromFloat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryHNSW.h || (echo \"IndexBinaryHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryHash.h || (echo \"IndexBinaryHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryIVF.h || (echo \"IndexBinaryIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexFlat.h || (echo \"IndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexHNSW.h || (echo \"IndexHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVF.h || (echo \"IndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFFlat.h || (echo \"IndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFPQ.h || (echo \"IndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFPQFastScan.h || (echo \"IndexIVFPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFPQR.h || (echo \"IndexIVFPQR.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFSpectralHash.h || (echo \"IndexIVFSpectralHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexLSH.h || (echo \"IndexLSH.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexLattice.h || (echo \"IndexLattice.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexPQ.h || (echo \"IndexPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexPQFastScan.h || (echo \"IndexPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexPreTransform.h || (echo \"IndexPreTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexRefine.h || (echo \"IndexRefine.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexReplicas.h || (echo \"IndexReplicas.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexScalarQuantizer.h || (echo \"IndexScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexShards.h || (echo \"IndexShards.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/MatrixStats.h || (echo \"MatrixStats.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/MetaIndexes.h || (echo \"MetaIndexes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/MetricType.h || (echo \"MetricType.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/VectorTransform.h || (echo \"VectorTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/clone_index.h || (echo \"clone_index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/index_factory.h || (echo \"index_factory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/index_io.h || (echo \"index_io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/AuxIndexStructures.h || (echo \"impl/AuxIndexStructures.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/FaissAssert.h || (echo \"impl/FaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/FaissException.h || (echo \"impl/FaissException.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/HNSW.h || (echo \"impl/HNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/PolysemousTraining.h || (echo \"impl/PolysemousTraining.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ProductQuantizer-inl.h || (echo \"impl/ProductQuantizer-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ProductQuantizer.h || (echo \"impl/ProductQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ResultHandler.h || (echo \"impl/ResultHandler.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ScalarQuantizer.h || (echo \"impl/ScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ThreadedIndex-inl.h || (echo \"impl/ThreadedIndex-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ThreadedIndex.h || (echo \"impl/ThreadedIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/io.h || (echo \"impl/io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/io_macros.h || (echo \"impl/io_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/lattice_Zn.h || (echo \"impl/lattice_Zn.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/platform_macros.h || (echo \"impl/platform_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/pq4_fast_scan.h || (echo \"impl/pq4_fast_scan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/simd_result_handlers.h || (echo \"impl/simd_result_handlers.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/BlockInvertedLists.h || (echo \"invlists/BlockInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/DirectMap.h || (echo \"invlists/DirectMap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/InvertedLists.h || (echo \"invlists/InvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/InvertedListsIOHook.h || (echo \"invlists/InvertedListsIOHook.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/AlignedTable.h || (echo \"utils/AlignedTable.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/Heap.h || (echo \"utils/Heap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/WorkerThread.h || (echo \"utils/WorkerThread.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/distances.h || (echo \"utils/distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/extra_distances.h || (echo \"utils/extra_distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/hamming-inl.h || (echo \"utils/hamming-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/hamming.h || (echo \"utils/hamming.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/ordered_key_value.h || (echo \"utils/ordered_key_value.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/partitioning.h || (echo \"utils/partitioning.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/quantize_lut.h || (echo \"utils/quantize_lut.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/random.h || (echo \"utils/random.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/simdlib.h || (echo \"utils/simdlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/simdlib_avx2.h || (echo \"utils/simdlib_avx2.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/simdlib_emulated.h || (echo \"utils/simdlib_emulated.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/utils.h || (echo \"utils/utils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/OnDiskInvertedLists.h || (echo \"invlists/OnDiskInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuAutoTune.h || (echo \"gpu/GpuAutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuCloner.h || (echo \"gpu/GpuCloner.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuClonerOptions.h || (echo \"gpu/GpuClonerOptions.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuDistance.h || (echo \"gpu/GpuDistance.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuFaissAssert.h || (echo \"gpu/GpuFaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndex.h || (echo \"gpu/GpuIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexBinaryFlat.h || (echo \"gpu/GpuIndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexFlat.h || (echo \"gpu/GpuIndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexIVF.h || (echo \"gpu/GpuIndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexIVFFlat.h || (echo \"gpu/GpuIndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexIVFPQ.h || (echo \"gpu/GpuIndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndexIVFScalarQuantizer.h || (echo \"gpu/GpuIndexIVFScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuIndicesOptions.h || (echo \"gpu/GpuIndicesOptions.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/GpuResources.h || (echo \"gpu/GpuResources.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/StandardGpuResources.h || (echo \"gpu/StandardGpuResources.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/BinaryDistance.cuh || (echo \"gpu/impl/BinaryDistance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/BinaryFlatIndex.cuh || (echo \"gpu/impl/BinaryFlatIndex.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/BroadcastSum.cuh || (echo \"gpu/impl/BroadcastSum.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/Distance.cuh || (echo \"gpu/impl/Distance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/DistanceUtils.cuh || (echo \"gpu/impl/DistanceUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/FlatIndex.cuh || (echo \"gpu/impl/FlatIndex.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/GeneralDistance.cuh || (echo \"gpu/impl/GeneralDistance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/GpuScalarQuantizer.cuh || (echo \"gpu/impl/GpuScalarQuantizer.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFAppend.cuh || (echo \"gpu/impl/IVFAppend.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFBase.cuh || (echo \"gpu/impl/IVFBase.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFFlat.cuh || (echo \"gpu/impl/IVFFlat.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFFlatScan.cuh || (echo \"gpu/impl/IVFFlatScan.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFInterleaved.cuh || (echo \"gpu/impl/IVFInterleaved.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFPQ.cuh || (echo \"gpu/impl/IVFPQ.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/IVFUtils.cuh || (echo \"gpu/impl/IVFUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/InterleavedCodes.h || (echo \"gpu/impl/InterleavedCodes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/L2Norm.cuh || (echo \"gpu/impl/L2Norm.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/L2Select.cuh || (echo \"gpu/impl/L2Select.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQCodeDistances-inl.cuh || (echo \"gpu/impl/PQCodeDistances-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQCodeDistances.cuh || (echo \"gpu/impl/PQCodeDistances.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQCodeLoad.cuh || (echo \"gpu/impl/PQCodeLoad.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQScanMultiPassNoPrecomputed-inl.cuh || (echo \"gpu/impl/PQScanMultiPassNoPrecomputed-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQScanMultiPassNoPrecomputed.cuh || (echo \"gpu/impl/PQScanMultiPassNoPrecomputed.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/PQScanMultiPassPrecomputed.cuh || (echo \"gpu/impl/PQScanMultiPassPrecomputed.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/RemapIndices.h || (echo \"gpu/impl/RemapIndices.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/impl/VectorResidual.cuh || (echo \"gpu/impl/VectorResidual.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/BlockSelectKernel.cuh || (echo \"gpu/utils/BlockSelectKernel.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Comparators.cuh || (echo \"gpu/utils/Comparators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/ConversionOperators.cuh || (echo \"gpu/utils/ConversionOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/CopyUtils.cuh || (echo \"gpu/utils/CopyUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceDefs.cuh || (echo \"gpu/utils/DeviceDefs.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceTensor-inl.cuh || (echo \"gpu/utils/DeviceTensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceTensor.cuh || (echo \"gpu/utils/DeviceTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceUtils.h || (echo \"gpu/utils/DeviceUtils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/DeviceVector.cuh || (echo \"gpu/utils/DeviceVector.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Float16.cuh || (echo \"gpu/utils/Float16.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/HostTensor-inl.cuh || (echo \"gpu/utils/HostTensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/HostTensor.cuh || (echo \"gpu/utils/HostTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Limits.cuh || (echo \"gpu/utils/Limits.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/LoadStoreOperators.cuh || (echo \"gpu/utils/LoadStoreOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MathOperators.cuh || (echo \"gpu/utils/MathOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MatrixMult-inl.cuh || (echo \"gpu/utils/MatrixMult-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MatrixMult.cuh || (echo \"gpu/utils/MatrixMult.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MergeNetworkBlock.cuh || (echo \"gpu/utils/MergeNetworkBlock.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MergeNetworkUtils.cuh || (echo \"gpu/utils/MergeNetworkUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/MergeNetworkWarp.cuh || (echo \"gpu/utils/MergeNetworkWarp.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/NoTypeTensor.cuh || (echo \"gpu/utils/NoTypeTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Pair.cuh || (echo \"gpu/utils/Pair.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/PtxUtils.cuh || (echo \"gpu/utils/PtxUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/ReductionOperators.cuh || (echo \"gpu/utils/ReductionOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Reductions.cuh || (echo \"gpu/utils/Reductions.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Select.cuh || (echo \"gpu/utils/Select.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/StackDeviceMemory.h || (echo \"gpu/utils/StackDeviceMemory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/StaticUtils.h || (echo \"gpu/utils/StaticUtils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Tensor-inl.cuh || (echo \"gpu/utils/Tensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Tensor.cuh || (echo \"gpu/utils/Tensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/ThrustAllocator.cuh || (echo \"gpu/utils/ThrustAllocator.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Timer.h || (echo \"gpu/utils/Timer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/Transpose.cuh || (echo \"gpu/utils/Transpose.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/WarpPackedBits.cuh || (echo \"gpu/utils/WarpPackedBits.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/WarpSelectKernel.cuh || (echo \"gpu/utils/WarpSelectKernel.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/WarpShuffles.cuh || (echo \"gpu/utils/WarpShuffles.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/blockselect/BlockSelectImpl.cuh || (echo \"gpu/utils/blockselect/BlockSelectImpl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/gpu/utils/warpselect/WarpSelectImpl.cuh || (echo \"gpu/utils/warpselect/WarpSelectImpl.cuh not found\" && exit 1)"
     ]
    }
   },
   {
    "build": {
     "run_exports": [
      "libfaiss{{ libext }}",
      "libfaiss =*=*_cuda"
     ],
     "string": "cuda111h1234567_3_cuda"
    },
    "name": "libfaiss",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "cuda_compiler_stub",
      "cmake",
      "libgomp"
     ],
     "host": [
      "libblas",
      "liblapack"
     ],
     "run_constrained": [
      "faiss-proc * cuda"
     ]
    },
    "script": "build-lib-generic.sh",
    "test": {
     "commands": [
      "test -f $PREFIX/lib/libfaiss.so",
      "test ! -f $PREFIX/lib/libfaiss.a",
      "test -f $PREFIX/include/faiss/AutoTune.h || (echo \"AutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/Clustering.h || (echo \"Clustering.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IVFlib.h || (echo \"IVFlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/Index.h || (echo \"Index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/Index2Layer.h || (echo \"Index2Layer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinary.h || (echo \"IndexBinary.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryFlat.h || (echo \"IndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryFromFloat.h || (echo \"IndexBinaryFromFloat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryHNSW.h || (echo \"IndexBinaryHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryHash.h || (echo \"IndexBinaryHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryIVF.h || (echo \"IndexBinaryIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexFlat.h || (echo \"IndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexHNSW.h || (echo \"IndexHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVF.h || (echo \"IndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFFlat.h || (echo \"IndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFPQ.h || (echo \"IndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFPQFastScan.h || (echo \"IndexIVFPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFPQR.h || (echo \"IndexIVFPQR.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFSpectralHash.h || (echo \"IndexIVFSpectralHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexLSH.h || (echo \"IndexLSH.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexLattice.h || (echo \"IndexLattice.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexPQ.h || (echo \"IndexPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexPQFastScan.h || (echo \"IndexPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexPreTransform.h || (echo \"IndexPreTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexRefine.h || (echo \"IndexRefine.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexReplicas.h || (echo \"IndexReplicas.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexScalarQuantizer.h || (echo \"IndexScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexShards.h || (echo \"IndexShards.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/MatrixStats.h || (echo \"MatrixStats.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/MetaIndexes.h || (echo \"MetaIndexes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/MetricType.h || (echo \"MetricType.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/VectorTransform.h || (echo \"VectorTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/clone_index.h || (echo \"clone_index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/index_factory.h || (echo \"index_factory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/index_io.h || (echo \"index_io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/AuxIndexStructures.h || (echo \"impl/AuxIndexStructures.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/FaissAssert.h || (echo \"impl/FaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/FaissException.h || (echo \"impl/FaissException.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/HNSW.h || (echo \"impl/HNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/PolysemousTraining.h || (echo \"impl/PolysemousTraining.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ProductQuantizer-inl.h || (echo \"impl/ProductQuantizer-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ProductQuantizer.h || (echo \"impl/ProductQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ResultHandler.h || (echo \"impl/ResultHandler.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ScalarQuantizer.h || (echo \"impl/ScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ThreadedIndex-inl.h || (echo \"impl/ThreadedIndex-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ThreadedIndex.h || (echo \"impl/ThreadedIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/io.h || (echo \"impl/io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/io_macros.h || (echo \"impl/io_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/lattice_Zn.h || (echo \"impl/lattice_Zn.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/platform_macros.h || (echo \"impl/platform_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/pq4_fast_scan.h || (echo \"impl/pq4_fast_scan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/simd_result_handlers.h || (echo \"impl/simd_result_handlers.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/BlockInvertedLists.h || (echo \"invlists/BlockInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/DirectMap.h || (echo \"invlists/DirectMap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/InvertedLists.h || (echo \"invlists/InvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/InvertedListsIOHook.h || (echo \"invlists/InvertedListsIOHook.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/AlignedTable.h || (echo \"utils/AlignedTable.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/Heap.h || (echo \"utils/Heap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/WorkerThread.h || (echo \"utils/WorkerThread.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/distances.h || (echo \"utils/distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/extra_distances.h || (echo \"utils/extra_distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/hamming-inl.h || (echo \"utils/hamming-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/hamming.h || (echo \"utils/hamming.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/ordered_key_value.h || (echo \"utils/ordered_key_value.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/partitioning.h || (echo \"utils/partitioning.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/quantize_lut.h || (echo \"utils/quantize_lut.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/random.h || (echo \"utils/random.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/simdlib.h || (echo \"utils/simdlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/simdlib_avx2.h || (echo \"utils/simdlib_avx2.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/simdlib_emulated.h || (echo \"utils/simdlib_emulated.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/utils.h || (echo \"utils/utils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/OnDiskInvertedLists.h || (echo \"invlists/OnDiskInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuAutoTune.h || (echo \"gpu/GpuAutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuCloner.h || (echo \"gpu/GpuCloner.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuClonerOptions.h || (echo \"gpu/GpuClonerOptions.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuDistance.h || (echo \"gpu/GpuDistance.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuFaissAssert.h || (echo \"gpu/GpuFaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndex.h || (echo \"gpu/GpuIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexBinaryFlat.h || (echo \"gpu/GpuIndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexFlat.h || (echo \"gpu/GpuIndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexIVF.h || (echo \"gpu/GpuIndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexIVFFlat.h || (echo \"gpu/GpuIndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexIVFPQ.h || (echo \"gpu/GpuIndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndexIVFScalarQuantizer.h || (echo \"gpu/GpuIndexIVFScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuIndicesOptions.h || (echo \"gpu/GpuIndicesOptions.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/GpuResources.h || (echo \"gpu/GpuResources.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/StandardGpuResources.h || (echo \"gpu/StandardGpuResources.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/BinaryDistance.cuh || (echo \"gpu/impl/BinaryDistance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/BinaryFlatIndex.cuh || (echo \"gpu/impl/BinaryFlatIndex.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/BroadcastSum.cuh || (echo \"gpu/impl/BroadcastSum.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/Distance.cuh || (echo \"gpu/impl/Distance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/DistanceUtils.cuh || (echo \"gpu/impl/DistanceUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/FlatIndex.cuh || (echo \"gpu/impl/FlatIndex.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/GeneralDistance.cuh || (echo \"gpu/impl/GeneralDistance.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/GpuScalarQuantizer.cuh || (echo \"gpu/impl/GpuScalarQuantizer.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFAppend.cuh || (echo \"gpu/impl/IVFAppend.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFBase.cuh || (echo \"gpu/impl/IVFBase.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFFlat.cuh || (echo \"gpu/impl/IVFFlat.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFFlatScan.cuh || (echo \"gpu/impl/IVFFlatScan.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFInterleaved.cuh || (echo \"gpu/impl/IVFInterleaved.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFPQ.cuh || (echo \"gpu/impl/IVFPQ.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/IVFUtils.cuh || (echo \"gpu/impl/IVFUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/InterleavedCodes.h || (echo \"gpu/impl/InterleavedCodes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/L2Norm.cuh || (echo \"gpu/impl/L2Norm.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/L2Select.cuh || (echo \"gpu/impl/L2Select.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQCodeDistances-inl.cuh || (echo \"gpu/impl/PQCodeDistances-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQCodeDistances.cuh || (echo \"gpu/impl/PQCodeDistances.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQCodeLoad.cuh || (echo \"gpu/impl/PQCodeLoad.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQScanMultiPassNoPrecomputed-inl.cuh || (echo \"gpu/impl/PQScanMultiPassNoPrecomputed-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQScanMultiPassNoPrecomputed.cuh || (echo \"gpu/impl/PQScanMultiPassNoPrecomputed.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/PQScanMultiPassPrecomputed.cuh || (echo \"gpu/impl/PQScanMultiPassPrecomputed.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/RemapIndices.h || (echo \"gpu/impl/RemapIndices.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/impl/VectorResidual.cuh || (echo \"gpu/impl/VectorResidual.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/BlockSelectKernel.cuh || (echo \"gpu/utils/BlockSelectKernel.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Comparators.cuh || (echo \"gpu/utils/Comparators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/ConversionOperators.cuh || (echo \"gpu/utils/ConversionOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/CopyUtils.cuh || (echo \"gpu/utils/CopyUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceDefs.cuh || (echo \"gpu/utils/DeviceDefs.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceTensor-inl.cuh || (echo \"gpu/utils/DeviceTensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceTensor.cuh || (echo \"gpu/utils/DeviceTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceUtils.h || (echo \"gpu/utils/DeviceUtils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/DeviceVector.cuh || (echo \"gpu/utils/DeviceVector.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Float16.cuh || (echo \"gpu/utils/Float16.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/HostTensor-inl.cuh || (echo \"gpu/utils/HostTensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/HostTensor.cuh || (echo \"gpu/utils/HostTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Limits.cuh || (echo \"gpu/utils/Limits.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/LoadStoreOperators.cuh || (echo \"gpu/utils/LoadStoreOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MathOperators.cuh || (echo \"gpu/utils/MathOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MatrixMult-inl.cuh || (echo \"gpu/utils/MatrixMult-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MatrixMult.cuh || (echo \"gpu/utils/MatrixMult.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MergeNetworkBlock.cuh || (echo \"gpu/utils/MergeNetworkBlock.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MergeNetworkUtils.cuh || (echo \"gpu/utils/MergeNetworkUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/MergeNetworkWarp.cuh || (echo \"gpu/utils/MergeNetworkWarp.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/NoTypeTensor.cuh || (echo \"gpu/utils/NoTypeTensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Pair.cuh || (echo \"gpu/utils/Pair.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/PtxUtils.cuh || (echo \"gpu/utils/PtxUtils.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/ReductionOperators.cuh || (echo \"gpu/utils/ReductionOperators.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Reductions.cuh || (echo \"gpu/utils/Reductions.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Select.cuh || (echo \"gpu/utils/Select.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/StackDeviceMemory.h || (echo \"gpu/utils/StackDeviceMemory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/StaticUtils.h || (echo \"gpu/utils/StaticUtils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Tensor-inl.cuh || (echo \"gpu/utils/Tensor-inl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Tensor.cuh || (echo \"gpu/utils/Tensor.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/ThrustAllocator.cuh || (echo \"gpu/utils/ThrustAllocator.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Timer.h || (echo \"gpu/utils/Timer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/Transpose.cuh || (echo \"gpu/utils/Transpose.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/WarpPackedBits.cuh || (echo \"gpu/utils/WarpPackedBits.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/WarpSelectKernel.cuh || (echo \"gpu/utils/WarpSelectKernel.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/WarpShuffles.cuh || (echo \"gpu/utils/WarpShuffles.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/blockselect/BlockSelectImpl.cuh || (echo \"gpu/utils/blockselect/BlockSelectImpl.cuh not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/gpu/utils/warpselect/WarpSelectImpl.cuh || (echo \"gpu/utils/warpselect/WarpSelectImpl.cuh not found\" && exit 1)"
     ]
    }
   },
   {
    "build": {
     "string": "py39cuda111h1234567_3_cuda"
    },
    "name": "faiss",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "cuda_compiler_stub",
      "swig",
      "cmake",
      "libgomp"
     ],
     "host": [
      "python",
      "pip",
      "numpy",
      "libfaiss =1.7.0=*_cuda",
      "libfaiss-avx2 =1.7.0=*_cuda",
      "libblas",
      "liblapack"
     ],
     "run": [
      "python",
      "libfaiss =1.7.0=*_cuda",
      "libfaiss-avx2 =1.7.0=*_cuda",
      "numpy"
     ],
     "run_constrained": [
      "faiss-proc * cuda"
     ]
    },
    "script": "build-pkg.sh",
    "test": {
     "commands": [
      "python -c \"from numpy.core._multiarray_umath import __cpu_features__; print(f'Testing version with AVX2-support - ' + str(__cpu_features__['AVX2']))\"",
      "pytest tests --log-file-level=INFO --log-file=log.txt",
      "cat log.txt && sleep 2",
      "python -c \"q = open('log.txt').readlines(); import sys; sys.exit(0 if 'Successfully loaded faiss with AVX2 support.' in [x[35:-1] for x in q] else 1)\"",
      "export NPY_DISABLE_CPU_FEATURES=AVX2",
      "python -c \"from numpy.core._multiarray_umath import __cpu_features__; print(f'Testing version with AVX2-support - ' + str(__cpu_features__['AVX2']))\"",
      "pytest tests --log-file-level=INFO --log-file=log.txt",
      "cat log.txt && sleep 2",
      "python -c \"q = open('log.txt').readlines(); import sys; sys.exit(0 if 'Successfully loaded faiss.' in [x[35:-1] for x in q] else 1)\""
     ],
     "imports": [
      "faiss"
     ],
     "requires": [
      "blas =*=mkl",
      "scipy",
      "pytest"
     ],
     "source_files": [
      "tests/"
     ]
    }
   },
   {
    "build": {
     "skip": true
    },
    "name": "faiss-cpu",
    "requirements": {
     "run": [
      "faiss =1.7.0=*_cpu"
     ]
    },
    "test": {
     "imports": [
      "faiss"
     ]
    }
   },
   {
    "build": null,
    "name": "faiss-gpu",
    "requirements": {
     "run": [
      "faiss =1.7.0=*_cuda"
     ]
    },
    "test": {
     "imports": [
      "faiss"
     ]
    }
   },
   {
    "build": {
     "string": "cpu"
    },
    "name": "faiss-proc",
    "test": {
     "commands": [
      "exit 0"
     ]
    },
    "version": "1.0.0"
   },
   {
    "build": {
     "run_exports": [
      "libfaiss{{ libext }}",
      "libfaiss_avx2 =*=*_cpu"
     ],
     "string": "h1234567_3_cpu"
    },
    "name": "libfaiss-avx2",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "cmake",
      "llvm-openmp"
     ],
     "host": [
      "libblas",
      "liblapack"
     ],
     "run_constrained": [
      "faiss-proc * cpu"
     ]
    },
    "script": "build-lib-avx2.sh",
    "test": {
     "commands": [
      "test -f $PREFIX/lib/libfaiss_avx2.dylib",
      "test ! -f $PREFIX/lib/libfaiss_avx2.a",
      "test -f $PREFIX/include/faiss_avx2/AutoTune.h || (echo \"AutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/Clustering.h || (echo \"Clustering.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IVFlib.h || (echo \"IVFlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/Index.h || (echo \"Index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/Index2Layer.h || (echo \"Index2Layer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinary.h || (echo \"IndexBinary.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryFlat.h || (echo \"IndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryFromFloat.h || (echo \"IndexBinaryFromFloat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryHNSW.h || (echo \"IndexBinaryHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryHash.h || (echo \"IndexBinaryHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryIVF.h || (echo \"IndexBinaryIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexFlat.h || (echo \"IndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexHNSW.h || (echo \"IndexHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVF.h || (echo \"IndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFFlat.h || (echo \"IndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFPQ.h || (echo \"IndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFPQFastScan.h || (echo \"IndexIVFPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFPQR.h || (echo \"IndexIVFPQR.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFSpectralHash.h || (echo \"IndexIVFSpectralHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexLSH.h || (echo \"IndexLSH.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexLattice.h || (echo \"IndexLattice.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexPQ.h || (echo \"IndexPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexPQFastScan.h || (echo \"IndexPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexPreTransform.h || (echo \"IndexPreTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexRefine.h || (echo \"IndexRefine.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexReplicas.h || (echo \"IndexReplicas.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexScalarQuantizer.h || (echo \"IndexScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexShards.h || (echo \"IndexShards.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/MatrixStats.h || (echo \"MatrixStats.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/MetaIndexes.h || (echo \"MetaIndexes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/MetricType.h || (echo \"MetricType.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/VectorTransform.h || (echo \"VectorTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/clone_index.h || (echo \"clone_index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/index_factory.h || (echo \"index_factory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/index_io.h || (echo \"index_io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/AuxIndexStructures.h || (echo \"impl/AuxIndexStructures.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/FaissAssert.h || (echo \"impl/FaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/FaissException.h || (echo \"impl/FaissException.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/HNSW.h || (echo \"impl/HNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/PolysemousTraining.h || (echo \"impl/PolysemousTraining.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ProductQuantizer-inl.h || (echo \"impl/ProductQuantizer-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ProductQuantizer.h || (echo \"impl/ProductQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ResultHandler.h || (echo \"impl/ResultHandler.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ScalarQuantizer.h || (echo \"impl/ScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ThreadedIndex-inl.h || (echo \"impl/ThreadedIndex-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ThreadedIndex.h || (echo \"impl/ThreadedIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/io.h || (echo \"impl/io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/io_macros.h || (echo \"impl/io_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/lattice_Zn.h || (echo \"impl/lattice_Zn.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/platform_macros.h || (echo \"impl/platform_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/pq4_fast_scan.h || (echo \"impl/pq4_fast_scan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/simd_result_handlers.h || (echo \"impl/simd_result_handlers.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/BlockInvertedLists.h || (echo \"invlists/BlockInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/DirectMap.h || (echo \"invlists/DirectMap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/InvertedLists.h || (echo \"invlists/InvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/InvertedListsIOHook.h || (echo \"invlists/InvertedListsIOHook.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/AlignedTable.h || (echo \"utils/AlignedTable.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/Heap.h || (echo \"utils/Heap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/WorkerThread.h || (echo \"utils/WorkerThread.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/distances.h || (echo \"utils/distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/extra_distances.h || (echo \"utils/extra_distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/hamming-inl.h || (echo \"utils/hamming-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/hamming.h || (echo \"utils/hamming.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/ordered_key_value.h || (echo \"utils/ordered_key_value.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/partitioning.h || (echo \"utils/partitioning.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/quantize_lut.h || (echo \"utils/quantize_lut.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/random.h || (echo \"utils/random.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/simdlib.h || (echo \"utils/simdlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/simdlib_avx2.h || (echo \"utils/simdlib_avx2.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/simdlib_emulated.h || (echo \"utils/simdlib_emulated.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/utils.h || (echo \"utils/utils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/OnDiskInvertedLists.h || (echo \"invlists/OnDiskInvertedLists.h not found\" && exit 1)"
     ]
    }
   },
   {
    "build": {
     "run_exports": [
      "libfaiss{{ libext }}",
      "libfaiss =*=*_cpu"
     ],
     "string": "h1234567_3_cpu"
    },
    "name": "libfaiss",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "cmake",
      "llvm-openmp"
     ],
     "host": [
      "libblas",
      "liblapack"
     ],
     "run_constrained": [
      "faiss-proc * cpu"
     ]
    },
    "script": "build-lib-generic.sh",
    "test": {
     "commands": [
      "test -f $PREFIX/lib/libfaiss.dylib",
      "test ! -f $PREFIX/lib/libfaiss.a",
      "test -f $PREFIX/include/faiss/AutoTune.h || (echo \"AutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/Clustering.h || (echo \"Clustering.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IVFlib.h || (echo \"IVFlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/Index.h || (echo \"Index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/Index2Layer.h || (echo \"Index2Layer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinary.h || (echo \"IndexBinary.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryFlat.h || (echo \"IndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryFromFloat.h || (echo \"IndexBinaryFromFloat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryHNSW.h || (echo \"IndexBinaryHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryHash.h || (echo \"IndexBinaryHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryIVF.h || (echo \"IndexBinaryIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexFlat.h || (echo \"IndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexHNSW.h || (echo \"IndexHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVF.h || (echo \"IndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFFlat.h || (echo \"IndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFPQ.h || (echo \"IndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFPQFastScan.h || (echo \"IndexIVFPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFPQR.h || (echo \"IndexIVFPQR.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFSpectralHash.h || (echo \"IndexIVFSpectralHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexLSH.h || (echo \"IndexLSH.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexLattice.h || (echo \"IndexLattice.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexPQ.h || (echo \"IndexPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexPQFastScan.h || (echo \"IndexPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexPreTransform.h || (echo \"IndexPreTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexRefine.h || (echo \"IndexRefine.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexReplicas.h || (echo \"IndexReplicas.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexScalarQuantizer.h || (echo \"IndexScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexShards.h || (echo \"IndexShards.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/MatrixStats.h || (echo \"MatrixStats.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/MetaIndexes.h || (echo \"MetaIndexes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/MetricType.h || (echo \"MetricType.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/VectorTransform.h || (echo \"VectorTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/clone_index.h || (echo \"clone_index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/index_factory.h || (echo \"index_factory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/index_io.h || (echo \"index_io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/AuxIndexStructures.h || (echo \"impl/AuxIndexStructures.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/FaissAssert.h || (echo \"impl/FaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/FaissException.h || (echo \"impl/FaissException.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/HNSW.h || (echo \"impl/HNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/PolysemousTraining.h || (echo \"impl/PolysemousTraining.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ProductQuantizer-inl.h || (echo \"impl/ProductQuantizer-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ProductQuantizer.h || (echo \"impl/ProductQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ResultHandler.h || (echo \"impl/ResultHandler.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ScalarQuantizer.h || (echo \"impl/ScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ThreadedIndex-inl.h || (echo \"impl/ThreadedIndex-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ThreadedIndex.h || (echo \"impl/ThreadedIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/io.h || (echo \"impl/io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/io_macros.h || (echo \"impl/io_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/lattice_Zn.h || (echo \"impl/lattice_Zn.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/platform_macros.h || (echo \"impl/platform_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/pq4_fast_scan.h || (echo \"impl/pq4_fast_scan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/simd_result_handlers.h || (echo \"impl/simd_result_handlers.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/BlockInvertedLists.h || (echo \"invlists/BlockInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/DirectMap.h || (echo \"invlists/DirectMap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/InvertedLists.h || (echo \"invlists/InvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/InvertedListsIOHook.h || (echo \"invlists/InvertedListsIOHook.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/AlignedTable.h || (echo \"utils/AlignedTable.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/Heap.h || (echo \"utils/Heap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/WorkerThread.h || (echo \"utils/WorkerThread.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/distances.h || (echo \"utils/distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/extra_distances.h || (echo \"utils/extra_distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/hamming-inl.h || (echo \"utils/hamming-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/hamming.h || (echo \"utils/hamming.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/ordered_key_value.h || (echo \"utils/ordered_key_value.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/partitioning.h || (echo \"utils/partitioning.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/quantize_lut.h || (echo \"utils/quantize_lut.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/random.h || (echo \"utils/random.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/simdlib.h || (echo \"utils/simdlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/simdlib_avx2.h || (echo \"utils/simdlib_avx2.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/simdlib_emulated.h || (echo \"utils/simdlib_emulated.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/utils.h || (echo \"utils/utils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/OnDiskInvertedLists.h || (echo \"invlists/OnDiskInvertedLists.h not found\" && exit 1)"
     ]
    }
   },
   {
    "build": {
     "string": "py39h1234567_3_cpu"
    },
    "name": "faiss",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "swig",
      "cmake",
      "llvm-openmp"
     ],
     "host": [
      "python",
      "pip",
      "numpy",
      "libfaiss =1.7.0=*_cpu",
      "libfaiss-avx2 =1.7.0=*_cpu",
      "libblas",
      "liblapack"
     ],
     "run": [
      "python",
      "libfaiss =1.7.0=*_cpu",
      "libfaiss-avx2 =1.7.0=*_cpu",
      "numpy"
     ],
     "run_constrained": [
      "faiss-proc * cpu"
     ]
    },
    "script": "build-pkg.sh",
    "test": {
     "commands": [
      "python -c \"from numpy.core._multiarray_umath import __cpu_features__; print(f'Testing version with AVX2-support - ' + str(__cpu_features__['AVX2']))\"",
      "pytest tests --log-file-level=INFO --log-file=log.txt",
      "cat log.txt && sleep 2",
      "python -c \"q = open('log.txt').readlines(); import sys; sys.exit(0 if 'Successfully loaded faiss with AVX2 support.' in [x[35:-1] for x in q] else 1)\"",
      "export NPY_DISABLE_CPU_FEATURES=AVX2",
      "python -c \"from numpy.core._multiarray_umath import __cpu_features__; print(f'Testing version with AVX2-support - ' + str(__cpu_features__['AVX2']))\"",
      "pytest tests --log-file-level=INFO --log-file=log.txt",
      "cat log.txt && sleep 2",
      "python -c \"q = open('log.txt').readlines(); import sys; sys.exit(0 if 'Successfully loaded faiss.' in [x[35:-1] for x in q] else 1)\""
     ],
     "imports": [
      "faiss"
     ],
     "requires": [
      "blas =*=mkl",
      "scipy",
      "pytest"
     ],
     "source_files": [
      "tests/"
     ]
    }
   },
   {
    "build": null,
    "name": "faiss-cpu",
    "requirements": {
     "run": [
      "faiss =1.7.0=*_cpu"
     ]
    },
    "test": {
     "imports": [
      "faiss"
     ]
    }
   },
   {
    "build": {
     "skip": true
    },
    "name": "faiss-gpu",
    "requirements": {
     "run": [
      "faiss =1.7.0=*_cuda"
     ]
    },
    "test": {
     "imports": [
      "faiss"
     ]
    }
   },
   {
    "build": {
     "string": "cpu"
    },
    "name": "faiss-proc",
    "test": {
     "commands": [
      "exit 0"
     ]
    },
    "version": "1.0.0"
   },
   {
    "build": {
     "run_exports": [
      "libfaiss{{ libext }}",
      "libfaiss_avx2 =*=*_cpu"
     ],
     "string": "h1234567_3_cpu"
    },
    "name": "libfaiss-avx2",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "cmake"
     ],
     "host": [
      "libblas",
      "liblapack"
     ],
     "run_constrained": [
      "faiss-proc * cpu"
     ]
    },
    "script": "build-lib-avx2.bat",
    "test": {
     "commands": [
      "if not exist %LIBRARY_BIN%\\faiss_avx2.dll exit 1",
      "if not exist %LIBRARY_LIB%\\faiss_avx2.lib exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\AutoTune.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\Clustering.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IVFlib.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\Index.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\Index2Layer.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexBinary.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexBinaryFlat.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexBinaryFromFloat.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexBinaryHNSW.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexBinaryHash.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexBinaryIVF.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexFlat.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexHNSW.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexIVF.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexIVFFlat.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexIVFPQ.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexIVFPQFastScan.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexIVFPQR.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexIVFSpectralHash.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexLSH.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexLattice.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexPQ.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexPQFastScan.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexPreTransform.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexRefine.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexReplicas.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexScalarQuantizer.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexShards.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\MatrixStats.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\MetaIndexes.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\MetricType.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\VectorTransform.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\clone_index.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\index_factory.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\index_io.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\impl\\AuxIndexStructures.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\impl\\FaissAssert.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\impl\\FaissException.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\impl\\HNSW.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\impl\\PolysemousTraining.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\impl\\ProductQuantizer-inl.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\impl\\ProductQuantizer.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\impl\\ResultHandler.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\impl\\ScalarQuantizer.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\impl\\ThreadedIndex-inl.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\impl\\ThreadedIndex.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\impl\\io.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\impl\\io_macros.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\impl\\lattice_Zn.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\impl\\platform_macros.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\impl\\pq4_fast_scan.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\impl\\simd_result_handlers.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\invlists\\BlockInvertedLists.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\invlists\\DirectMap.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\invlists\\InvertedLists.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\invlists\\InvertedListsIOHook.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\utils\\AlignedTable.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\utils\\Heap.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\utils\\WorkerThread.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\utils\\distances.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\utils\\extra_distances.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\utils\\hamming-inl.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\utils\\hamming.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\utils\\ordered_key_value.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\utils\\partitioning.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\utils\\quantize_lut.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\utils\\random.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\utils\\simdlib.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\utils\\simdlib_avx2.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\utils\\simdlib_emulated.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\utils\\utils.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\invlists\\OnDiskInvertedLists.h exit 1"
     ]
    }
   },
   {
    "build": {
     "run_exports": [
      "libfaiss{{ libext }}",
      "libfaiss =*=*_cpu"
     ],
     "string": "h1234567_3_cpu"
    },
    "name": "libfaiss",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "cmake"
     ],
     "host": [
      "libblas",
      "liblapack"
     ],
     "run_constrained": [
      "faiss-proc * cpu"
     ]
    },
    "script": "build-lib-generic.bat",
    "test": {
     "commands": [
      "if not exist %LIBRARY_BIN%\\faiss.dll exit 1",
      "if not exist %LIBRARY_LIB%\\faiss.lib exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\AutoTune.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\Clustering.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IVFlib.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\Index.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\Index2Layer.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexBinary.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexBinaryFlat.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexBinaryFromFloat.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexBinaryHNSW.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexBinaryHash.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexBinaryIVF.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexFlat.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexHNSW.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexIVF.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexIVFFlat.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexIVFPQ.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexIVFPQFastScan.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexIVFPQR.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexIVFSpectralHash.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexLSH.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexLattice.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexPQ.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexPQFastScan.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexPreTransform.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexRefine.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexReplicas.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexScalarQuantizer.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexShards.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\MatrixStats.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\MetaIndexes.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\MetricType.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\VectorTransform.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\clone_index.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\index_factory.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\index_io.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\impl\\AuxIndexStructures.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\impl\\FaissAssert.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\impl\\FaissException.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\impl\\HNSW.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\impl\\PolysemousTraining.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\impl\\ProductQuantizer-inl.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\impl\\ProductQuantizer.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\impl\\ResultHandler.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\impl\\ScalarQuantizer.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\impl\\ThreadedIndex-inl.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\impl\\ThreadedIndex.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\impl\\io.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\impl\\io_macros.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\impl\\lattice_Zn.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\impl\\platform_macros.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\impl\\pq4_fast_scan.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\impl\\simd_result_handlers.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\invlists\\BlockInvertedLists.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\invlists\\DirectMap.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\invlists\\InvertedLists.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\invlists\\InvertedListsIOHook.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\utils\\AlignedTable.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\utils\\Heap.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\utils\\WorkerThread.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\utils\\distances.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\utils\\extra_distances.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\utils\\hamming-inl.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\utils\\hamming.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\utils\\ordered_key_value.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\utils\\partitioning.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\utils\\quantize_lut.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\utils\\random.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\utils\\simdlib.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\utils\\simdlib_avx2.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\utils\\simdlib_emulated.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\utils\\utils.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\invlists\\OnDiskInvertedLists.h exit 1"
     ]
    }
   },
   {
    "build": {
     "string": "py39h1234567_3_cpu"
    },
    "name": "faiss",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "swig",
      "cmake"
     ],
     "host": [
      "python",
      "pip",
      "numpy",
      "libfaiss =1.7.0=*_cpu",
      "libblas",
      "liblapack"
     ],
     "run": [
      "python",
      "libfaiss =1.7.0=*_cpu",
      "numpy"
     ],
     "run_constrained": [
      "faiss-proc * cpu"
     ]
    },
    "script": "build-pkg.bat",
    "test": {
     "commands": [
      "python -c \"from numpy.core._multiarray_umath import __cpu_features__; print(f'Testing version with AVX2-support - ' + str(__cpu_features__['AVX2']))\"",
      "pytest tests --log-file-level=INFO --log-file=log.txt",
      "type log.txt",
      "python -c \"q = open('log.txt').readlines(); import sys; sys.exit(0 if 'Successfully loaded faiss with AVX2 support.' in [x[35:-1] for x in q] else 1)\"",
      "set NPY_DISABLE_CPU_FEATURES=AVX2",
      "python -c \"from numpy.core._multiarray_umath import __cpu_features__; print(f'Testing version with AVX2-support - ' + str(__cpu_features__['AVX2']))\"",
      "pytest tests --log-file-level=INFO --log-file=log.txt",
      "type log.txt",
      "python -c \"q = open('log.txt').readlines(); import sys; sys.exit(0 if 'Successfully loaded faiss.' in [x[35:-1] for x in q] else 1)\""
     ],
     "imports": [
      "faiss"
     ],
     "requires": [
      "blas =*=mkl",
      "scipy",
      "pytest"
     ],
     "source_files": [
      "tests/"
     ]
    }
   },
   {
    "build": null,
    "name": "faiss-cpu",
    "requirements": {
     "run": [
      "faiss =1.7.0=*_cpu"
     ]
    },
    "test": {
     "imports": [
      "faiss"
     ]
    }
   },
   {
    "build": {
     "skip": true
    },
    "name": "faiss-gpu",
    "requirements": {
     "run": [
      "faiss =1.7.0=*_cuda"
     ]
    },
    "test": {
     "imports": [
      "faiss"
     ]
    }
   }
  ],
  "package": {
   "name": "faiss-split",
   "version": "1.7.0"
  },
  "requirements": {
   "build": [
    "cxx_compiler_stub",
    "cxx_compiler_stub",
    "cxx_compiler_stub",
    "cxx_compiler_stub",
    "cxx_compiler_stub",
    "cxx_compiler_stub",
    "cxx_compiler_stub"
   ]
  },
  "source": {
   "patches": [
    "patches/0001-use-c-14.patch",
    "patches/0002-Add-missing-headers-in-faiss-gpu-CMakeLists.txt-1666.patch",
    "patches/0003-update-util-guard-for-compute_86.patch",
    "patches/0004-Add-missing-includes-for-std-min-std-max.patch",
    "patches/0006-make-AVX2-detection-platform-independent-1600.patch",
    "patches/0007-make-setup.py-win-avx2-compatible-1682.patch",
    "patches/0008-log-success-messages-and-errors-in-loader.py-1683.patch",
    "patches/0009-add-msvc-compatible-AVX2-switch-in-CMakeLists.txt-16.patch",
    "patches/0010-Win-AVX2-compat-1681.patch",
    "patches/0011-Windows-portable-intrinsics-1684.patch",
    "patches/0012-adapt-header-target-directory-to-outputname.patch",
    "patches/0001-use-c-14.patch",
    "patches/0002-Add-missing-headers-in-faiss-gpu-CMakeLists.txt-1666.patch",
    "patches/0003-update-util-guard-for-compute_86.patch",
    "patches/0004-Add-missing-includes-for-std-min-std-max.patch",
    "patches/0006-make-AVX2-detection-platform-independent-1600.patch",
    "patches/0007-make-setup.py-win-avx2-compatible-1682.patch",
    "patches/0008-log-success-messages-and-errors-in-loader.py-1683.patch",
    "patches/0009-add-msvc-compatible-AVX2-switch-in-CMakeLists.txt-16.patch",
    "patches/0010-Win-AVX2-compat-1681.patch",
    "patches/0011-Windows-portable-intrinsics-1684.patch",
    "patches/0012-adapt-header-target-directory-to-outputname.patch",
    "patches/0001-use-c-14.patch",
    "patches/0002-Add-missing-headers-in-faiss-gpu-CMakeLists.txt-1666.patch",
    "patches/0003-update-util-guard-for-compute_86.patch",
    "patches/0004-Add-missing-includes-for-std-min-std-max.patch",
    "patches/0006-make-AVX2-detection-platform-independent-1600.patch",
    "patches/0007-make-setup.py-win-avx2-compatible-1682.patch",
    "patches/0008-log-success-messages-and-errors-in-loader.py-1683.patch",
    "patches/0009-add-msvc-compatible-AVX2-switch-in-CMakeLists.txt-16.patch",
    "patches/0010-Win-AVX2-compat-1681.patch",
    "patches/0011-Windows-portable-intrinsics-1684.patch",
    "patches/0012-adapt-header-target-directory-to-outputname.patch",
    "patches/0001-use-c-14.patch",
    "patches/0002-Add-missing-headers-in-faiss-gpu-CMakeLists.txt-1666.patch",
    "patches/0003-update-util-guard-for-compute_86.patch",
    "patches/0004-Add-missing-includes-for-std-min-std-max.patch",
    "patches/0006-make-AVX2-detection-platform-independent-1600.patch",
    "patches/0007-make-setup.py-win-avx2-compatible-1682.patch",
    "patches/0008-log-success-messages-and-errors-in-loader.py-1683.patch",
    "patches/0009-add-msvc-compatible-AVX2-switch-in-CMakeLists.txt-16.patch",
    "patches/0010-Win-AVX2-compat-1681.patch",
    "patches/0011-Windows-portable-intrinsics-1684.patch",
    "patches/0012-adapt-header-target-directory-to-outputname.patch",
    "patches/0001-use-c-14.patch",
    "patches/0002-Add-missing-headers-in-faiss-gpu-CMakeLists.txt-1666.patch",
    "patches/0003-update-util-guard-for-compute_86.patch",
    "patches/0004-Add-missing-includes-for-std-min-std-max.patch",
    "patches/0006-make-AVX2-detection-platform-independent-1600.patch",
    "patches/0007-make-setup.py-win-avx2-compatible-1682.patch",
    "patches/0008-log-success-messages-and-errors-in-loader.py-1683.patch",
    "patches/0009-add-msvc-compatible-AVX2-switch-in-CMakeLists.txt-16.patch",
    "patches/0010-Win-AVX2-compat-1681.patch",
    "patches/0011-Windows-portable-intrinsics-1684.patch",
    "patches/0012-adapt-header-target-directory-to-outputname.patch",
    "patches/0001-use-c-14.patch",
    "patches/0002-Add-missing-headers-in-faiss-gpu-CMakeLists.txt-1666.patch",
    "patches/0003-update-util-guard-for-compute_86.patch",
    "patches/0004-Add-missing-includes-for-std-min-std-max.patch",
    "patches/0006-make-AVX2-detection-platform-independent-1600.patch",
    "patches/0007-make-setup.py-win-avx2-compatible-1682.patch",
    "patches/0008-log-success-messages-and-errors-in-loader.py-1683.patch",
    "patches/0009-add-msvc-compatible-AVX2-switch-in-CMakeLists.txt-16.patch",
    "patches/0010-Win-AVX2-compat-1681.patch",
    "patches/0011-Windows-portable-intrinsics-1684.patch",
    "patches/0012-adapt-header-target-directory-to-outputname.patch",
    "patches/0001-use-c-14.patch",
    "patches/0002-Add-missing-headers-in-faiss-gpu-CMakeLists.txt-1666.patch",
    "patches/0003-update-util-guard-for-compute_86.patch",
    "patches/0004-Add-missing-includes-for-std-min-std-max.patch",
    "patches/0005-skip-test-that-fails-without-GPU-drivers.patch",
    "patches/0006-make-AVX2-detection-platform-independent-1600.patch",
    "patches/0007-make-setup.py-win-avx2-compatible-1682.patch",
    "patches/0008-log-success-messages-and-errors-in-loader.py-1683.patch",
    "patches/0009-add-msvc-compatible-AVX2-switch-in-CMakeLists.txt-16.patch",
    "patches/0010-Win-AVX2-compat-1681.patch",
    "patches/0011-Windows-portable-intrinsics-1684.patch",
    "patches/0012-adapt-header-target-directory-to-outputname.patch"
   ],
   "sha256": "f86d346ac9f409ee30abe37e52f6cce366b7f60d3924d65719f40aa07ceb4bec",
   "url": "https://github.com/facebookresearch/faiss/archive/v1.7.0.tar.gz"
  }
 },
 "name": "faiss-split",
 "new_version": "1.7.0",
 "new_version_attempts": {
  "1.6.4": 118,
  "1.6.5": 262,
  "1.7.0": 13
 },
 "new_version_errors": {
  "1.6.4": "We found a problem parsing the recipe: \n\nexpected a single document in the stream\n  in \"<unicode string>\", line 9, column 5:\n        'AutoTune.h', 'clone_index.h', ' ... \n        ^ (line: 9)\nbut found another document\n  in \"<unicode string>\", line 9, column 17:\n        'AutoTune.h', 'clone_index.h', 'Clustering.h ... \n                    ^ (line: 9)",
  "1.6.5": "We found a problem parsing the recipe: \n\nexpected a single document in the stream\n  in \"<unicode string>\", line 10, column 5:\n        'AutoTune.h', 'Clustering.h', 'D ... \n        ^ (line: 10)\nbut found another document\n  in \"<unicode string>\", line 10, column 17:\n        'AutoTune.h', 'Clustering.h', 'DirectMap.h', ... \n                    ^ (line: 10)",
  "1.7.0": "We found a problem parsing the recipe: \n\nexpected a single document in the stream\n  in \"<unicode string>\", line 13, column 5:\n        'AutoTune.h', 'Clustering.h', 'D ... \n        ^ (line: 13)\nbut found another document\n  in \"<unicode string>\", line 13, column 17:\n        'AutoTune.h', 'Clustering.h', 'DirectMap.h', ... \n                    ^ (line: 13)"
 },
 "osx_64_meta_yaml": {
  "about": {
   "description": "Faiss is a library for efficient similarity search and clustering of dense vectors.\nIt contains algorithms that search in sets of vectors of any size, up to ones that\npossibly do not fit in RAM. It also contains supporting code for evaluation and\nparameter tuning. Faiss is written in C++ with complete wrappers for Python/numpy.\nSome of the most useful algorithms are implemented on the GPU. It is developed by\n[Facebook AI Research](https://research.fb.com/category/facebook-ai-research-fair/).\n\nFor best performance, the maintainers of the package\n[recommend](https://github.com/conda-forge/staged-recipes/pull/11337#issuecomment-623718460)\nusing the MKL implementation of blas/lapack. You can ensure that this is installed\nby adding \"libblas =*=*mkl\" to your dependencies.\n",
   "dev_url": "https://github.com/facebookresearch/faiss",
   "doc_url": "https://rawgit.com/facebookresearch/faiss/master/docs/html/annotated.html",
   "home": "https://github.com/facebookresearch/faiss",
   "license": "MIT",
   "license_family": "MIT",
   "license_file": "LICENSE",
   "summary": "A library for efficient similarity search and clustering of dense vectors."
  },
  "build": {
   "number": "3"
  },
  "extra": {
   "recipe-maintainers": [
    "h-vetinari"
   ]
  },
  "outputs": [
   {
    "build": {
     "string": "cpu"
    },
    "name": "faiss-proc",
    "test": {
     "commands": [
      "exit 0"
     ]
    },
    "version": "1.0.0"
   },
   {
    "build": {
     "run_exports": [
      "libfaiss{{ libext }}",
      "libfaiss_avx2 =*=*_cpu"
     ],
     "string": "h1234567_3_cpu"
    },
    "name": "libfaiss-avx2",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "cmake",
      "llvm-openmp"
     ],
     "host": [
      "libblas",
      "liblapack"
     ],
     "run_constrained": [
      "faiss-proc * cpu"
     ]
    },
    "script": "build-lib-avx2.sh",
    "test": {
     "commands": [
      "test -f $PREFIX/lib/libfaiss_avx2.dylib",
      "test ! -f $PREFIX/lib/libfaiss_avx2.a",
      "test -f $PREFIX/include/faiss_avx2/AutoTune.h || (echo \"AutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/Clustering.h || (echo \"Clustering.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IVFlib.h || (echo \"IVFlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/Index.h || (echo \"Index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/Index2Layer.h || (echo \"Index2Layer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinary.h || (echo \"IndexBinary.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryFlat.h || (echo \"IndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryFromFloat.h || (echo \"IndexBinaryFromFloat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryHNSW.h || (echo \"IndexBinaryHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryHash.h || (echo \"IndexBinaryHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexBinaryIVF.h || (echo \"IndexBinaryIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexFlat.h || (echo \"IndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexHNSW.h || (echo \"IndexHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVF.h || (echo \"IndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFFlat.h || (echo \"IndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFPQ.h || (echo \"IndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFPQFastScan.h || (echo \"IndexIVFPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFPQR.h || (echo \"IndexIVFPQR.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexIVFSpectralHash.h || (echo \"IndexIVFSpectralHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexLSH.h || (echo \"IndexLSH.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexLattice.h || (echo \"IndexLattice.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexPQ.h || (echo \"IndexPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexPQFastScan.h || (echo \"IndexPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexPreTransform.h || (echo \"IndexPreTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexRefine.h || (echo \"IndexRefine.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexReplicas.h || (echo \"IndexReplicas.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexScalarQuantizer.h || (echo \"IndexScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/IndexShards.h || (echo \"IndexShards.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/MatrixStats.h || (echo \"MatrixStats.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/MetaIndexes.h || (echo \"MetaIndexes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/MetricType.h || (echo \"MetricType.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/VectorTransform.h || (echo \"VectorTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/clone_index.h || (echo \"clone_index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/index_factory.h || (echo \"index_factory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/index_io.h || (echo \"index_io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/AuxIndexStructures.h || (echo \"impl/AuxIndexStructures.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/FaissAssert.h || (echo \"impl/FaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/FaissException.h || (echo \"impl/FaissException.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/HNSW.h || (echo \"impl/HNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/PolysemousTraining.h || (echo \"impl/PolysemousTraining.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ProductQuantizer-inl.h || (echo \"impl/ProductQuantizer-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ProductQuantizer.h || (echo \"impl/ProductQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ResultHandler.h || (echo \"impl/ResultHandler.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ScalarQuantizer.h || (echo \"impl/ScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ThreadedIndex-inl.h || (echo \"impl/ThreadedIndex-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/ThreadedIndex.h || (echo \"impl/ThreadedIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/io.h || (echo \"impl/io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/io_macros.h || (echo \"impl/io_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/lattice_Zn.h || (echo \"impl/lattice_Zn.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/platform_macros.h || (echo \"impl/platform_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/pq4_fast_scan.h || (echo \"impl/pq4_fast_scan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/impl/simd_result_handlers.h || (echo \"impl/simd_result_handlers.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/BlockInvertedLists.h || (echo \"invlists/BlockInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/DirectMap.h || (echo \"invlists/DirectMap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/InvertedLists.h || (echo \"invlists/InvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/InvertedListsIOHook.h || (echo \"invlists/InvertedListsIOHook.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/AlignedTable.h || (echo \"utils/AlignedTable.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/Heap.h || (echo \"utils/Heap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/WorkerThread.h || (echo \"utils/WorkerThread.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/distances.h || (echo \"utils/distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/extra_distances.h || (echo \"utils/extra_distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/hamming-inl.h || (echo \"utils/hamming-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/hamming.h || (echo \"utils/hamming.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/ordered_key_value.h || (echo \"utils/ordered_key_value.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/partitioning.h || (echo \"utils/partitioning.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/quantize_lut.h || (echo \"utils/quantize_lut.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/random.h || (echo \"utils/random.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/simdlib.h || (echo \"utils/simdlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/simdlib_avx2.h || (echo \"utils/simdlib_avx2.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/simdlib_emulated.h || (echo \"utils/simdlib_emulated.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/utils/utils.h || (echo \"utils/utils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss_avx2/invlists/OnDiskInvertedLists.h || (echo \"invlists/OnDiskInvertedLists.h not found\" && exit 1)"
     ]
    }
   },
   {
    "build": {
     "run_exports": [
      "libfaiss{{ libext }}",
      "libfaiss =*=*_cpu"
     ],
     "string": "h1234567_3_cpu"
    },
    "name": "libfaiss",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "cmake",
      "llvm-openmp"
     ],
     "host": [
      "libblas",
      "liblapack"
     ],
     "run_constrained": [
      "faiss-proc * cpu"
     ]
    },
    "script": "build-lib-generic.sh",
    "test": {
     "commands": [
      "test -f $PREFIX/lib/libfaiss.dylib",
      "test ! -f $PREFIX/lib/libfaiss.a",
      "test -f $PREFIX/include/faiss/AutoTune.h || (echo \"AutoTune.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/Clustering.h || (echo \"Clustering.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IVFlib.h || (echo \"IVFlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/Index.h || (echo \"Index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/Index2Layer.h || (echo \"Index2Layer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinary.h || (echo \"IndexBinary.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryFlat.h || (echo \"IndexBinaryFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryFromFloat.h || (echo \"IndexBinaryFromFloat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryHNSW.h || (echo \"IndexBinaryHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryHash.h || (echo \"IndexBinaryHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexBinaryIVF.h || (echo \"IndexBinaryIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexFlat.h || (echo \"IndexFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexHNSW.h || (echo \"IndexHNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVF.h || (echo \"IndexIVF.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFFlat.h || (echo \"IndexIVFFlat.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFPQ.h || (echo \"IndexIVFPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFPQFastScan.h || (echo \"IndexIVFPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFPQR.h || (echo \"IndexIVFPQR.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexIVFSpectralHash.h || (echo \"IndexIVFSpectralHash.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexLSH.h || (echo \"IndexLSH.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexLattice.h || (echo \"IndexLattice.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexPQ.h || (echo \"IndexPQ.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexPQFastScan.h || (echo \"IndexPQFastScan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexPreTransform.h || (echo \"IndexPreTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexRefine.h || (echo \"IndexRefine.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexReplicas.h || (echo \"IndexReplicas.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexScalarQuantizer.h || (echo \"IndexScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/IndexShards.h || (echo \"IndexShards.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/MatrixStats.h || (echo \"MatrixStats.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/MetaIndexes.h || (echo \"MetaIndexes.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/MetricType.h || (echo \"MetricType.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/VectorTransform.h || (echo \"VectorTransform.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/clone_index.h || (echo \"clone_index.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/index_factory.h || (echo \"index_factory.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/index_io.h || (echo \"index_io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/AuxIndexStructures.h || (echo \"impl/AuxIndexStructures.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/FaissAssert.h || (echo \"impl/FaissAssert.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/FaissException.h || (echo \"impl/FaissException.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/HNSW.h || (echo \"impl/HNSW.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/PolysemousTraining.h || (echo \"impl/PolysemousTraining.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ProductQuantizer-inl.h || (echo \"impl/ProductQuantizer-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ProductQuantizer.h || (echo \"impl/ProductQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ResultHandler.h || (echo \"impl/ResultHandler.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ScalarQuantizer.h || (echo \"impl/ScalarQuantizer.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ThreadedIndex-inl.h || (echo \"impl/ThreadedIndex-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/ThreadedIndex.h || (echo \"impl/ThreadedIndex.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/io.h || (echo \"impl/io.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/io_macros.h || (echo \"impl/io_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/lattice_Zn.h || (echo \"impl/lattice_Zn.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/platform_macros.h || (echo \"impl/platform_macros.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/pq4_fast_scan.h || (echo \"impl/pq4_fast_scan.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/impl/simd_result_handlers.h || (echo \"impl/simd_result_handlers.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/BlockInvertedLists.h || (echo \"invlists/BlockInvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/DirectMap.h || (echo \"invlists/DirectMap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/InvertedLists.h || (echo \"invlists/InvertedLists.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/InvertedListsIOHook.h || (echo \"invlists/InvertedListsIOHook.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/AlignedTable.h || (echo \"utils/AlignedTable.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/Heap.h || (echo \"utils/Heap.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/WorkerThread.h || (echo \"utils/WorkerThread.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/distances.h || (echo \"utils/distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/extra_distances.h || (echo \"utils/extra_distances.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/hamming-inl.h || (echo \"utils/hamming-inl.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/hamming.h || (echo \"utils/hamming.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/ordered_key_value.h || (echo \"utils/ordered_key_value.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/partitioning.h || (echo \"utils/partitioning.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/quantize_lut.h || (echo \"utils/quantize_lut.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/random.h || (echo \"utils/random.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/simdlib.h || (echo \"utils/simdlib.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/simdlib_avx2.h || (echo \"utils/simdlib_avx2.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/simdlib_emulated.h || (echo \"utils/simdlib_emulated.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/utils/utils.h || (echo \"utils/utils.h not found\" && exit 1)",
      "test -f $PREFIX/include/faiss/invlists/OnDiskInvertedLists.h || (echo \"invlists/OnDiskInvertedLists.h not found\" && exit 1)"
     ]
    }
   },
   {
    "build": {
     "string": "py39h1234567_3_cpu"
    },
    "name": "faiss",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "swig",
      "cmake",
      "llvm-openmp"
     ],
     "host": [
      "python",
      "pip",
      "numpy",
      "libfaiss =1.7.0=*_cpu",
      "libfaiss-avx2 =1.7.0=*_cpu",
      "libblas",
      "liblapack"
     ],
     "run": [
      "python",
      "libfaiss =1.7.0=*_cpu",
      "libfaiss-avx2 =1.7.0=*_cpu",
      "numpy"
     ],
     "run_constrained": [
      "faiss-proc * cpu"
     ]
    },
    "script": "build-pkg.sh",
    "test": {
     "commands": [
      "python -c \"from numpy.core._multiarray_umath import __cpu_features__; print(f'Testing version with AVX2-support - ' + str(__cpu_features__['AVX2']))\"",
      "pytest tests --log-file-level=INFO --log-file=log.txt",
      "cat log.txt && sleep 2",
      "python -c \"q = open('log.txt').readlines(); import sys; sys.exit(0 if 'Successfully loaded faiss with AVX2 support.' in [x[35:-1] for x in q] else 1)\"",
      "export NPY_DISABLE_CPU_FEATURES=AVX2",
      "python -c \"from numpy.core._multiarray_umath import __cpu_features__; print(f'Testing version with AVX2-support - ' + str(__cpu_features__['AVX2']))\"",
      "pytest tests --log-file-level=INFO --log-file=log.txt",
      "cat log.txt && sleep 2",
      "python -c \"q = open('log.txt').readlines(); import sys; sys.exit(0 if 'Successfully loaded faiss.' in [x[35:-1] for x in q] else 1)\""
     ],
     "imports": [
      "faiss"
     ],
     "requires": [
      "blas =*=mkl",
      "scipy",
      "pytest"
     ],
     "source_files": [
      "tests/"
     ]
    }
   },
   {
    "build": null,
    "name": "faiss-cpu",
    "requirements": {
     "run": [
      "faiss =1.7.0=*_cpu"
     ]
    },
    "test": {
     "imports": [
      "faiss"
     ]
    }
   },
   {
    "build": {
     "skip": true
    },
    "name": "faiss-gpu",
    "requirements": {
     "run": [
      "faiss =1.7.0=*_cuda"
     ]
    },
    "test": {
     "imports": [
      "faiss"
     ]
    }
   }
  ],
  "package": {
   "name": "faiss-split",
   "version": "1.7.0"
  },
  "requirements": {
   "build": [
    "cxx_compiler_stub"
   ]
  },
  "source": {
   "patches": [
    "patches/0001-use-c-14.patch",
    "patches/0002-Add-missing-headers-in-faiss-gpu-CMakeLists.txt-1666.patch",
    "patches/0003-update-util-guard-for-compute_86.patch",
    "patches/0004-Add-missing-includes-for-std-min-std-max.patch",
    "patches/0006-make-AVX2-detection-platform-independent-1600.patch",
    "patches/0007-make-setup.py-win-avx2-compatible-1682.patch",
    "patches/0008-log-success-messages-and-errors-in-loader.py-1683.patch",
    "patches/0009-add-msvc-compatible-AVX2-switch-in-CMakeLists.txt-16.patch",
    "patches/0010-Win-AVX2-compat-1681.patch",
    "patches/0011-Windows-portable-intrinsics-1684.patch",
    "patches/0012-adapt-header-target-directory-to-outputname.patch"
   ],
   "sha256": "f86d346ac9f409ee30abe37e52f6cce366b7f60d3924d65719f40aa07ceb4bec",
   "url": "https://github.com/facebookresearch/faiss/archive/v1.7.0.tar.gz"
  }
 },
 "osx_64_requirements": {
  "build": {
   "__set__": true,
   "elements": [
    "cmake",
    "cxx_compiler_stub",
    "llvm-openmp",
    "swig"
   ]
  },
  "host": {
   "__set__": true,
   "elements": [
    "libblas",
    "libfaiss",
    "libfaiss-avx2",
    "liblapack",
    "numpy",
    "pip",
    "python"
   ]
  },
  "run": {
   "__set__": true,
   "elements": [
    "faiss",
    "libfaiss",
    "libfaiss-avx2",
    "numpy",
    "python"
   ]
  },
  "test": {
   "__set__": true,
   "elements": [
    "blas",
    "pytest",
    "scipy"
   ]
  }
 },
 "outputs_names": {
  "__set__": true,
  "elements": [
   "faiss",
   "faiss-cpu",
   "faiss-gpu",
   "faiss-proc",
   "libfaiss",
   "libfaiss-avx2"
  ]
 },
 "pinning_version": "2021.02.17.06.54.06",
 "pre_pr_migrator_status": {
  "pypy37": "not solvable (<a href=\"https://github.com/regro/autotick-bot/actions/runs/610767795\">bot CI job</a>): master: ['osx_64_: Encountered problems while solving.\\nProblem: nothing provides openblas 0.3.5.* needed by libblas-3.8.0-4_openblas\\n']",
  "python39": "not solvable: master: ['linux_64_cuda_compiler_version10.0: Encountered problems while solving.\\nProblem: package numpy-1.14.0-py27h3dfced4_0 requires python >=2.7,<2.8.0a0, but none of the providers can be installed\\n', 'linux_64_cuda_compiler_version10.1: Encountered problems while solving.\\nProblem: package numpy-1.14.0-py27h3dfced4_0 requires python >=2.7,<2.8.0a0, but none of the providers can be installed\\n', 'linux_64_cuda_compiler_version10.2: Encountered problems while solving.\\nProblem: package numpy-1.14.0-py27h3dfced4_0 requires python >=2.7,<2.8.0a0, but none of the providers can be installed\\n', 'linux_64_cuda_compiler_version11.0: Encountered problems while solving.\\nProblem: package numpy-1.14.0-py27h3dfced4_0 requires python >=2.7,<2.8.0a0, but none of the providers can be installed\\n', 'linux_64_cuda_compiler_version9.2: Encountered problems while solving.\\nProblem: package numpy-1.14.0-py27h3dfced4_0 requires python >=2.7,<2.8.0a0, but none of the providers can be installed\\n', 'linux_64_cuda_compiler_versionNone: Encountered problems while solving.\\nProblem: package numpy-1.14.0-py27h3dfced4_0 requires python >=2.7,<2.8.0a0, but none of the providers can be installed\\n', 'osx_64_: Encountered problems while solving.\\nProblem: package numpy-1.14.0-py27h8a80b8c_0 requires python >=2.7,<2.8.0a0, but none of the providers can be installed\\n']"
 },
 "raw_meta_yaml": "{% set version = \"1.7.0\" %}\n{% set number = 3 %}\n# see github.com/conda-forge/conda-forge.github.io/issues/1059 for naming discussion\n{% set faiss_proc_type = \"cuda\" if cuda_compiler_version != \"None\" else \"cpu\" %}\n\n# headers for upstream-folders 'faiss/*.h', 'faiss/{impl,invlists,utils}/*.h',\n# see https://github.com/facebookresearch/faiss/blob/v{{ version }}/faiss/CMakeLists.txt;\n# gpu adds headers in 'faiss/gpu/*.h', 'faiss/gpu/{impl,utils}/*.(cu)?h'.\n# generated by:\n# ls faiss/{.,impl,invlists,utils} | grep -E \"h$\"\n# ls faiss/gpu/{.,impl,utils,utils/blockselect,utils/warpselect} | grep -E \"h$\"\n{% set headers = [\n    'AutoTune.h', 'Clustering.h', 'IVFlib.h', 'Index.h', 'Index2Layer.h', 'IndexBinary.h',\n    'IndexBinaryFlat.h', 'IndexBinaryFromFloat.h', 'IndexBinaryHNSW.h', 'IndexBinaryHash.h',\n    'IndexBinaryIVF.h', 'IndexFlat.h', 'IndexHNSW.h', 'IndexIVF.h', 'IndexIVFFlat.h',\n    'IndexIVFPQ.h', 'IndexIVFPQFastScan.h', 'IndexIVFPQR.h', 'IndexIVFSpectralHash.h',\n    'IndexLSH.h', 'IndexLattice.h', 'IndexPQ.h', 'IndexPQFastScan.h', 'IndexPreTransform.h',\n    'IndexRefine.h', 'IndexReplicas.h', 'IndexScalarQuantizer.h', 'IndexShards.h', 'MatrixStats.h',\n    'MetaIndexes.h', 'MetricType.h', 'VectorTransform.h', 'clone_index.h', 'index_factory.h',\n    'index_io.h',\n    'impl/AuxIndexStructures.h', 'impl/FaissAssert.h', 'impl/FaissException.h', 'impl/HNSW.h',\n    'impl/PolysemousTraining.h', 'impl/ProductQuantizer-inl.h', 'impl/ProductQuantizer.h',\n    'impl/ResultHandler.h', 'impl/ScalarQuantizer.h', 'impl/ThreadedIndex-inl.h',\n    'impl/ThreadedIndex.h', 'impl/io.h', 'impl/io_macros.h', 'impl/lattice_Zn.h',\n    'impl/platform_macros.h', 'impl/pq4_fast_scan.h', 'impl/simd_result_handlers.h',\n    'invlists/BlockInvertedLists.h', 'invlists/DirectMap.h', 'invlists/InvertedLists.h',\n    'invlists/InvertedListsIOHook.h',\n    'utils/AlignedTable.h', 'utils/Heap.h', 'utils/WorkerThread.h', 'utils/distances.h',\n    'utils/extra_distances.h', 'utils/hamming-inl.h', 'utils/hamming.h',\n    'utils/ordered_key_value.h', 'utils/partitioning.h', 'utils/quantize_lut.h', 'utils/random.h',\n    'utils/simdlib.h', 'utils/simdlib_avx2.h', 'utils/simdlib_emulated.h', 'utils/utils.h'\n] + (not win) * [\n    'invlists/OnDiskInvertedLists.h'\n] + (cuda_compiler_version != \"None\") * [\n    'gpu/GpuAutoTune.h', 'gpu/GpuCloner.h', 'gpu/GpuClonerOptions.h', 'gpu/GpuDistance.h',\n    'gpu/GpuFaissAssert.h', 'gpu/GpuIndex.h', 'gpu/GpuIndexBinaryFlat.h', 'gpu/GpuIndexFlat.h',\n    'gpu/GpuIndexIVF.h', 'gpu/GpuIndexIVFFlat.h', 'gpu/GpuIndexIVFPQ.h',\n    'gpu/GpuIndexIVFScalarQuantizer.h', 'gpu/GpuIndicesOptions.h', 'gpu/GpuResources.h',\n    'gpu/StandardGpuResources.h',\n    'gpu/impl/BinaryDistance.cuh', 'gpu/impl/BinaryFlatIndex.cuh', 'gpu/impl/BroadcastSum.cuh',\n    'gpu/impl/Distance.cuh', 'gpu/impl/DistanceUtils.cuh', 'gpu/impl/FlatIndex.cuh',\n    'gpu/impl/GeneralDistance.cuh', 'gpu/impl/GpuScalarQuantizer.cuh', 'gpu/impl/IVFAppend.cuh',\n    'gpu/impl/IVFBase.cuh', 'gpu/impl/IVFFlat.cuh', 'gpu/impl/IVFFlatScan.cuh',\n    'gpu/impl/IVFInterleaved.cuh', 'gpu/impl/IVFPQ.cuh', 'gpu/impl/IVFUtils.cuh',\n    'gpu/impl/InterleavedCodes.h', 'gpu/impl/L2Norm.cuh', 'gpu/impl/L2Select.cuh',\n    'gpu/impl/PQCodeDistances-inl.cuh', 'gpu/impl/PQCodeDistances.cuh', 'gpu/impl/PQCodeLoad.cuh',\n    'gpu/impl/PQScanMultiPassNoPrecomputed-inl.cuh', 'gpu/impl/PQScanMultiPassNoPrecomputed.cuh',\n    'gpu/impl/PQScanMultiPassPrecomputed.cuh', 'gpu/impl/RemapIndices.h',\n    'gpu/impl/VectorResidual.cuh',\n    'gpu/utils/BlockSelectKernel.cuh', 'gpu/utils/Comparators.cuh',\n    'gpu/utils/ConversionOperators.cuh', 'gpu/utils/CopyUtils.cuh', 'gpu/utils/DeviceDefs.cuh',\n    'gpu/utils/DeviceTensor-inl.cuh', 'gpu/utils/DeviceTensor.cuh', 'gpu/utils/DeviceUtils.h',\n    'gpu/utils/DeviceVector.cuh', 'gpu/utils/Float16.cuh', 'gpu/utils/HostTensor-inl.cuh',\n    'gpu/utils/HostTensor.cuh', 'gpu/utils/Limits.cuh', 'gpu/utils/LoadStoreOperators.cuh',\n    'gpu/utils/MathOperators.cuh', 'gpu/utils/MatrixMult-inl.cuh', 'gpu/utils/MatrixMult.cuh',\n    'gpu/utils/MergeNetworkBlock.cuh', 'gpu/utils/MergeNetworkUtils.cuh',\n    'gpu/utils/MergeNetworkWarp.cuh', 'gpu/utils/NoTypeTensor.cuh', 'gpu/utils/Pair.cuh',\n    'gpu/utils/PtxUtils.cuh', 'gpu/utils/ReductionOperators.cuh', 'gpu/utils/Reductions.cuh',\n    'gpu/utils/Select.cuh', 'gpu/utils/StackDeviceMemory.h', 'gpu/utils/StaticUtils.h',\n    'gpu/utils/Tensor-inl.cuh', 'gpu/utils/Tensor.cuh', 'gpu/utils/ThrustAllocator.cuh',\n    'gpu/utils/Timer.h', 'gpu/utils/Transpose.cuh', 'gpu/utils/WarpPackedBits.cuh',\n    'gpu/utils/WarpSelectKernel.cuh', 'gpu/utils/WarpShuffles.cuh',\n    'gpu/utils/blockselect/BlockSelectImpl.cuh', 'gpu/utils/warpselect/WarpSelectImpl.cuh'\n] %}\n\npackage:\n  name: faiss-split\n  version: {{ version }}\n\nsource:\n  url: https://github.com/facebookresearch/faiss/archive/v{{ version }}.tar.gz\n  sha256: f86d346ac9f409ee30abe37e52f6cce366b7f60d3924d65719f40aa07ceb4bec\n  patches:\n    - patches/0001-use-c-14.patch\n    # backport of facebookresearch/faiss#1666, can be dropped for ver>1.7.0\n    - patches/0002-Add-missing-headers-in-faiss-gpu-CMakeLists.txt-1666.patch\n    # update version-guard to build for compute_86, can be dropped for ver>1.7.0\n    - patches/0003-update-util-guard-for-compute_86.patch\n    # single commit from facebookresearch/faiss#1610\n    - patches/0004-Add-missing-includes-for-std-min-std-max.patch\n    # skip test that fails without GPU drivers on windows\n    - patches/0005-skip-test-that-fails-without-GPU-drivers.patch  # [win]\n    # backport of facebookresearch/faiss#1600, can be dropped for ver>1.7.0\n    - patches/0006-make-AVX2-detection-platform-independent-1600.patch\n    # backport of facebookresearch/faiss#1682, can be dropped for ver>1.7.0\n    - patches/0007-make-setup.py-win-avx2-compatible-1682.patch\n    # backport of facebookresearch/faiss#1683, can be dropped for ver>1.7.0\n    - patches/0008-log-success-messages-and-errors-in-loader.py-1683.patch\n    # backport of facebookresearch/faiss#1680, can be dropped for ver>1.7.0\n    - patches/0009-add-msvc-compatible-AVX2-switch-in-CMakeLists.txt-16.patch\n    # backport of facebookresearch/faiss#1681, can be dropped for ver>1.7.0\n    - patches/0010-Win-AVX2-compat-1681.patch\n    # backport of facebookresearch/faiss#1684, can be dropped for ver>1.7.0\n    - patches/0011-Windows-portable-intrinsics-1684.patch\n    # adapt header target directory for faiss_avx2\n    - patches/0012-adapt-header-target-directory-to-outputname.patch\n\nbuild:\n  number: {{ number }}\n  # GPU version for linux64 & win\n  skip: true  # [osx and cuda_compiler_version != \"None\"]\n  # DEBUG: temporarily disable win + cuda\n  skip: true  # [win and cuda_compiler_version != \"None\"]\n\nrequirements:\n  build:\n    - {{ compiler('cxx') }}\n\noutputs:\n  # A meta-package to select CPU or GPU build for faiss.\n  - name: faiss-proc\n    version: 1.0.0\n    build:\n      string: {{ faiss_proc_type }}\n    test:\n      commands:\n        - exit 0\n\n  # build two separate C++ libs, one for generic x64, and one for AVX2;\n  # do not build AVX2 variant on windows + cuda due to CI time constraints\n  {% for CF_FAISS_BUILD in ([\"avx2\", \"generic\"] if not win or cuda_compiler_version == None else [\"generic\"]) %}\n  # order libfaiss last in loop due to conda/conda-build#4090; libfaiss-avx2\n  # is only used for faiss and not important enough to work-around for this bug\n  {% if CF_FAISS_BUILD == \"generic\" %}\n  - name: libfaiss\n  {% else %}\n  - name: libfaiss-avx2\n  {% endif %}\n  {% set libext = \"_avx2\" if CF_FAISS_BUILD == \"avx2\" else \"\" %}\n    # only one main build script build-lib.{bat|sh}, with the only difference\n    # through CF_FAISS_BUILD={generic,avx2} that's set in the wrappers\n    script: build-lib-{{ CF_FAISS_BUILD }}.sh   # [not win]\n    script: build-lib-{{ CF_FAISS_BUILD }}.bat  # [win]\n    build:\n      string: \"h{{ PKG_HASH }}_{{ number }}_{{ faiss_proc_type }}\"                                                  # [cuda_compiler_version == \"None\"]\n      string: \"cuda{{ cuda_compiler_version|replace(\".\", \"\") }}h{{ PKG_HASH }}_{{ number }}_{{ faiss_proc_type }}\"  # [cuda_compiler_version != \"None\"]\n      run_exports:\n        # faiss follows SemVer, so restrict packages built with libfaiss to use\n        # at least the same version at runtime, but below the next major version.\n        # (matches default arguments/behaviour of `pin_compatible`: min_pin='x.x.x.x.x.x', max_pin='x')\n        - {{ pin_compatible('libfaiss{{ libext }}') }}\n        # additionally, we need to ensure matching proc-type\n        - libfaiss{{ libext }} =*=*_{{ faiss_proc_type }}\n    requirements:\n      build:\n        - {{ compiler('cxx') }}\n        - {{ compiler('cuda') }}  # [cuda_compiler_version != \"None\"]\n        - cmake\n        - libgomp                 # [linux]\n        - llvm-openmp             # [osx]\n      host:\n        - libblas\n        - liblapack\n      run_constrained:\n        - faiss-proc * {{ faiss_proc_type }}\n\n    test:\n      commands:\n        # shared\n        - test -f $PREFIX/lib/libfaiss{{ libext }}.so               # [linux]\n        - test -f $PREFIX/lib/libfaiss{{ libext }}.dylib            # [osx]\n        - if not exist %LIBRARY_BIN%\\faiss{{ libext }}.dll exit 1   # [win]\n        # On windows, faiss.lib is an \"import library\";\n        # Deleting it breaks the faiss-builds\n        - if not exist %LIBRARY_LIB%\\faiss{{ libext }}.lib exit 1   # [win]\n\n        # absence of static libraries\n        - test ! -f $PREFIX/lib/libfaiss{{ libext }}.a              # [not win]\n\n        # headers\n        {% for each_header in headers %}\n        - test -f $PREFIX/include/faiss{{ libext }}/{{ each_header }} || (echo \"{{ each_header }} not found\" && exit 1)  # [unix]\n        - if not exist %LIBRARY_INC%\\faiss{{ libext }}\\{{ \"\\\\\".join(each_header.split(\"/\")) }} exit 1                    # [win]\n        {% endfor %}\n  {% endfor %}\n\n  - name: faiss\n    script: build-pkg.sh          # [not win]\n    script: build-pkg.bat         # [win]\n    build:\n      string: \"py{{ CONDA_PY }}h{{ PKG_HASH }}_{{ number }}_{{ faiss_proc_type }}\"                                                  # [cuda_compiler_version == \"None\"]\n      string: \"py{{ CONDA_PY }}cuda{{ cuda_compiler_version|replace(\".\", \"\") }}h{{ PKG_HASH }}_{{ number }}_{{ faiss_proc_type }}\"  # [cuda_compiler_version != \"None\"]\n    requirements:\n      build:\n        - {{ compiler('cxx') }}\n        - {{ compiler('cuda') }}  # [cuda_compiler_version != \"None\"]\n        - swig\n        - cmake\n        - libgomp                 # [linux]\n        - llvm-openmp             # [osx]\n      host:\n        - python\n        - pip\n        - numpy\n        - libfaiss ={{ version }}=*_{{ faiss_proc_type }}\n        - libfaiss-avx2 ={{ version }}=*_{{ faiss_proc_type }}  # [not win or cuda_compiler_version == None]\n        - libblas\n        - liblapack\n      run:\n        - python\n        - libfaiss ={{ version }}=*_{{ faiss_proc_type }}\n        - libfaiss-avx2 ={{ version }}=*_{{ faiss_proc_type }}  # [not win or cuda_compiler_version == None]\n        - {{ pin_compatible('numpy') }}\n      run_constrained:\n        - faiss-proc * {{ faiss_proc_type }}\n\n    test:\n      requires:\n        # trying to test all blas-variants runs into conda/conda-build#3947\n        # - blas * *{{ blas_impl }}\n        # testing with MKL, as upstream considers this the most important\n        - blas =*=mkl\n        - scipy\n        - pytest\n      source_files:\n        - tests/\n      imports:\n        - faiss\n      commands:\n        {% if not (osx or py36) %}\n        # the linux & windows CI agents support AVX2 (OSX doesn't yet), so by default,\n        # we expect faiss will load the library with AVX2-support, see\n        # https://github.com/facebookresearch/faiss/blob/master/faiss/python/loader.py#L48-L60\n        - python -c \"from numpy.core._multiarray_umath import __cpu_features__; print(f'Testing version with AVX2-support - ' + str(__cpu_features__['AVX2']))\"\n        - pytest tests --log-file-level=INFO --log-file=log.txt\n        # print logfile for completeness (sleep so log has time to print)\n        - cat log.txt && sleep 2  # [not win]\n        - type log.txt            # [win]\n        # ensure that expected logger-messages from loader.py is present;\n        # avoid final '\\n', as well as the first 35 = len('INFO     faiss.loader:loader.py:51 ')\n        - python -c \"q = open('log.txt').readlines(); import sys; sys.exit(0 if 'Successfully loaded faiss with AVX2 support.' in [x[35:-1] for x in q] else 1)\"\n        # OTOH, we also want to test the packaged library without AVX2 support;\n        # the advantage of the CPU feature detection in numpy is that it can be\n        # deactivated, see documentation of NPY_DISABLE_CPU_FEATURES upstream;\n        # however, the dict of CPU features is determined (and frozen) upon the\n        # first import, so we cannot run both variants in a single run_test.py\n        - export NPY_DISABLE_CPU_FEATURES=AVX2  # [not win]\n        - set NPY_DISABLE_CPU_FEATURES=AVX2     # [win]\n        {% endif %}\n        - python -c \"from numpy.core._multiarray_umath import __cpu_features__; print(f'Testing version with AVX2-support - ' + str(__cpu_features__['AVX2']))\"\n        # rerun test suite again without AVX2 support\n        - pytest tests --log-file-level=INFO --log-file=log.txt\n        - cat log.txt && sleep 2  # [not win]\n        - type log.txt            # [win]\n        # this should have run without AVX2; skip for py36 due to NPY_DISABLE_CPU_FEATURES not working\n        - python -c \"q = open('log.txt').readlines(); import sys; sys.exit(0 if 'Successfully loaded faiss.' in [x[35:-1] for x in q] else 1)\"  # [py>36]\n\n        # running the following test requires an actual GPU device, which is not available in CI\n        # - pytest faiss/gpu/test/\n\n  # for compatibility with (& ease of migration from) existing packages in the pytorch channel\n  - name: faiss-cpu\n    build:\n      skip: true  # [cuda_compiler_version != \"None\"]\n    requirements:\n      run:\n        - faiss ={{ version }}=*_cpu\n    test:\n      imports:\n        - faiss\n\n  - name: faiss-gpu\n    build:\n      skip: true  # [cuda_compiler_version == \"None\"]\n    requirements:\n      run:\n        - faiss ={{ version }}=*_cuda\n    test:\n      imports:\n        - faiss\n\nabout:\n  home: https://github.com/facebookresearch/faiss\n  license: MIT\n  license_family: MIT\n  license_file: LICENSE\n  summary: 'A library for efficient similarity search and clustering of dense vectors.'\n\n  description: |\n    Faiss is a library for efficient similarity search and clustering of dense vectors.\n    It contains algorithms that search in sets of vectors of any size, up to ones that\n    possibly do not fit in RAM. It also contains supporting code for evaluation and\n    parameter tuning. Faiss is written in C++ with complete wrappers for Python/numpy.\n    Some of the most useful algorithms are implemented on the GPU. It is developed by\n    [Facebook AI Research](https://research.fb.com/category/facebook-ai-research-fair/).\n\n    For best performance, the maintainers of the package\n    [recommend](https://github.com/conda-forge/staged-recipes/pull/11337#issuecomment-623718460)\n    using the MKL implementation of blas/lapack. You can ensure that this is installed\n    by adding \"libblas =*=*mkl\" to your dependencies.\n  doc_url: https://rawgit.com/facebookresearch/faiss/master/docs/html/annotated.html\n  dev_url: https://github.com/facebookresearch/faiss\n\nextra:\n  recipe-maintainers:\n    - h-vetinari\n",
 "req": {
  "__set__": true,
  "elements": [
   "cmake",
   "cuda_compiler_stub",
   "cxx_compiler_stub",
   "faiss",
   "libblas",
   "libfaiss",
   "libfaiss-avx2",
   "libgomp",
   "liblapack",
   "llvm-openmp",
   "numpy",
   "pip",
   "python",
   "swig"
  ]
 },
 "requirements": {
  "build": {
   "__set__": true,
   "elements": [
    "cmake",
    "cuda_compiler_stub",
    "cxx_compiler_stub",
    "libgomp",
    "llvm-openmp",
    "swig"
   ]
  },
  "host": {
   "__set__": true,
   "elements": [
    "ctng-compilers",
    "cuda_compiler_stub",
    "cxx_compiler_stub",
    "libblas",
    "libfaiss",
    "libfaiss-avx2",
    "liblapack",
    "numpy",
    "openmp",
    "pip",
    "python"
   ]
  },
  "run": {
   "__set__": true,
   "elements": [
    "ctng-compilers",
    "cuda_compiler_stub",
    "cxx_compiler_stub",
    "faiss",
    "libfaiss",
    "libfaiss-avx2",
    "numpy",
    "openmp",
    "python"
   ]
  },
  "test": {
   "__set__": true,
   "elements": [
    "blas",
    "pytest",
    "scipy"
   ]
  }
 },
 "smithy_version": "3.8.6",
 "strong_exports": false,
 "total_requirements": {
  "build": {
   "__set__": true,
   "elements": [
    "cmake",
    "cuda_compiler_stub",
    "cxx_compiler_stub",
    "libgomp",
    "llvm-openmp",
    "swig"
   ]
  },
  "host": {
   "__set__": true,
   "elements": [
    "libblas",
    "libfaiss =1.7.0=*_cpu",
    "libfaiss =1.7.0=*_cuda",
    "libfaiss-avx2 =1.7.0=*_cpu",
    "libfaiss-avx2 =1.7.0=*_cuda",
    "liblapack",
    "numpy",
    "pip",
    "python"
   ]
  },
  "run": {
   "__set__": true,
   "elements": [
    "faiss =1.7.0=*_cpu",
    "faiss =1.7.0=*_cuda",
    "libfaiss =1.7.0=*_cpu",
    "libfaiss =1.7.0=*_cuda",
    "libfaiss-avx2 =1.7.0=*_cpu",
    "libfaiss-avx2 =1.7.0=*_cuda",
    "numpy",
    "python"
   ]
  },
  "test": {
   "__set__": true,
   "elements": [
    "blas =*=mkl",
    "pytest",
    "scipy"
   ]
  }
 },
 "url": "https://github.com/facebookresearch/faiss/archive/v1.7.0.tar.gz",
 "version": "1.7.0",
 "win_64_meta_yaml": {
  "about": {
   "description": "Faiss is a library for efficient similarity search and clustering of dense vectors.\nIt contains algorithms that search in sets of vectors of any size, up to ones that\npossibly do not fit in RAM. It also contains supporting code for evaluation and\nparameter tuning. Faiss is written in C++ with complete wrappers for Python/numpy.\nSome of the most useful algorithms are implemented on the GPU. It is developed by\n[Facebook AI Research](https://research.fb.com/category/facebook-ai-research-fair/).\n\nFor best performance, the maintainers of the package\n[recommend](https://github.com/conda-forge/staged-recipes/pull/11337#issuecomment-623718460)\nusing the MKL implementation of blas/lapack. You can ensure that this is installed\nby adding \"libblas =*=*mkl\" to your dependencies.\n",
   "dev_url": "https://github.com/facebookresearch/faiss",
   "doc_url": "https://rawgit.com/facebookresearch/faiss/master/docs/html/annotated.html",
   "home": "https://github.com/facebookresearch/faiss",
   "license": "MIT",
   "license_family": "MIT",
   "license_file": "LICENSE",
   "summary": "A library for efficient similarity search and clustering of dense vectors."
  },
  "build": {
   "number": "3"
  },
  "extra": {
   "recipe-maintainers": [
    "h-vetinari"
   ]
  },
  "outputs": [
   {
    "build": {
     "string": "cpu"
    },
    "name": "faiss-proc",
    "test": {
     "commands": [
      "exit 0"
     ]
    },
    "version": "1.0.0"
   },
   {
    "build": {
     "run_exports": [
      "libfaiss{{ libext }}",
      "libfaiss_avx2 =*=*_cpu"
     ],
     "string": "h1234567_3_cpu"
    },
    "name": "libfaiss-avx2",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "cmake"
     ],
     "host": [
      "libblas",
      "liblapack"
     ],
     "run_constrained": [
      "faiss-proc * cpu"
     ]
    },
    "script": "build-lib-avx2.bat",
    "test": {
     "commands": [
      "if not exist %LIBRARY_BIN%\\faiss_avx2.dll exit 1",
      "if not exist %LIBRARY_LIB%\\faiss_avx2.lib exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\AutoTune.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\Clustering.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IVFlib.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\Index.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\Index2Layer.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexBinary.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexBinaryFlat.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexBinaryFromFloat.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexBinaryHNSW.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexBinaryHash.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexBinaryIVF.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexFlat.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexHNSW.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexIVF.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexIVFFlat.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexIVFPQ.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexIVFPQFastScan.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexIVFPQR.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexIVFSpectralHash.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexLSH.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexLattice.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexPQ.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexPQFastScan.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexPreTransform.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexRefine.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexReplicas.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexScalarQuantizer.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\IndexShards.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\MatrixStats.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\MetaIndexes.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\MetricType.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\VectorTransform.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\clone_index.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\index_factory.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\index_io.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\impl\\AuxIndexStructures.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\impl\\FaissAssert.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\impl\\FaissException.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\impl\\HNSW.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\impl\\PolysemousTraining.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\impl\\ProductQuantizer-inl.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\impl\\ProductQuantizer.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\impl\\ResultHandler.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\impl\\ScalarQuantizer.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\impl\\ThreadedIndex-inl.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\impl\\ThreadedIndex.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\impl\\io.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\impl\\io_macros.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\impl\\lattice_Zn.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\impl\\platform_macros.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\impl\\pq4_fast_scan.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\impl\\simd_result_handlers.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\invlists\\BlockInvertedLists.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\invlists\\DirectMap.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\invlists\\InvertedLists.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\invlists\\InvertedListsIOHook.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\utils\\AlignedTable.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\utils\\Heap.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\utils\\WorkerThread.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\utils\\distances.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\utils\\extra_distances.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\utils\\hamming-inl.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\utils\\hamming.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\utils\\ordered_key_value.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\utils\\partitioning.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\utils\\quantize_lut.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\utils\\random.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\utils\\simdlib.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\utils\\simdlib_avx2.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\utils\\simdlib_emulated.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\utils\\utils.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss_avx2\\invlists\\OnDiskInvertedLists.h exit 1"
     ]
    }
   },
   {
    "build": {
     "run_exports": [
      "libfaiss{{ libext }}",
      "libfaiss =*=*_cpu"
     ],
     "string": "h1234567_3_cpu"
    },
    "name": "libfaiss",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "cmake"
     ],
     "host": [
      "libblas",
      "liblapack"
     ],
     "run_constrained": [
      "faiss-proc * cpu"
     ]
    },
    "script": "build-lib-generic.bat",
    "test": {
     "commands": [
      "if not exist %LIBRARY_BIN%\\faiss.dll exit 1",
      "if not exist %LIBRARY_LIB%\\faiss.lib exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\AutoTune.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\Clustering.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IVFlib.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\Index.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\Index2Layer.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexBinary.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexBinaryFlat.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexBinaryFromFloat.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexBinaryHNSW.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexBinaryHash.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexBinaryIVF.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexFlat.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexHNSW.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexIVF.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexIVFFlat.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexIVFPQ.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexIVFPQFastScan.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexIVFPQR.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexIVFSpectralHash.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexLSH.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexLattice.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexPQ.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexPQFastScan.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexPreTransform.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexRefine.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexReplicas.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexScalarQuantizer.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\IndexShards.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\MatrixStats.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\MetaIndexes.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\MetricType.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\VectorTransform.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\clone_index.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\index_factory.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\index_io.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\impl\\AuxIndexStructures.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\impl\\FaissAssert.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\impl\\FaissException.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\impl\\HNSW.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\impl\\PolysemousTraining.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\impl\\ProductQuantizer-inl.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\impl\\ProductQuantizer.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\impl\\ResultHandler.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\impl\\ScalarQuantizer.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\impl\\ThreadedIndex-inl.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\impl\\ThreadedIndex.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\impl\\io.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\impl\\io_macros.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\impl\\lattice_Zn.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\impl\\platform_macros.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\impl\\pq4_fast_scan.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\impl\\simd_result_handlers.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\invlists\\BlockInvertedLists.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\invlists\\DirectMap.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\invlists\\InvertedLists.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\invlists\\InvertedListsIOHook.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\utils\\AlignedTable.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\utils\\Heap.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\utils\\WorkerThread.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\utils\\distances.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\utils\\extra_distances.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\utils\\hamming-inl.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\utils\\hamming.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\utils\\ordered_key_value.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\utils\\partitioning.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\utils\\quantize_lut.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\utils\\random.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\utils\\simdlib.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\utils\\simdlib_avx2.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\utils\\simdlib_emulated.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\utils\\utils.h exit 1",
      "if not exist %LIBRARY_INC%\\faiss\\invlists\\OnDiskInvertedLists.h exit 1"
     ]
    }
   },
   {
    "build": {
     "string": "py39h1234567_3_cpu"
    },
    "name": "faiss",
    "requirements": {
     "build": [
      "cxx_compiler_stub",
      "swig",
      "cmake"
     ],
     "host": [
      "python",
      "pip",
      "numpy",
      "libfaiss =1.7.0=*_cpu",
      "libblas",
      "liblapack"
     ],
     "run": [
      "python",
      "libfaiss =1.7.0=*_cpu",
      "numpy"
     ],
     "run_constrained": [
      "faiss-proc * cpu"
     ]
    },
    "script": "build-pkg.bat",
    "test": {
     "commands": [
      "python -c \"from numpy.core._multiarray_umath import __cpu_features__; print(f'Testing version with AVX2-support - ' + str(__cpu_features__['AVX2']))\"",
      "pytest tests --log-file-level=INFO --log-file=log.txt",
      "type log.txt",
      "python -c \"q = open('log.txt').readlines(); import sys; sys.exit(0 if 'Successfully loaded faiss with AVX2 support.' in [x[35:-1] for x in q] else 1)\"",
      "set NPY_DISABLE_CPU_FEATURES=AVX2",
      "python -c \"from numpy.core._multiarray_umath import __cpu_features__; print(f'Testing version with AVX2-support - ' + str(__cpu_features__['AVX2']))\"",
      "pytest tests --log-file-level=INFO --log-file=log.txt",
      "type log.txt",
      "python -c \"q = open('log.txt').readlines(); import sys; sys.exit(0 if 'Successfully loaded faiss.' in [x[35:-1] for x in q] else 1)\""
     ],
     "imports": [
      "faiss"
     ],
     "requires": [
      "blas =*=mkl",
      "scipy",
      "pytest"
     ],
     "source_files": [
      "tests/"
     ]
    }
   },
   {
    "build": null,
    "name": "faiss-cpu",
    "requirements": {
     "run": [
      "faiss =1.7.0=*_cpu"
     ]
    },
    "test": {
     "imports": [
      "faiss"
     ]
    }
   },
   {
    "build": {
     "skip": true
    },
    "name": "faiss-gpu",
    "requirements": {
     "run": [
      "faiss =1.7.0=*_cuda"
     ]
    },
    "test": {
     "imports": [
      "faiss"
     ]
    }
   }
  ],
  "package": {
   "name": "faiss-split",
   "version": "1.7.0"
  },
  "requirements": {
   "build": [
    "cxx_compiler_stub"
   ]
  },
  "source": {
   "patches": [
    "patches/0001-use-c-14.patch",
    "patches/0002-Add-missing-headers-in-faiss-gpu-CMakeLists.txt-1666.patch",
    "patches/0003-update-util-guard-for-compute_86.patch",
    "patches/0004-Add-missing-includes-for-std-min-std-max.patch",
    "patches/0005-skip-test-that-fails-without-GPU-drivers.patch",
    "patches/0006-make-AVX2-detection-platform-independent-1600.patch",
    "patches/0007-make-setup.py-win-avx2-compatible-1682.patch",
    "patches/0008-log-success-messages-and-errors-in-loader.py-1683.patch",
    "patches/0009-add-msvc-compatible-AVX2-switch-in-CMakeLists.txt-16.patch",
    "patches/0010-Win-AVX2-compat-1681.patch",
    "patches/0011-Windows-portable-intrinsics-1684.patch",
    "patches/0012-adapt-header-target-directory-to-outputname.patch"
   ],
   "sha256": "f86d346ac9f409ee30abe37e52f6cce366b7f60d3924d65719f40aa07ceb4bec",
   "url": "https://github.com/facebookresearch/faiss/archive/v1.7.0.tar.gz"
  }
 },
 "win_64_requirements": {
  "build": {
   "__set__": true,
   "elements": [
    "cmake",
    "cxx_compiler_stub",
    "swig"
   ]
  },
  "host": {
   "__set__": true,
   "elements": [
    "libblas",
    "libfaiss",
    "liblapack",
    "numpy",
    "pip",
    "python"
   ]
  },
  "run": {
   "__set__": true,
   "elements": [
    "faiss",
    "libfaiss",
    "numpy",
    "python"
   ]
  },
  "test": {
   "__set__": true,
   "elements": [
    "blas",
    "pytest",
    "scipy"
   ]
  }
 }
}